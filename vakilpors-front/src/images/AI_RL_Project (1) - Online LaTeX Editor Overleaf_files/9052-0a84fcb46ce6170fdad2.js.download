/*! For license information please see 9052-0a84fcb46ce6170fdad2.js.LICENSE.txt */
(self.webpackChunkFrontend=self.webpackChunkFrontend||[]).push([[9052,8684],{23438:function(e,t,r){"use strict";r.d(t,{Z:function(){return I}});r(15735),r(58188),r(73439),r(28673),r(6886),r(34115),r(634),r(20796),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372);var n=r(2784),o=r(13980),i=r.n(o),a=r(75234),u=r(52322);var l=function(e){var t=e.resetUnreadMessages,r=e.sendMessage,n=(0,a.$G)().t;return(0,u.jsxs)("form",{className:"new-message",children:[(0,u.jsx)("label",{htmlFor:"chat-input",className:"sr-only",children:n("your_message_to_collaborators")}),(0,u.jsx)("textarea",{id:"chat-input",placeholder:"".concat(n("your_message_to_collaborators"),"…"),onKeyDown:function(e){var t=e.nativeEvent.isComposing;if("Enter"===e.key&&!t){e.preventDefault();var n=e.target;r(n.value),window.setTimeout((function(){var e;n.blur(),null===(e=n.closest("form"))||void 0===e||e.reset(),n.focus()}),0)}},onClick:t})]})},c=r(76635),s=r.n(c);function f(e){var t=e.atEnd,r=e.children,o=e.className,i=void 0===o?"":o,a=e.fetchData,l=e.itemCount,c=e.isLoading,f=(0,n.useRef)(null),d=(0,n.useRef)(0);function p(){f.current.scrollTop=f.current.scrollHeight-f.current.clientHeight-d.current}return(0,n.useLayoutEffect)(p,[l]),(0,n.useEffect)((function(){var e=s().debounce(p,400);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),(0,u.jsx)("div",{ref:f,onScroll:function(e){var r,n;r=f.current.scrollHeight-f.current.scrollTop-f.current.clientHeight,d.current=r,e.target===e.currentTarget&&(n=f.current.children[0].clientHeight<f.current.clientHeight,!(t||c||n)&&f.current.scrollTop<30&&a())},className:"infinite-scroll ".concat(i),children:r})}f.propTypes={atEnd:i().bool,children:i().element.isRequired,className:i().string,fetchData:i().func.isRequired,itemCount:i().number.isRequired,isLoading:i().bool};var d=f,p=r(86186),h=r(63584);function ChatFallbackError(e){var t=e.reconnect,r=(0,a.$G)().t;return(0,u.jsx)("aside",{className:"chat",children:(0,u.jsxs)("div",{className:"chat-error",children:[(0,u.jsx)(p.Z,{bsStyle:"danger",children:r("chat_error")}),t&&(0,u.jsx)("p",{className:"text-center",children:(0,u.jsx)(h.Z,{bsStyle:"info",type:"button",onClick:t,children:r("reconnect")})})]})})}ChatFallbackError.propTypes={reconnect:i().any};var y=ChatFallbackError,m=r(10280),v=r(39493),A=r(80564),g=r(23357),b=r(28684),w=r(76591),j=r(28500);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=(0,n.lazy)((function(){return Promise.all([r.e(3546),r.e(551)]).then(r.bind(r,60551))})),C=n.memo((function(){var e=(0,a.$G)().t,t=(0,v.l5)().chatIsOpen,r=(0,A.SE)({id:i().string.isRequired}),o=(0,w.mx)(),c=o.status,s=o.messages,f=o.initialMessagesLoaded,p=o.atEnd,h=o.loadInitialMessages,m=o.loadMoreMessages,g=o.reset,x=o.sendMessage,C=o.markMessagesAsRead,I=o.error;(0,n.useEffect)((function(){t&&!f&&h()}),[t,h,f]);var P="pending"!==c&&0===s.length,k=s.reduce((function(e,t){return e+t.contents.length}),0),R=S((0,n.useState)(t),2),_=R[0],T=R[1];if((0,n.useEffect)((function(){t&&T(!0)}),[t]),I){if(I instanceof b.kp)return(0,u.jsx)(y,{reconnect:g});throw I}return r&&_?(0,u.jsxs)("aside",{className:"chat",children:[(0,u.jsx)(d,{atEnd:p,className:"messages",fetchData:m,isLoading:"pending"===c,itemCount:k,children:(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{className:"sr-only",children:e("chat")}),(0,u.jsxs)(n.Suspense,{fallback:(0,u.jsx)(j.Z,{delay:500}),children:["pending"===c&&(0,u.jsx)(j.Z,{delay:500}),P&&(0,u.jsx)(O,{}),(0,u.jsx)(E,{messages:s,userId:r.id,resetUnreadMessages:C})]})]})}),(0,u.jsx)(l,{resetUnreadMessages:C,sendMessage:x})]}):null}));function O(){var e=(0,a.$G)().t;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"no-messages text-center small",children:e("no_messages")}),(0,u.jsxs)("div",{className:"first-message text-center",children:[e("send_first_message"),(0,u.jsx)("br",{}),(0,u.jsx)(m.Z,{type:"arrow-down"})]})]})}var I=(0,g.Z)(C,y)},76591:function(e,t,r){"use strict";r.d(t,{aM:function(){return E},mx:function(){return C}});r(71372),r(15735),r(58188),r(28673),r(6886),r(60523),r(28399),r(18178),r(88233),r(9575),r(96264),r(34115),r(634),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775),r(20796),r(32501),r(26936),r(27233),r(77950),r(21850);var n=r(2784),o=r(13980),i=r.n(o),a=r(98022),u=r(80564),l=r(13364),c=r(28684),s=r(73720),f=r(73091),d=r(39493),p=r(96931),h=r(52322);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===y(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=50;function j(e,t){switch(t.type){case"INITIAL_FETCH_MESSAGES":return g(g({},e),{},{status:"pending",initialMessagesLoaded:!0});case"FETCH_MESSAGES":return g(g({},e),{},{status:"pending"});case"FETCH_MESSAGES_SUCCESS":return g(g(g({},e),{},{status:"idle"},(0,s.n)(e.messages,t.messages,e.uniqueMessageIds)),{},{lastTimestamp:t.messages[0]?t.messages[0].timestamp:null,atEnd:t.messages.length<w});case"SEND_MESSAGE":return g(g({},e),(0,s.q)(e.messages,{id:(0,a.v4)(),user:t.user,content:t.content,timestamp:Date.now()},e.uniqueMessageIds));case"RECEIVE_MESSAGE":return g(g(g({},e),(0,s.q)(e.messages,t.message,e.uniqueMessageIds)),{},{unreadMessageCount:e.unreadMessageCount+1});case"MARK_MESSAGES_AS_READ":return g(g({},e),{},{unreadMessageCount:0});case"CLEAR":return g({},S);case"ERROR":return g(g({},e),{},{status:"error",error:t.error});default:throw new Error("Unknown action")}}var S={status:"idle",messages:[],initialMessagesLoaded:!1,lastTimestamp:null,atEnd:!1,unreadMessageCount:0,error:null,uniqueMessageIds:[]},x=(0,n.createContext)();function E(e){var t=e.children,r=(0,n.useRef)((0,a.v4)()),o=(0,u.SE)({id:i().string.isRequired}),s=(0,l.d2)({_id:i().string.isRequired})._id,y=(0,d.l5)().chatIsOpen,v=(0,f.Z)(),A=v.hasFocus,g=v.flashTitle,b=v.stopFlashingTitle,E=m((0,n.useReducer)(j,S),2),C=E[0],O=E[1],I=(0,n.useMemo)((function(){function e(){if(!C.atEnd){var e={limit:w};C.lastTimestamp&&(e.before=C.lastTimestamp);var t=new URLSearchParams(e),r="/project/".concat(s,"/messages?").concat(t.toString());(0,c.xA)(r).then((function(){O({type:"FETCH_MESSAGES_SUCCESS",messages:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reverse()})})).catch((function(e){O({type:"ERROR",error:e})}))}}return{loadInitialMessages:function(){C.initialMessagesLoaded||(O({type:"INITIAL_FETCH_MESSAGES"}),e())},loadMoreMessages:function(){O({type:"FETCH_MESSAGES"}),e()},reset:function(){O({type:"CLEAR"}),e()}}}),[s,C.atEnd,C.initialMessagesLoaded,C.lastTimestamp]),P=I.loadInitialMessages,k=I.loadMoreMessages,R=I.reset,_=(0,n.useCallback)((function(e){if(e){O({type:"SEND_MESSAGE",user:o,content:e});var t="/project/".concat(s,"/messages");(0,c.ty)(t,{body:{content:e,client_id:r.current}}).catch((function(e){O({type:"ERROR",error:e})}))}}),[s,o]),T=(0,n.useCallback)((function(){O({type:"MARK_MESSAGES_AS_READ"})}),[]),L=(0,p.I)().socket;(0,n.useEffect)((function(){if(L)return L.on("new-chat-message",e),function(){L&&L.removeListener("new-chat-message",e)};function e(e){e.clientId!==r.current&&O({type:"RECEIVE_MESSAGE",message:e})}}),[L]),(0,n.useEffect)((function(){A&&(b(),y&&T()),!A&&C.unreadMessageCount>0&&g("New Message")}),[A,y,C.unreadMessageCount,g,b,T]);var F=(0,n.useMemo)((function(){return{status:C.status,messages:C.messages,initialMessagesLoaded:C.initialMessagesLoaded,atEnd:C.atEnd,unreadMessageCount:C.unreadMessageCount,loadInitialMessages:P,loadMoreMessages:k,reset:R,sendMessage:_,markMessagesAsRead:T,error:C.error}}),[P,k,T,R,_,C.atEnd,C.error,C.initialMessagesLoaded,C.messages,C.status,C.unreadMessageCount]);return(0,h.jsx)(x.Provider,{value:F,children:t})}function C(e){var t=(0,n.useContext)(x);return i().checkPropTypes(e,t,"data","ChatContext.Provider"),t}x.Provider.propTypes={value:i().shape({status:i().string.isRequired,messages:i().array.isRequired,initialMessagesLoaded:i().bool.isRequired,atEnd:i().bool.isRequired,unreadMessageCount:i().number.isRequired,loadInitialMessages:i().func.isRequired,loadMoreMessages:i().func.isRequired,sendMessage:i().func.isRequired,markMessagesAsRead:i().func.isRequired,reset:i().func.isRequired,error:i().object}).isRequired},E.propTypes={children:i().any}},10649:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});r(15735),r(58188),r(73439),r(28673),r(6886);var n=r(39493),o=(r(34115),r(634),r(20796),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372),r(2784)),i=r(72309),a=r(52322);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,o.memo)((function(){var e=(0,n.l5)().setLeftMenuShown,t=(0,i.cq)().userSettings,r=t.editorTheme,l=t.overallTheme,c=u((0,o.useState)({editorTheme:r,overallTheme:l}),1)[0],s=(0,o.useRef)(null);return(0,o.useEffect)((function(){s.current&&(r===c.editorTheme&&l===c.overallTheme||(s.current.style.opacity="0"))}),[r,l,c]),(0,a.jsx)("div",{id:"left-menu-mask",ref:s,onClick:function(){return e(!1)}})})),s=r(11685),f=r(17631),d=r(72779),p=r.n(d),h=r(28500),y=(0,o.lazy)((function(){return Promise.all([r.e(7036),r.e(4028)]).then(r.bind(r,34028))}));function m(){var e=(0,n.l5)(),t=e.leftMenuShown,r=e.setLeftMenuShown;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Z,{backdropClassName:"left-menu-modal-backdrop",keyboard:!0,onHide:function(){r(!1)},id:"left-menu-modal",show:t,children:(0,a.jsx)(f.Z.Body,{className:p()("full-size",{shown:t}),id:"left-menu",children:(0,a.jsx)(o.Suspense,{fallback:(0,a.jsx)(h.w,{delay:500}),children:(0,a.jsx)(y,{})})})}),t&&(0,a.jsx)(c,{})]})}var v=(0,o.memo)(m)},50641:function(e,t,r){"use strict";r.d(t,{Hc:function(){return s},ou:function(){return c}});r(71372);var n=r(2784),o=r(77241),i=r(45564),a=r(51261),u=r(52322),l=(0,n.createContext)(void 0),c=function(e){var t=e.children,r=(0,o.Z)(),c=r.compiler,s=r.setCompiler,f=r.imageName,d=r.setImageName,p=r.rootDocId,h=r.setRootDocId,y=r.spellCheckLanguage,m=r.setSpellCheckLanguage,v=(0,i.Z)(),A=v.autoComplete,g=v.setAutoComplete,b=v.autoPairDelimiters,w=v.setAutoPairDelimiters,j=v.syntaxValidation,S=v.setSyntaxValidation,x=v.editorTheme,E=v.setEditorTheme,C=v.overallTheme,O=v.setOverallTheme,I=v.mode,P=v.setMode,k=v.fontSize,R=v.setFontSize,_=v.fontFamily,T=v.setFontFamily,L=v.lineHeight,F=v.setLineHeight,D=v.pdfViewer,B=v.setPdfViewer;(0,a.Z)();var N=(0,n.useMemo)((function(){return{compiler:c,setCompiler:s,imageName:f,setImageName:d,rootDocId:p,setRootDocId:h,spellCheckLanguage:y,setSpellCheckLanguage:m,autoComplete:A,setAutoComplete:g,autoPairDelimiters:b,setAutoPairDelimiters:w,syntaxValidation:j,setSyntaxValidation:S,editorTheme:x,setEditorTheme:E,overallTheme:C,setOverallTheme:O,mode:I,setMode:P,fontSize:k,setFontSize:R,fontFamily:_,setFontFamily:T,lineHeight:L,setLineHeight:F,pdfViewer:D,setPdfViewer:B}}),[c,s,f,d,p,h,y,m,A,g,b,w,j,S,x,E,C,O,I,P,k,R,_,T,L,F,D,B]);return(0,u.jsx)(l.Provider,{value:N,children:t})};function s(){var e=(0,n.useContext)(l);if(!e)throw new Error("useProjectSettingsContext is only available inside ProjectSettingsProvider");return e}},81721:function(e,t,r){"use strict";r.d(t,{Z:function(){return nt}});var n={};r.r(n),r.d(n,{default:function(){return K}});r(26936);var o=r(2784),i=r(13980),a=r.n(i),u=(r(9575),r(96264),r(34115),r(634),r(58188),r(71372),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(27233),r(77950),r(21850),r(72779)),l=r.n(u),c=r(75234),s=r(10280),f=(r(73439),r(22866)),d=r(80564),p=r(36915),h=r(49169),y=r(13364),m=r(91354),v=r(28684),A=r(96931),g=r(52322);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=(0,o.createContext)();function I(e){var t,r,n,i=e.children,u=(0,d.SE)({first_name:a().string,last_name:a().string}),l=u.first_name,c=u.last_name,s=(0,y.d2)({_id:a().string.isRequired,name:a().string.isRequired,rootDocId:a().string.isRequired}),b=s._id,w=s.name,S=s.rootDocId,C=(0,m.O)({hasFolders:a().bool}).hasFolders,I=(0,A.I)(),P=(0,f._i)({cobranding:a().shape({brandVariationId:a().number.isRequired,brandId:a().number.isRequired,publishGuideHtml:a().string,partner:a().string,brandedMenu:a().bool})}).cobranding,k=(0,p.Im)(),R=k.pdfDownloadUrl,_=k.pdfUrl,T=k.logEntries,L=(0,p.Im)({uncompiled:a().bool}).uncompiled;P&&(P.publishGuideHtml||P.partner)?P.brandedMenu?(r="/journals/".concat(P.brandId),t="branded"):P.partner?(r="/journals/".concat(P.brandId),t="export",n=P.brandVariationId):(r="/journals/".concat(P.brandId),t="guide",n=P.brandVariationId):(r="/journals",t="basic");var F=x((0,o.useState)(null),2),D=F[0],B=F[1],N=x((0,o.useState)(null),2),M=N[0],Z=N[1],Q=(0,h.Z)(),q=(0,o.useCallback)((function(){var e="/latest_template/".concat(b);return Promise.all([(0,v.xA)(e),(0,v.xA)(r)]).then((function(e){var t=x(e,2),r=t[0],n=t[1];if(Q.current){var o=r.title?{title:r.title}:{};o.description=r.description,o.author=r.author,o.license=r.license,Z(r),B(n)}}))}),[Q,r,b]),U=(0,o.useCallback)((function(){var e=S;if(I.editorManager.getCurrentDocId()===e)return!1;var t=I.editorManager.getCurrentDocValue();if(null==t)return!1;var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=E(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(t.split("\n"));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(/^[^%]*\\documentclass/.test(o))return!0}}catch(e){n.e(e)}finally{n.f()}return!1}),[I.editorManager,S]),H={entries:D,initialShown:t,brandVariationId:n,fetchData:q,initParams:j({projectId:b,pdfUrl:_?R:void 0,logs:T,uncompiled:L,hasFolders:C,rootDocOverridden:U(S),firstName:l,lastName:c,title:w},M)};return(0,g.jsx)(O.Provider,{value:H,children:i})}O.Provider.propTypes={value:a().shape({entries:a().object,initialShown:a().oneOf(["basic","guide","branded","export"]).isRequired,brandVariationId:a().number,fetchData:a().func.isRequired,initParams:a().shape({title:a().string,description:a().string,author:a().string,license:a().string,projectId:a().string.isRequired,pdfUrl:a().string,logs:a().object,uncompiled:a().bool,hasFolders:a().bool,rootDocOverridden:a().bool,firstName:a().string,lastName:a().string}).isRequired}).isRequired},I.propTypes={children:a().any};var P=r(17631),k=r(11685);r(96928),r(92215),r(61229);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(o=n.key,i=void 0,i=function(e,t){if("object"!==R(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===R(i)?i:String(i)),n)}var o,i}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=F(e);if(t){var o=F(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===R(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function F(e){return F=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},F(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(DestinationsError,e);var t,r,n,o=L(DestinationsError);function DestinationsError(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DestinationsError),o.apply(this,arguments)}return t=DestinationsError,(r=[{key:"render",value:function(){return(0,g.jsx)("span",{children:(0,g.jsxs)("p",{children:["Sorry, we had trouble retrieving our list of submission destinations. If you give us a minute, retry, and still find this error, please notify support at"," ",(0,g.jsx)("a",{href:"mailto:support@overleaf.com?subject=Unable to submit",children:"support@overleaf.com"})]})})}}])&&_(t.prototype,r),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),DestinationsError}(o.Component);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=(0,o.lazy)((function(){return r.e(9493).then(r.bind(r,49493))}));function Z(e){var t,n,i,u=e.handleHide,l=(0,c.$G)().t,s=(t={entries:a().object,initialShown:a().string.isRequired,initParams:a().object.isRequired,fetchData:a().func.isRequired,brandVariationId:a().number},n=(0,o.useContext)(O),a().checkPropTypes(t,n,"data","PublishContext.Provider"),n),f=s.entries,d=s.initialShown,p=s.initParams,y=s.fetchData,m=s.brandVariationId,v=B((0,o.useState)(!0),2),A=v[0],b=v[1],w=B((0,o.useState)(!1),2),j=w[0],S=w[1],x=B((0,o.useState)(!1),2),E=x[0],C=x[1],I=(0,h.Z)();return(0,o.useEffect)((function(){r.e(9493).then(r.bind(r,49493)).catch((function(){return C(!0)})),j||(y().catch((function(){I.current&&C(!0)})),S(!0))}),[I,j,y]),i=f&&null!=p&&p.logs?(0,g.jsx)(o.Suspense,{fallback:(0,g.jsx)(Q,{}),children:(0,g.jsx)(M,{entries:f,initialShown:d,initParams:p,brandVariationId:m})}):E?(0,g.jsx)(D,{}):(0,g.jsx)(Q,{}),(0,g.jsxs)(k.Z,{bsSize:"large",show:A,onHide:function(){u(),b(!1)},children:[(0,g.jsx)(P.Z.Header,{closeButton:!0,children:(0,g.jsxs)(P.Z.Title,{children:[" ",l("submit_title")," "]})}),(0,g.jsx)(P.Z.Body,{children:(0,g.jsxs)("div",{className:"modal-body-publish",children:[i," "]})})]})}function Q(){var e=(0,c.$G)().t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s.Z,{type:"refresh",fw:!0,spin:!0})," ",(0,g.jsxs)("span",{children:[e("loading"),"…"]})]})}Z.propTypes={handleHide:a().func.isRequired};var q=r(23357),U=r(96227);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e){var t=e.cobranding,r=(0,c.$G)().t,n=H((0,o.useState)(!1),2),i=n[0],a=n[1];var u=l()("btn","btn-full-height");return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{id:"publishButton",className:u,onClick:function(){U.BZ("navigation-clicked-submit"),a(!0)},children:[(0,g.jsx)(s.Z,{type:"globe",fw:!0}),null!=t&&t.submitBtnHtml?(0,g.jsx)("p",{className:"toolbar-label toolbar-label-multiline",dangerouslySetInnerHTML:{__html:t.submitBtnHtml}}):(0,g.jsx)("p",{className:"toolbar-label",children:r("submit_title")})]})}),i&&(0,g.jsx)(I,{children:(0,g.jsx)(Z,{handleHide:function(){a(!1)}})})]})}V.propTypes={cobranding:a().shape({submitBtnHtml:a().string})};var K=(0,q.Z)(V);function z(e){var t=e.onClick,r=(0,c.$G)().t;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,g.jsx)(s.Z,{type:"bars",fw:!0,className:"editor-menu-icon"}),(0,g.jsx)("p",{className:"toolbar-label",children:r("menu")})]})})}z.propTypes={onClick:a().func.isRequired};var W=z;function J(e){var t=e.brandVariationHomeUrl,r=e.brandVariationName,n=e.logoImgUrl;return(0,g.jsx)("a",{className:"btn btn-full-height header-cobranding-logo-container",href:t,target:"_blank",rel:"noreferrer noopener",children:(0,g.jsx)("img",{src:n,className:"header-cobranding-logo",alt:r})})}J.propTypes={brandVariationHomeUrl:a().string.isRequired,brandVariationName:a().string.isRequired,logoImgUrl:a().string.isRequired};var X=J,Y=r(24958);var $=function(){var e=(0,c.$G)().t;return(0,g.jsx)(Y.Z,{id:"back-to-projects",description:e("back_to_your_projects"),overlayProps:{placement:"right"},children:(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsx)("a",{className:"btn btn-full-height",draggable:"false",href:"/project",onClick:function(){U.BZ("navigation-clicked-home")},children:(0,g.jsx)(s.Z,{type:"home",fw:!0,accessibilityLabel:e("back_to_your_projects")})})})})};var ee=function(){var e=(0,c.$G)().t;return(0,g.jsx)("a",{className:"toolbar-header-upgrade-prompt btn btn-primary btn-xs",href:"/user/subscription/plans?itm_referrer=editor-header-upgrade-prompt",target:"_blank",onClick:function(e){U.lW("subscription-funnel","code-editor","upgrade"),U.BZ("upgrade-button-click",{source:"code-editor"})},children:e("upgrade")})};function te(e){var t=e.chatIsOpen,r=e.unreadMessageCount,n=e.onClick,o=(0,c.$G)().t,i=l()("btn","btn-full-height","btn-full-height-no-border",{active:t}),a=r>0;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:i,onClick:n,children:[(0,g.jsx)(s.Z,{type:"comment",fw:!0,className:a?"bounce":""}),a&&(0,g.jsx)("span",{className:"label label-info",children:r}),(0,g.jsx)("p",{className:"toolbar-label",children:o("chat")})]})})}te.propTypes={chatIsOpen:a().bool,unreadMessageCount:a().number.isRequired,onClick:a().func.isRequired};var re=te,ne=r(13253),oe=r(82752);var ie=function(){var e=(0,c.$G)().t;return(0,g.jsx)(s.Z,{type:"check",fw:!0,accessibilityLabel:e("selected")})},ae=r(15300),ue=r(39493),le=r(32687);function ce(e){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ce(e)}var se=["checkmark","icon","text"];function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ce(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ce(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function he(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ye(){return(0,g.jsx)(s.Z,{type:"",fw:!0})}function me(){return(0,g.jsx)(s.Z,{type:"refresh",fw:!0,spin:!0})}function ve(){return(0,g.jsx)(s.Z,{type:"columns",fw:!0})}function Ae(){return(0,g.jsx)(s.Z,{type:"columns",fw:!0})}function ge(){return(0,g.jsx)(s.Z,{type:"window-restore",fw:!0})}function be(){return(0,g.jsx)(s.Z,{type:"code",fw:!0})}function we(){return(0,g.jsx)(s.Z,{type:"file-pdf-o",fw:!0})}function je(e){var t=e.iconFor,r=e.pdfLayout,n=e.view;return"detacher"===e.detachRole||"history"===n?(0,g.jsx)(ye,{}):"editorOnly"!==t||"flat"!==r||"editor"!==n&&"file"!==n?"pdfOnly"===t&&"flat"===r&&"pdf"===n||"sideBySide"===t&&"sideBySide"===r?(0,g.jsx)(ie,{}):(0,g.jsx)(ye,{}):(0,g.jsx)(ie,{})}function Se(e){var t=e.checkmark,r=e.icon,n=e.text,o=he(e,se);return(0,g.jsx)(ne.Z,de(de({},o),{},{children:(0,g.jsx)("div",{className:"layout-menu-item",children:(0,g.jsxs)("div",{className:"layout-menu-item-start",children:[(0,g.jsx)("div",{children:t}),(0,g.jsx)("div",{children:r}),(0,g.jsx)("div",{children:n})]})})}))}function xe(){var e=(0,c.$G)().t;return(0,g.jsx)(Y.Z,{id:"detach-disabled",description:e("your_browser_does_not_support_this_feature"),overlayProps:{placement:"left"},children:(0,g.jsx)(Se,{disabled:!0,checkmark:(0,g.jsx)(ye,{}),icon:(0,g.jsx)(ge,{}),text:e("pdf_in_separate_tab")})})}function Ee(){var e=(0,c.$G)().t,t=(0,ue.l5)(),r=t.reattach,n=t.detach,i=t.detachIsLinked,a=t.detachRole,u=t.changeLayout,l=t.view,s=t.pdfLayout,f=(0,o.useCallback)((function(){n(),U.BZ("project-layout-detach")}),[n]),d=(0,o.useCallback)((function(){"detacher"===a&&(r(),U.BZ("project-layout-reattach"))}),[a,r]);(0,le.Z)("ui:pdf-open",d);var p=(0,o.useCallback)((function(e,t){d(),u(e,t),U.BZ("project-layout-change",{layout:e,view:t})}),[u,d]),h=!i&&"detacher"===a;return(0,g.jsxs)(g.Fragment,{children:[h&&(0,g.jsx)("div",{"aria-live":"assertive",className:"sr-only",children:e("layout_processing")}),(0,g.jsxs)(ae.Z,{id:"layout-dropdown",onMainButtonClick:function(){U.BZ("navigation-clicked-layout")},className:"toolbar-item layout-dropdown",pullRight:!0,children:[(0,g.jsxs)(oe.Z.Toggle,{className:"btn-full-height",bsStyle:"link",children:[h?(0,g.jsx)(me,{}):(0,g.jsx)(ve,{}),(0,g.jsx)("span",{className:"toolbar-label",children:e("layout")})]}),(0,g.jsxs)(oe.Z.Menu,{className:"layout-dropdown-list",children:[(0,g.jsx)(Se,{onSelect:function(){return p("sideBySide")},checkmark:(0,g.jsx)(je,{iconFor:"sideBySide",pdfLayout:s,view:l,detachRole:a}),icon:(0,g.jsx)(Ae,{}),text:e("editor_and_pdf")}),(0,g.jsx)(Se,{onSelect:function(){return p("flat","editor")},checkmark:(0,g.jsx)(je,{iconFor:"editorOnly",pdfLayout:s,view:l,detachRole:a}),icon:(0,g.jsx)(be,{}),text:(0,g.jsx)(c.cC,{i18nKey:"editor_only_hide_pdf",components:[(0,g.jsx)("span",{className:"subdued"},"editor_only_hide_pdf")]})}),(0,g.jsx)(Se,{onSelect:function(){return p("flat","pdf")},checkmark:(0,g.jsx)(je,{iconFor:"pdfOnly",pdfLayout:s,view:l,detachRole:a}),icon:(0,g.jsx)(we,{}),text:(0,g.jsx)(c.cC,{i18nKey:"pdf_only_hide_editor",components:[(0,g.jsx)("span",{className:"subdued"},"pdf_only_hide_editor")]})}),"BroadcastChannel"in window?(0,g.jsx)(Se,{onSelect:function(){return f()},checkmark:"detacher"===a?i?(0,g.jsx)(ie,{}):(0,g.jsx)(me,{}):(0,g.jsx)(ye,{}),icon:(0,g.jsx)(ge,{}),text:e("pdf_in_separate_tab")}):(0,g.jsx)(xe,{})]})]})]})}Se.propTypes={checkmark:a().node.isRequired,icon:a().node.isRequired,text:a().oneOfType([a().string,a().node]).isRequired,onSelect:a().func};var Ce=(0,o.memo)(Ee);je.propTypes={iconFor:a().string.isRequired,pdfLayout:a().string.isRequired,view:a().string,detachRole:a().string};r(43450),r(18178);var Oe=r(56556);function Ie(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ke(e){var t=e.onlineUsers,r=e.goToUser,n=(0,c.$G)().t;return t.length>=4?(0,g.jsxs)(ae.Z,{id:"online-users",className:"online-users",pullRight:!0,children:[(0,g.jsx)(_e,{bsRole:"toggle",onlineUserCount:t.length}),(0,g.jsxs)(oe.Z.Menu,{children:[(0,g.jsx)(ne.Z,{header:!0,children:n("connected_users")}),t.map((function(e,t){return(0,g.jsx)(ne.Z,{as:"button",eventKey:e,onSelect:r,children:(0,g.jsx)(Re,{user:e,onClick:r,showName:!0})},"".concat(e.user_id,"_").concat(t))}))]})]}):(0,g.jsx)("div",{className:"online-users",children:t.map((function(e,t){return(0,g.jsx)(Y.Z,{id:"online-user",description:e.name,overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,g.jsx)("span",{children:(0,g.jsx)(Re,{user:e,onClick:r})})},"".concat(e.user_id,"_").concat(t))}))})}function Re(e){var t=e.user,r=e.showName,n=e.onClick,o="hsl(".concat((0,Oe.V)(t.user_id),", 70%, 50%)");var i=Ie(t.name)[0];return(0,g.jsxs)("span",{onClick:function(){n(t)},children:[(0,g.jsx)("span",{className:"online-user",style:{backgroundColor:o},children:i}),r&&t.name]})}ke.propTypes={onlineUsers:a().arrayOf(a().shape({user_id:a().string.isRequired,name:a().string.isRequired})).isRequired,goToUser:a().func.isRequired},Re.propTypes={user:a().shape({user_id:a().string.isRequired,name:a().string.isRequired}),showName:a().bool,onClick:a().func.isRequired};var _e=o.forwardRef((function(e,t){var r=(0,c.$G)().t;return(0,g.jsx)(Y.Z,{id:"connected-users",description:r("connected_users"),overlayProps:{placement:"left"},children:(0,g.jsxs)("button",{className:"btn online-user online-user-multi",onClick:e.onClick,children:[(0,g.jsx)("strong",{children:e.onlineUserCount}),(0,g.jsx)(s.Z,{type:"users",fw:!0})]})})}));_e.displayName="DropDownToggleButton",_e.propTypes={onlineUserCount:a().number.isRequired,onClick:a().func};var Te=ke;function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var De=function(e){var t=e.projectName,r=e.hasRenamePermissions,n=e.onChange,i=e.className,a=(0,c.$G)().t,u=Le((0,o.useState)(!1),2),f=u[0],d=u[1],p=r&&!f,h=Le((0,o.useState)(t),2),y=h[0],m=h[1],v=(0,o.useRef)(null);function A(){p&&(m(t),d(!0))}function b(){d(!1),n(y)}return(0,o.useEffect)((function(){var e;f&&(null===(e=v.current)||void 0===e||e.select())}),[f]),(0,g.jsxs)("div",{className:l()("project-name",i),children:[!f&&(0,g.jsx)("span",{className:"name",onDoubleClick:A,children:t}),f&&(0,g.jsx)("input",{ref:v,type:"text",className:"form-control",onKeyDown:function(e){"Enter"===e.key&&(e.preventDefault(),b())},onChange:function(e){m(e.target.value)},onBlur:function(){f&&b()},value:y}),p&&(0,g.jsx)(Y.Z,{id:"online-user",description:a("rename"),overlayProps:{placement:"bottom",trigger:["hover","focus"]},children:(0,g.jsx)("a",{className:"rename",role:"button",onClick:A,children:(0,g.jsx)(s.Z,{type:"pencil",fw:!0})})})]})};function Be(e){var t=e.trackChangesIsOpen,r=e.disabled,n=e.onMouseDown,o=(0,c.$G)().t,i=l()("btn","btn-full-height",{active:t&&!r,disabled:r});return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{disabled:r,className:i,onMouseDown:n,children:[(0,g.jsx)("i",{className:"review-icon"}),(0,g.jsx)("p",{className:"toolbar-label",children:o("review")})]})})}Be.propTypes={trackChangesIsOpen:a().bool,disabled:a().bool,onMouseDown:a().func.isRequired};var Ne=Be;function Me(e){var t=e.historyIsOpen,r=e.onClick,n=(0,c.$G)().t,o=l()("btn","btn-full-height",{active:t});return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:o,onClick:r,children:[(0,g.jsx)(s.Z,{type:"history",fw:!0}),(0,g.jsx)("p",{className:"toolbar-label",children:n("history")})]})})}Me.propTypes={historyIsOpen:a().bool,onClick:a().func.isRequired};var Ze=Me;function Qe(e){var t=e.onClick,r=(0,c.$G)().t;return(0,g.jsx)("div",{className:"toolbar-item",children:(0,g.jsxs)("button",{className:"btn btn-full-height",onClick:t,children:[(0,g.jsx)(s.Z,{type:"group",fw:!0}),(0,g.jsx)("p",{className:"toolbar-label",children:r("share")})]})})}Qe.propTypes={onClick:a().func.isRequired};var qe=Qe;function Ue(e){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ue(e)}function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){Ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ue(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ue(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ke={import:n,path:"/overleaf/services/web/modules/publish-modal/frontend/js/components/publish-toolbar-button"},ze=null==Ke?void 0:Ke.import.default,We=o.memo((function(e){var t=e.cobranding,r=e.onShowLeftMenuClick,n=e.chatIsOpen,o=e.toggleChatOpen,i=e.reviewPanelOpen,a=e.toggleReviewPanelOpen,u=e.historyIsOpen,l=e.toggleHistoryOpen,s=e.unreadMessageCount,f=e.onlineUsers,d=e.goToUser,p=e.isRestrictedTokenMember,h=e.hasPublishPermissions,y=e.projectName,m=e.renameProject,v=e.hasRenamePermissions,A=e.openShareModal,b=e.trackChangesVisible,w=(0,c.$G)().t,j=h&&ze,S=b&&!p;return(0,g.jsxs)("header",{className:"toolbar toolbar-header toolbar-with-labels",role:"navigation","aria-label":w("project_layout_sharing_submission"),children:[(0,g.jsxs)("div",{className:"toolbar-left",children:[(0,g.jsx)(W,{onClick:r}),t&&t.logoImgUrl&&(0,g.jsx)(X,Ge({},t)),(0,g.jsx)($,{})]}),window.showUpgradePrompt&&(0,g.jsx)(ee,{}),(0,g.jsx)(De,{className:"toolbar-center",projectName:y,hasRenamePermissions:v,onChange:m}),(0,g.jsxs)("div",{className:"toolbar-right",children:[(0,g.jsx)(Te,{onlineUsers:f,goToUser:d}),S&&(0,g.jsx)(Ne,{onMouseDown:a,disabled:u,trackChangesIsOpen:i}),(0,g.jsx)(qe,{onClick:A}),j&&(0,g.jsx)(ze,{cobranding:t}),!p&&(0,g.jsx)(Ze,{historyIsOpen:u,onClick:l}),(0,g.jsx)(Ce,{}),!p&&(0,g.jsx)(re,{chatIsOpen:n,onClick:o,unreadMessageCount:s})]})]})}));We.propTypes={onShowLeftMenuClick:a().func.isRequired,cobranding:a().object,chatIsOpen:a().bool,toggleChatOpen:a().func.isRequired,reviewPanelOpen:a().bool,toggleReviewPanelOpen:a().func.isRequired,historyIsOpen:a().bool,toggleHistoryOpen:a().func.isRequired,unreadMessageCount:a().number.isRequired,onlineUsers:a().array.isRequired,goToUser:a().func.isRequired,isRestrictedTokenMember:a().bool,hasPublishPermissions:a().bool,projectName:a().string.isRequired,renameProject:a().func.isRequired,hasRenamePermissions:a().bool,openShareModal:a().func.isRequired,trackChangesVisible:a().bool};var Je=We,Xe=r(76591),Ye={name:a().string.isRequired,features:a().shape({trackChangesVisible:a().bool}).isRequired},$e={cobranding:a().object,loading:a().bool,isRestrictedTokenMember:a().bool,renameProject:a().func.isRequired,isProjectOwner:a().bool,permissionsLevel:a().string},et={markMessagesAsRead:a().func.isRequired,unreadMessageCount:a().number.isRequired};function tt(e){return e?"open":"close"}var rt=o.memo((function(e){var t=e.onlineUsersArray,r=e.openDoc,n=e.openShareProjectModal,i=(0,y.d2)(Ye),a=i.name,u=i.features.trackChangesVisible,l=(0,f._i)($e),c=l.cobranding,s=l.loading,d=l.isRestrictedTokenMember,p=l.renameProject,h=l.permissionsLevel,m=(0,ue.l5)(),v=m.chatIsOpen,A=m.setChatIsOpen,b=m.reviewPanelOpen,w=m.setReviewPanelOpen,j=m.view,S=m.setView,x=m.setLeftMenuShown,E=(0,Xe.mx)(et),C=E.markMessagesAsRead,O=E.unreadMessageCount,I=(0,o.useCallback)((function(){v||C(),U.BZ("navigation-clicked-chat",{action:tt(!v)}),A((function(e){return!e}))}),[v,A,C]),P=(0,o.useCallback)((function(e){e.preventDefault(),U.BZ("navigation-clicked-review",{action:tt(!b)}),w((function(e){return!e}))}),[b,w]),k=(0,o.useCallback)((function(){var e="history"===j?"close":"open";U.BZ("navigation-clicked-history",{action:e}),S("history"===j?"editor":"history")}),[j,S]),R=(0,o.useCallback)((function(){U.BZ("navigation-clicked-share"),n()}),[n]),_=(0,o.useCallback)((function(){U.BZ("navigation-clicked-menu"),x((function(e){return!e}))}),[x]),T=(0,o.useCallback)((function(e){e.doc&&"number"==typeof e.row&&r(e.doc,{gotoLine:e.row+1})}),[r]);return(0,g.jsx)(Je,{style:s?{display:"none"}:{},cobranding:c,onShowLeftMenuClick:_,chatIsOpen:v,unreadMessageCount:O,toggleChatOpen:I,reviewPanelOpen:b,toggleReviewPanelOpen:P,historyIsOpen:"history"===j,toggleHistoryOpen:k,onlineUsers:t,goToUser:T,isRestrictedTokenMember:d,hasPublishPermissions:"owner"===h||"readAndWrite"===h,projectName:a,renameProject:p,hasRenamePermissions:"owner"===h,openShareModal:R,trackChangesVisible:u})}));rt.propTypes={onlineUsersArray:a().array.isRequired,openDoc:a().func.isRequired,openShareProjectModal:a().func.isRequired};var nt=rt},36190:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var n=r(13980),o=r.n(n),i=r(86186),a=r(52322);function u(e){var t=e.children;return(0,a.jsx)(i.Z,{bsStyle:"danger",children:t})}u.propTypes={children:o().any.isRequired}},13516:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var n=r(13980),o=r.n(n),i=r(75234),a=r(28684),u=(r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372),r(2784)),l=r(13364),c=r(46267);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(){var e=(0,i.$G)().t,t=(0,l.d2)(p)._id,r=s((0,u.useState)(10),2),n=r[0],o=r[1],a=(0,c.T)();return(0,u.useEffect)((function(){o(10);var e=window.setInterval((function(){o((function(r){return 0===r?(window.clearInterval(e),a.assign("/login?redir=/project/".concat(t)),0):r-1}))}),1e3);return function(){window.clearInterval(e)}}),[t,a]),e("session_expired_redirecting_to_login",{seconds:n})}var p={_id:o().string.isRequired},h=r(17776),y=r(36190),m=r(52322);function v(e){var t=e.error,r=(0,i.$G)().t;if("string"==typeof t)switch(t){case"name-exists":return(0,m.jsx)(y.Z,{children:r("file_already_exists")});case"too-many-files":return(0,m.jsx)(y.Z,{children:r("project_has_too_many_files")});case"remote-service-error":return(0,m.jsx)(y.Z,{children:r("remote_service_error")});case"invalid_filename":return(0,m.jsx)(y.Z,{children:r("invalid_filename",{nameLimit:150})});case"rate-limit-hit":return(0,m.jsx)(y.Z,{children:r("too_many_files_uploaded_throttled_short_period")});case"not-logged-in":return(0,m.jsx)(y.Z,{children:(0,m.jsx)(d,{})});case"linked-project-compile-error":return(0,m.jsx)(y.Z,{children:r("generic_linked_file_compile_error")});default:return(0,m.jsx)(y.Z,{children:r("generic_something_went_wrong")})}switch(t.constructor){case a.kp:var n,o,u=null===(n=t.data)||void 0===n?void 0:n.message;if(u)return(0,m.jsx)(y.Z,{children:u.text||u});switch(null===(o=t.response)||void 0===o?void 0:o.status){case 400:return(0,m.jsx)(y.Z,{children:r("invalid_request")});case 403:return(0,m.jsx)(y.Z,{children:r("session_error")});case 429:return(0,m.jsx)(y.Z,{children:r("too_many_attempts")});default:return(0,m.jsx)(y.Z,{children:r("something_went_wrong_server")})}case h.w4:case h.I9:case h.Cr:return null;default:return(0,m.jsx)(y.Z,{children:r("generic_something_went_wrong")})}}v.propTypes={error:o().oneOfType([o().string,o().object]).isRequired}},17754:function(e,t,r){"use strict";r.d(t,{Z:function(){return Fr}});var n={};r.r(n),r.d(n,{CreateFileMode:function(){return tr},CreateFilePane:function(){return rr}});var o={};r.r(o),r.d(o,{CreateFileMode:function(){return nr},CreateFilePane:function(){return or}});r(9575),r(96264),r(34115),r(634),r(58188),r(71372),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775),r(20796),r(15735),r(28673),r(6886);var i=r(2784),a=r(13980),u=r.n(a),l=r(23357),c=r(13364),s=r(91354),f=r(8668),d=r(4134),p=r(38485),h=(r(18178),r(93244),r(27233),r(26936),r(43450),r(92215),r(61229),r(32501),r(88233),r(77950),r(21850),r(75234)),y=r(4031),m=r.n(y),v=r(58926),A=r(72721),g=r(56704),b=r(14345),w=r(77426),j=r(42484),S=r(83997),x=r(38113),E=r(22866),C=r(52322);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function T(e,t,r){return T=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&L(o,r.prototype),o},T.apply(null,arguments)}function L(e,t){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},L(e,t)}var F=(0,v.W)((function(){function e(t){return!(!t.getAttribute||!t.getAttribute("dnd-container"))||!!t.parentNode&&e(t.parentNode)}for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=T(w.PD,r);return["handleTopDragStart","handleTopDragStartCapture","handleTopDragEndCapture","handleTopDragEnter","handleTopDragEnterCapture","handleTopDragLeaveCapture","handleTopDragOver","handleTopDragOverCapture","handleTopDrop","handleTopDropCapture"].forEach((function(t){var r=o[t];o[t]=function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];e(t.target)&&r.apply(void 0,[t].concat(o))}})),o})),D="ENTITY";function B(e){var t=e.children,r=(0,i.useRef)(F);return(0,C.jsx)(A.W,{manager:r.current.dragDropManager,children:t})}function N(e){var t=(0,h.$G)().t,r=(0,E._i)(M).permissionsLevel,n=(0,s.O)().fileTreeData,o=(0,p.nF)(),a=o.selectedEntityIds,u=o.isRootFolderSelected,l=R((0,i.useState)(!0),2),c=l[0],f=l[1],d={type:D},y=(0,g.c)({item:d,begin:function(){var r=function(e,t){return e.size>1&&e.has(t)?new Set(e):new Set([t])}(u?new Set:a,e),o=(0,x.gl)(n,r),i=function(e,t){if(1===e.size){return Array.from(e)[0].entity.name}return t("n_items",{count:e.size})}(o,t),l=function(e){var t=Array.from(e).filter((function(e){return"folder"===e.type})).map((function(e){return e.entity})),r=new Set(t);return(0,x.mz)(r)}(o);return P(P({},d),{},{title:i,forbiddenFolderIds:l,draggedEntityIds:r})},collect:function(e){return{isDragging:!!e.isDragging()}},canDrag:function(){return"readOnly"!==r&&c},end:function(){return d}}),m=R(y,3),v=m[0],A=v.isDragging,b=v.draggedEntityIds,w=m[1],S=m[2];return(0,i.useEffect)((function(){S((0,j.r)())}),[S]),{dragRef:w,isDragging:A,setIsDraggable:f,draggedEntityIds:b}}B.propTypes={children:u().oneOfType([u().arrayOf(u().node),u().node]).isRequired};var M={permissionsLevel:u().oneOf(["readOnly","readAndWrite","owner"])};function Z(e){var t=(0,d.Z)(),r=t.finishMoving,n=t.setDroppedFiles,o=t.startUploadingDocOrFile,i=R((0,b.L)({accept:[D,S.FILE],canDrop:function(t,r){return!!r.isOver({shallow:!0})&&(t.type!==D||!t.forbiddenFolderIds.has(e))},drop:function(t,i){i.didDrop()||(t.type===D?r(e,t.draggedEntityIds):m()(t).then((function(t){n({files:t,targetFolderId:e}),o()})))},collect:function(e){return{isOver:e.canDrop()}}}),2),a=i[0].isOver;return{dropRef:i[1],isOver:a}}function Q(e){var t=e.refProviders,r=e.reindexReferences,n=e.setRefProviderEnabled,o=e.setStartedFreeTrial,i=e.onSelect,a=e.children;return(0,C.jsx)(f.Q,{refProviders:t,setRefProviderEnabled:n,setStartedFreeTrial:o,reindexReferences:r,children:(0,C.jsx)(p.oJ,{onSelect:i,children:(0,C.jsx)(d.P,{reindexReferences:r,children:(0,C.jsx)(B,{children:a})})})})}Q.propTypes={reindexReferences:u().func.isRequired,refProviders:u().object.isRequired,setRefProviderEnabled:u().func.isRequired,setStartedFreeTrial:u().func.isRequired,onSelect:u().func.isRequired,children:u().oneOfType([u().arrayOf(u().node),u().node]).isRequired};var q=Q,U=r(72779),H=r.n(U);function G(e){var t,r=e.isOver,n=e.isDragging,o=e.item,a=e.clientOffset,u=(0,i.useRef)();return(0,C.jsx)("div",{ref:u,className:H()("dnd-draggable-preview-layer",{"dnd-droppable-hover":r}),children:n&&(null==o?void 0:o.title)&&(0,C.jsx)("div",{style:K(a,null===(t=u.current)||void 0===t?void 0:t.getBoundingClientRect()),children:(0,C.jsx)(V,{title:o.title})})})}function V(e){var t=e.title;return(0,C.jsx)("div",{className:"dnd-draggable-preview-item",children:t})}function K(e,t){if(!t||!e)return{display:"none"};var r=t.x,n=t.y,o=e.x,i=e.y-n-15,a="translate(".concat(o-r-15,"px, ").concat(i,"px)");return{transform:a,WebkitTransform:a}}G.propTypes={isOver:u().bool.isRequired,isDragging:u().bool.isRequired,item:u().shape({title:u().string.isRequired}),clientOffset:u().shape({x:u().number,y:u().number})},V.propTypes={title:u().string.isRequired};var z=G,W=(r(43430),r(93057)),J=r(41061);function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $(e){var t=e.name,r=e.isSelected,n=e.setIsDraggable,o=(0,d.Z)(),a=o.isRenaming,u=o.startRenaming,l=o.finishRenaming,c=o.error,s=o.cancel,f=a&&r&&!c;return(0,i.useEffect)((function(){n(!f)}),[n,f]),f?(0,C.jsx)(te,{initialValue:t,finishRenaming:l,cancel:s}):(0,C.jsx)(ee,{name:t,isSelected:r,startRenaming:u})}function ee(e){var t=e.name,r=e.isSelected,n=e.startRenaming,o=X((0,i.useState)(0),2),a=o[0],u=o[1];return(0,C.jsx)("button",{className:"item-name-button",onClick:function(){u(a+1),r||u(0)},onDoubleClick:function(){a<2||n()},children:(0,C.jsx)("span",{children:t})})}function te(e){var t=e.initialValue,r=e.finishRenaming,n=e.cancel,o=X((0,i.useState)(t),2),a=o[0],u=o[1],l=(0,J.Z)().autoFocusedRef;return(0,C.jsx)("span",{className:"rename-input",children:(0,C.jsx)("input",{type:"text",value:a,onKeyDown:function(e){"Enter"===e.key&&r(a),"Escape"===e.key&&n()},onChange:function(e){u(e.target.value)},onBlur:function(){r(a)},onFocus:function(e){var t=e.target.value.lastIndexOf(".");e.target.setSelectionRange(0,t)},ref:l})})}$.propTypes={name:u().string.isRequired,isSelected:u().bool.isRequired,setIsDraggable:u().func.isRequired},ee.propTypes={name:u().string.isRequired,startRenaming:u().func.isRequired,isSelected:u().bool.isRequired},te.propTypes={initialValue:u().string.isRequired,finishRenaming:u().func.isRequired,cancel:u().func.isRequired};var re=$,ne=r(10280);function oe(e){var t=e.id,r=(0,h.$G)().t,n=(0,f.e)(),o=n.contextMenuCoords,a=n.setContextMenuCoords,u=(0,i.useRef)();return(0,C.jsx)("div",{className:"menu-button btn-group",children:(0,C.jsx)("button",{className:"entity-menu-toggle btn btn-sm",id:"menu-button-".concat(t),onClick:function(e){if(e.stopPropagation(),o)a(null);else{var t=u.current.getBoundingClientRect();a({top:t.top+t.height/2,left:t.right})}},ref:u,children:(0,C.jsx)(ne.Z,{type:"ellipsis-v",accessibilityLabel:r("menu")})})})}oe.propTypes={id:u().string.isRequired};var ie=oe,ae=r(88321);function ue(e){var t,r=e.id,n=e.name,o=e.isSelected,a=e.icons,u=(0,E._i)(le).permissionsLevel,l=(0,f.e)().setContextMenuCoords,c=(0,d.Z)().isRenaming,s=(0,p.nF)().selectedEntityIds,h="readOnly"!==u&&o&&1===s.size,y=N(r),m=y.dragRef,v=y.setIsDraggable,A=(0,ae.N)().getMonitor().getItem(),g=(0,i.useRef)();return(0,i.useEffect)((function(){var e=g.current;o&&e&&setTimeout((function(){e&&(0,W.Z)(e,{scrollMode:"if-needed"})}),100)}),[o,g]),(0,C.jsx)("div",{className:H()("entity",{"file-tree-entity-dragging":null==A||null===(t=A.draggedEntityIds)||void 0===t?void 0:t.has(r)}),role:"presentation",ref:m,draggable:!c,onContextMenu:function(e){e.preventDefault(),l({top:e.pageY,left:e.pageX})},children:(0,C.jsxs)("div",{className:"entity-name entity-name-react",role:"presentation",ref:g,children:[a,(0,C.jsx)(re,{name:n,isSelected:o,setIsDraggable:v}),h?(0,C.jsx)(ie,{id:r}):null]})})}ue.propTypes={id:u().string.isRequired,name:u().string.isRequired,isSelected:u().bool.isRequired,icons:u().node};var le={permissionsLevel:u().oneOf(["readOnly","readAndWrite","owner"])},ce=ue,se=r(65487);function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){he(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function he(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===fe(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ye(e){var t=e.name,r=e.id,n=e.isFile,o=e.isLinkedFile,i=(0,p.mI)(r,n?"file":"doc"),a=i.isSelected,u=i.props;return(0,C.jsx)("li",pe(pe({role:"treeitem"},u),{},{"aria-label":t,tabIndex:"0",children:(0,C.jsx)(ce,{id:r,name:t,isSelected:a,icons:(0,C.jsx)(me,{isLinkedFile:o,name:t})})}))}ye.propTypes={name:u().string.isRequired,id:u().string.isRequired,isFile:u().bool,isLinkedFile:u().bool};var me=function(e){var t=e.isLinkedFile,r=e.name,n=(0,h.$G)().t,o=H()("spaced","file-tree-icon",{"linked-file-icon":t});return(0,C.jsxs)(C.Fragment,{children:[" ",(0,C.jsx)(ne.Z,{type:(0,se.Z)(r),fw:!0,className:o}),t&&(0,C.jsx)(ne.Z,{type:"external-link-square",modifier:"rotate-180",className:"linked-file-highlight",accessibilityLabel:n("linked_file")})]})};me.propTypes={name:u().string.isRequired,isLinkedFile:u().bool};var ve=ye,Ae=r(18977);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ge(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ee(e){var t=e.name,r=e.id,n=e.folders,o=e.docs,a=e.files,u=(0,h.$G)().t,l=(0,p.mI)(r,"folder"),c=l.isSelected,s=l.props,f=(0,p.nF)(r).selectedEntityParentIds,d=Se((0,Ae.Z)("folder.".concat(r,".expanded"),!1),2),y=d[0],m=d[1];(0,i.useEffect)((function(){f.has(r)&&m(!0)}),[r,f,m]);var v=Z(r),A=v.isOver,g=v.dropRef,b=Z(r),w=b.isOver,j=b.dropRef,S=(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("button",{onClick:function(){m(!y)},"aria-label":u(y?"collapse":"expand"),children:(0,C.jsx)(ne.Z,{type:y?"angle-down":"angle-right",fw:!0,className:"file-tree-expand-icon"})}),(0,C.jsx)(ne.Z,{type:y?"folder-open":"folder",fw:!0,className:"file-tree-folder-icon"})]});return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("li",we(we({role:"treeitem"},s),{},{"aria-expanded":y,"aria-label":t,tabIndex:"0",ref:g,className:H()(s.className,{"dnd-droppable-hover":A||w}),children:(0,C.jsx)(ce,{id:r,name:t,isSelected:c,icons:S})})),y?(0,C.jsx)(De,{folders:n,docs:o,files:a,dropRef:j}):null]})}Ee.propTypes={name:u().string.isRequired,id:u().string.isRequired,folders:u().array.isRequired,docs:u().array.isRequired,files:u().array.isRequired};var Ce=Ee,Oe=r(50325);function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Pe(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Te(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Le(e){var t=e.folders,r=e.docs,n=e.files,o=e.classes,i=void 0===o?{}:o,a=e.dropRef,u=void 0===a?null:a,l=e.children,c=e.dataTestId;n=n.map((function(e){return _e(_e({},e),{},{isFile:!0})}));var s=[].concat(Pe(r),Pe(n));return(0,C.jsxs)("ul",{className:H()("list-unstyled",i.root),role:"tree",ref:u,"dnd-container":"true","data-testid":c,children:[t.sort(Fe).map((function(e){return(0,C.jsx)(Ce,{name:e.name,id:e._id,folders:e.folders,docs:e.docs,files:e.fileRefs},e._id)})),s.sort(Fe).map((function(e){return(0,C.jsx)(ve,{name:e.name,id:e._id,isFile:e.isFile,isLinkedFile:e.linkedFileData&&!!e.linkedFileData.provider},e._id)})),l]})}function Fe(e,t){return Oe.W.compare(e.name,t.name)}Le.propTypes={folders:u().array.isRequired,docs:u().array.isRequired,files:u().array.isRequired,classes:u().exact({root:u().string}),dropRef:u().func,children:u().node,dataTestId:u().string};var De=Le,Be=r(96227),Ne=r(63584),Me=r(24958);var Ze={permissionsLevel:u().oneOf(["readOnly","readAndWrite","owner"])};function Qe(){var e=(0,h.$G)().t,t=(0,d.Z)(),r=t.canCreate,n=t.startCreatingFolder,o=t.startCreatingDocOrFile,i=t.startUploadingDocOrFile;return r?(0,C.jsxs)("div",{className:"toolbar-left",children:[(0,C.jsx)(Me.Z,{id:"new-file",description:e("new_file"),overlayProps:{placement:"bottom"},children:(0,C.jsx)(Ne.Z,{onClick:function(){Be.BZ("new-file-click",{location:"toolbar"}),o()},bsStyle:null,children:(0,C.jsx)(ne.Z,{type:"file",fw:!0,accessibilityLabel:e("new_file")})})}),(0,C.jsx)(Me.Z,{id:"new-folder",description:e("new_folder"),overlayProps:{placement:"bottom"},children:(0,C.jsx)(Ne.Z,{onClick:n,bsStyle:null,children:(0,C.jsx)(ne.Z,{type:"folder",fw:!0,accessibilityLabel:e("new_folder")})})}),(0,C.jsx)(Me.Z,{id:"upload",description:e("upload"),overlayProps:{placement:"bottom"},children:(0,C.jsx)(Ne.Z,{onClick:function(){Be.BZ("upload-click",{location:"toolbar"}),i()},children:(0,C.jsx)(ne.Z,{type:"upload",fw:!0,accessibilityLabel:e("upload")})})})]}):null}function qe(){var e=(0,h.$G)().t,t=(0,d.Z)(),r=t.canRename,n=t.canDelete,o=t.startRenaming,i=t.startDeleting;return r||n?(0,C.jsxs)("div",{className:"toolbar-right",children:[r?(0,C.jsx)(Me.Z,{id:"rename",description:e("rename"),overlayProps:{placement:"bottom"},children:(0,C.jsx)(Ne.Z,{onClick:o,children:(0,C.jsx)(ne.Z,{type:"pencil",fw:!0,accessibilityLabel:e("rename")})})}):null,n?(0,C.jsx)(Me.Z,{id:"delete",description:e("delete"),overlayProps:{placement:"bottom"},children:(0,C.jsx)(Ne.Z,{onClick:i,children:(0,C.jsx)(ne.Z,{type:"trash-o",fw:!0,accessibilityLabel:e("delete")})})}):null]}):null}var Ue=function(){return"readOnly"===(0,E._i)(Ze).permissionsLevel?null:(0,C.jsxs)("div",{className:"toolbar toolbar-filetree",children:[(0,C.jsx)(Qe,{}),(0,C.jsx)(qe,{})]})},He=r(17631),Ge=r(11685);var Ve=function(){var e=(0,h.$G)().t,t=(0,d.Z)(),r=t.isDeleting,n=t.inFlight,o=t.finishDeleting,i=t.actionedEntities,a=t.cancel,u=t.error;if(!r)return null;function l(){a()}return(0,C.jsxs)(Ge.Z,{show:!0,onHide:l,children:[(0,C.jsx)(He.Z.Header,{children:(0,C.jsx)(He.Z.Title,{children:e("delete")})}),(0,C.jsxs)(He.Z.Body,{children:[(0,C.jsx)("p",{children:e("sure_you_want_to_delete")}),(0,C.jsx)("ul",{children:i.map((function(e){return(0,C.jsx)("li",{children:e.name},e._id)}))}),u&&(0,C.jsx)("div",{className:"alert alert-danger file-tree-modal-alert",children:e("generic_something_went_wrong")})]}),(0,C.jsx)(He.Z.Footer,{children:n?(0,C.jsxs)(Ne.Z,{bsStyle:"danger",disabled:!0,children:[e("deleting"),"…"]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ne.Z,{bsStyle:null,className:"btn-secondary",onClick:l,children:e("cancel")}),(0,C.jsx)(Ne.Z,{bsStyle:"danger",onClick:function(){o()},children:e("delete")})]})})]})},Ke=(r(45794),r(17776)),ze=r(61416);function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xe(e){var t=e.name,r=e.setName,n=e.validName,o=e.setValidName,i=e.handleCreateFolder,a=(0,J.Z)().autoFocusedRef;return(0,C.jsx)("input",{ref:a,className:"form-control",type:"text",value:t,onKeyDown:function(e){"Enter"===e.key&&n&&i()},onChange:function(e){o((0,ze.AG)(e.target.value.trim())),r(e.target.value)},onFocus:function(e){e.target.setSelectionRange(0,-1)}})}Xe.propTypes={name:u().string.isRequired,setName:u().func.isRequired,validName:u().bool.isRequired,setValidName:u().func.isRequired,handleCreateFolder:u().func.isRequired};var Ye=function(){var e=(0,h.$G)().t,t=We((0,i.useState)(""),2),r=t[0],n=t[1],o=We((0,i.useState)(!0),2),a=o[0],u=o[1],l=(0,d.Z)(),c=l.isCreatingFolder,s=l.inFlight,f=l.finishCreatingFolder,p=l.cancel,y=l.error;if((0,i.useEffect)((function(){c||n("")}),[c]),!c)return null;function m(){p()}function v(){f(r)}function A(){return y.constructor===Ke.w4?e("file_already_exists"):e("generic_something_went_wrong")}return(0,C.jsxs)(Ge.Z,{show:!0,onHide:m,children:[(0,C.jsx)(He.Z.Header,{children:(0,C.jsx)(He.Z.Title,{children:e("new_folder")})}),(0,C.jsxs)(He.Z.Body,{children:[(0,C.jsx)(Xe,{name:r,setName:n,validName:a,setValidName:u,handleCreateFolder:v}),a?null:(0,C.jsx)("div",{role:"alert","aria-label":e("files_cannot_include_invalid_characters"),className:"alert alert-danger file-tree-modal-alert",children:e("files_cannot_include_invalid_characters")}),y?(0,C.jsx)("div",{role:"alert","aria-label":A(),className:"alert alert-danger file-tree-modal-alert",children:A()}):null]}),(0,C.jsx)(He.Z.Footer,{children:s?(0,C.jsxs)(Ne.Z,{bsStyle:"primary",disabled:!0,children:[e("creating"),"…"]}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ne.Z,{bsStyle:null,className:"btn-secondary",onClick:m,children:e("cancel")}),(0,C.jsx)(Ne.Z,{bsStyle:"primary",onClick:v,disabled:!a,children:e("create")})]})})]})};var $e=function FileTreeModalError(){var e=(0,h.$G)().t,t=(0,d.Z)(),r=t.isRenaming,n=t.isMoving,o=t.cancel,i=t.error;if(!i)return null;if(!r&&!n)return null;function a(){o()}function u(){switch(i.constructor){case Ke.w4:return e("file_already_exists");case Ke.d9:return(0,C.jsx)(h.cC,{i18nKey:"file_already_exists_in_this_location",components:[(0,C.jsx)("strong",{})],values:{fileName:i.entityName},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}});case Ke.I9:return e("files_cannot_include_invalid_characters");case Ke.Cr:return e("blocked_filename");default:return e("generic_something_went_wrong")}}return(0,C.jsxs)(He.Z,{show:!0,onHide:a,children:[(0,C.jsx)(He.Z.Header,{children:(0,C.jsx)(He.Z.Title,{children:function(){switch(i.constructor){case Ke.w4:case Ke.d9:return e("duplicate_file");case Ke.I9:case Ke.Cr:return e("invalid_file_name");default:return e("error")}}()})}),(0,C.jsx)(He.Z.Body,{children:(0,C.jsx)("div",{role:"alert","aria-label":u(),children:u()})}),(0,C.jsx)(He.Z.Footer,{children:(0,C.jsx)(Ne.Z,{onClick:a,bsStyle:"primary",children:e("ok")})})]})},et=r(28316),tt=r(82752),rt=r(13253);var nt=function(){var e=(0,h.$G)().t,t=(0,d.Z)(),r=t.canRename,n=t.canDelete,o=t.canCreate,i=t.startRenaming,a=t.startDeleting,u=t.startCreatingFolder,l=t.startCreatingDocOrFile,c=t.startUploadingDocOrFile,s=t.downloadPath;return(0,C.jsxs)(C.Fragment,{children:[r?(0,C.jsx)(rt.Z,{onClick:i,children:e("rename")}):null,s?(0,C.jsx)(rt.Z,{href:s,download:!0,children:e("download")}):null,n?(0,C.jsx)(rt.Z,{onClick:a,children:e("delete")}):null,o?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(rt.Z,{divider:!0}),(0,C.jsx)(rt.Z,{onClick:function(){Be.BZ("new-file-click",{location:"file-menu"}),l()},children:e("new_file")}),(0,C.jsx)(rt.Z,{onClick:u,children:e("new_folder")}),(0,C.jsx)(rt.Z,{onClick:function(){Be.BZ("upload-click",{location:"file-menu"}),c()},children:e("upload")})]}):null]})};var ot={permissionsLevel:u().oneOf(["readOnly","readAndWrite","owner"])},it=i.forwardRef((function(e,t){return null}));it.displayName="FakeDropDownToggle";var at=function(){var e=(0,E._i)(ot).permissionsLevel,t=(0,f.e)(),r=t.contextMenuCoords,n=t.setContextMenuCoords;if("readOnly"===e||!r)return null;function o(e){e||n(null)}return et.createPortal((0,C.jsxs)(tt.Z,{onClick:function(){o(!1)},open:!0,id:"dropdown-file-tree-context-menu",onToggle:o,children:[(0,C.jsx)(it,{bsRole:"toggle"}),(0,C.jsx)(tt.Z.Menu,{className:"context-menu",style:r,children:(0,C.jsx)(nt,{})})]}),document.querySelector("body"))},ut=r(46267);var lt=function FileTreeError(){var e=(0,h.$G)().t,t=(0,ut.T)().reload;return(0,C.jsxs)("div",{className:"file-tree-error",children:[(0,C.jsx)("p",{children:e("generic_something_went_wrong")}),(0,C.jsx)("p",{children:e("please_refresh")}),(0,C.jsx)(Ne.Z,{bsStyle:"primary",onClick:t,children:e("refresh")})]})},ct=(r(39529),r(31235),r(80564)),st=r(96931);function ft(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ht(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ht(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yt=(0,i.createContext)(),mt=function(){var e=(0,i.useContext)(yt);if(!e)throw new Error("useFileTreeCreateForm is only available inside FileTreeCreateFormProvider");return e};function vt(e){var t=e.children,r=pt((0,i.useState)(!1),2),n=r[0],o=r[1];return(0,C.jsx)(yt.Provider,{value:{valid:n,setValid:o},children:t})}vt.propTypes={children:u().oneOfType([u().arrayOf(u().node),u().node]).isRequired};r(73439);function At(e){var t=e.mode,r=e.icon,n=e.label,o=(0,d.Z)(),i=o.newFileCreateMode,a=o.startCreatingFile;return(0,C.jsx)("li",{className:H()({active:i===t}),children:(0,C.jsxs)(Ne.Z,{bsStyle:"link",block:!0,onClick:function(){a(t),Be.BZ("file-modal-click",{method:t})},className:"modal-new-file-mode",children:[(0,C.jsx)(ne.Z,{type:r,fw:!0})," ",n]})})}function gt(e){return gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gt(e)}function bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==gt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==gt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===gt(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}At.propTypes={mode:u().string.isRequired,icon:u().string.isRequired,label:u().string.isRequired};var Et=(0,i.createContext)(),Ct=function(){var e=(0,i.useContext)(Et);if(!e)throw new Error("useFileTreeCreateName is only available inside FileTreeCreateNameProvider");return e};function Ot(e){var t=e.children,r=e.initialName,n=void 0===r?"":r,o=St((0,i.useReducer)((function(e,t){return{name:t,touchedName:!0}}),{name:n,touchedName:!1}),2),a=o[0],u=o[1],l=(0,i.useMemo)((function(){return(0,ze.AG)(a.name.trim())}),[a]);return(0,C.jsx)(Et.Provider,{value:wt(wt({},a),{},{setName:u,validName:l}),children:t})}Ot.propTypes={children:u().oneOfType([u().arrayOf(u().node),u().node]).isRequired,initialName:u().string};var It=r(86186),Pt=r(99262),kt=r(72300),Rt=r(87731),_t=(r(21515),r(28684)),Tt=r(30286);function Lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Dt=r(10726),Bt=r.n(Dt),Nt=r(88664),Mt=r.n(Nt);function Zt(e){var t=e.label,r=e.focusName,n=void 0!==r&&r,o=e.classes,a=void 0===o?{}:o,u=e.placeholder,l=e.error,c=(0,h.$G)().t,s=Ct(),f=s.name,d=s.setName,p=s.touchedName,y=s.validName,m=(0,i.useCallback)((function(e){e&&n&&window.requestAnimationFrame((function(){e.focus(),e.setSelectionRange(0,e.value.lastIndexOf("."))}))}),[n]);return(0,C.jsxs)(Mt(),{controlId:"new-doc-name",className:a.formGroup,children:[(0,C.jsx)(Bt(),{children:t||c("file_name")}),(0,C.jsx)(Rt.Z,{type:"text",placeholder:u||c("file_name"),required:!0,value:f,onChange:function(e){return d(e.target.value)},inputRef:m}),(0,C.jsx)(Rt.Z.Feedback,{}),p&&!y&&(0,C.jsx)(It.Z,{bsStyle:"danger",className:"row-spaced-small",children:c("files_cannot_include_invalid_characters")}),l&&(0,C.jsx)(Qt,{error:l})]})}function Qt(e){var t=e.error,r=(0,h.$G)().t;switch(t.constructor){case Ke.w4:return(0,C.jsx)(It.Z,{bsStyle:"danger",className:"row-spaced-small",children:r("file_already_exists")});case Ke.I9:return(0,C.jsx)(It.Z,{bsStyle:"danger",className:"row-spaced-small",children:r("files_cannot_include_invalid_characters")});case Ke.Cr:return(0,C.jsx)(It.Z,{bsStyle:"danger",className:"row-spaced-small",children:r("blocked_filename")});default:return null}}Zt.propTypes={focusName:u().bool,label:u().string,classes:u().shape({formGroup:u().string}),placeholder:u().string,error:u().oneOfType([u().object,u().string])},Qt.propTypes={error:u().oneOfType([u().object,u().string]).isRequired};var qt=r(13516),Ut=r(36190),Ht=r(92910);function Gt(e){var t=e.provider,r=e.data,n=e.selectedGroupId,o=e.setSelectedGroupId,i=(0,h.$G)().t;switch(t){case"mendeley":return(0,C.jsxs)(Pt.Z,{controlId:"group-select",children:[(0,C.jsx)(kt.Z,{children:i("select_a_group_optional")}),(0,C.jsxs)(Rt.Z,{className:"form-control",componentClass:"select",placeholder:i("select_a_group_optional"),value:n||"",onChange:function(e){return o(e.target.value)},children:[(0,C.jsxs)("option",{disabled:!0,value:"",children:["- ",i("select_a_group_optional")]}),r.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});case"zotero":return(0,C.jsxs)(Pt.Z,{controlId:"group-select",children:[(0,C.jsx)(kt.Z,{children:i("library")}),(0,C.jsxs)(Rt.Z,{className:"form-control",componentClass:"select",value:n||"",onChange:function(e){return o(e.target.value)},children:[(0,C.jsx)("option",{value:"",children:i("my_library")}),(0,C.jsx)("option",{disabled:!0,value:"_",children:i("group_libraries")}),r.map((function(e){return(0,C.jsx)("option",{value:e.id,children:e.name},e.id)}))]})]});default:throw new Error('Unknown reference provider "'.concat(t,'"'))}}Gt.propTypes={provider:u().string.isRequired,data:u().arrayOf(u().object).isRequired,selectedGroupId:u().string,setSelectedGroupId:u().func.isRequired};var Vt=r(70887);function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Wt(e){var t,r=e.provider,n=e.providerName,o=e.supportsGroups,a=void 0!==o&&o,u=e.supportsFormat,l=void 0!==u&&u,c=(0,h.$G)().t,s=Ct(),p=s.name,y=s.validName,m=mt().setValid,v=(0,ct.SE)(Jt).features,A=(0,f.e)(),g=A.refProviders,b=A.setStartedFreeTrial,w=A.setRefProviderEnabled,j=(0,d.Z)(),S=j.error,x=j.finishCreatingLinkedFile,E=j.inFlight,O=(0,f.e)().reindexReferences,I=Kt((0,i.useState)(""),2),P=I[0],k=I[1],R=Kt((0,i.useState)("bibtex"),2),_=R[0],T=R[1];(0,Vt.K)((0,i.useCallback)((function(e){e.refProviders&&r in e.refProviders&&(w(r,!1),window.setTimeout((function(){w(r,e.refProviders[r])})))}),[r,w]));var L=v.references||v[r],F=L&&g[r],D=(0,i.useCallback)((function(){window.open("/".concat(r,"/oauth"),"reference-auth","width=700,height=500")}),[r]),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Lt((0,i.useState)(!1),2),n=r[0],o=r[1],a=Lt((0,i.useState)(null),2),u=a[0],l=a[1],c=Lt((0,i.useState)(null),2),s=c[0],f=c[1],d=(0,Tt.Z)().signal;return(0,i.useEffect)((function(){t&&(o(!0),f(null),l(null),(0,_t.xA)("/".concat(e,"/groups"),{signal:d}).then((function(e){l(e.groups)})).catch((function(e){400===e.response.status?e.data.relink&&f("relink"):f("loading_groups")})).finally((function(){o(!1)})))}),[t,e,d]),{loading:n,data:u,error:s}}(r,a&&F);(0,i.useEffect)((function(){m(y&&F&&!B.error)}),[m,y,F,B.error]);var N=(0,i.useCallback)((function(e){e.preventDefault();var t={};P&&(t.group_id=P),l&&(t.format=_),x({name:p,provider:r,data:t}).then(O),Be.BZ("new-file-created",{method:r})}),[p,P,r,x,_,O,l]);return L?(0,C.jsxs)("div",{className:"referencesImportModal",children:[F?(0,C.jsxs)("div",{children:[B.loading?(0,C.jsx)("div",{children:(0,C.jsx)("h2",{className:"text-center",children:(0,C.jsxs)("small",{children:[(0,C.jsx)(ne.Z,{type:"refresh",spin:!0,fw:!0})," ",c("loading"),"…"]})})}):(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{children:c("import_a_bibtex_file_from_your_provider_account",{provider:n})}),(0,C.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:N,children:[B.error&&(0,C.jsx)(Yt,{provider:r,error:B.error,linkAccount:D}),B.data&&B.data.length>0&&(0,C.jsx)("div",{className:"row-spaced-small",children:(0,C.jsx)(Gt,{provider:r,data:B.data,selectedGroupId:P,setSelectedGroupId:k})}),(0,C.jsx)("div",{className:"row-spaced-small",children:(0,C.jsx)(Zt,{label:c("file_name_in_this_project"),focusName:!0,error:S})}),l&&(0,C.jsx)("div",{className:"row-spaced-small",children:(0,C.jsxs)(Pt.Z,{controlId:"format",children:[(0,C.jsx)(kt.Z,{children:c("format")}),(0,C.jsxs)(Rt.Z,{className:"form-control",componentClass:"select",value:_,onChange:function(e){return T(e.target.value)},children:[(0,C.jsx)("option",{value:"bibtex",children:"BibTeX"}),(0,C.jsx)("option",{value:"biblatex",children:"BibLaTeX"})]})]})})]})]}),E&&(0,C.jsx)("h3",{className:"text-center",children:(0,C.jsxs)("small",{children:[(0,C.jsx)(ne.Z,{type:"refresh",spin:!0,fw:!0})," ",c("importing"),"…"]})})]}):(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{children:Xt[r].sync_description(c)}),(0,C.jsx)("p",{children:(0,C.jsx)(Ne.Z,{bsStyle:"info",type:"button",onClick:D,children:Xt[r].link_to(c)})})]}),S&&(0,C.jsx)(C.Fragment,{children:"string"==typeof S?(0,C.jsxs)(C.Fragment,{children:[(0,C.jsxs)("div",{className:"text-center",children:[(0,C.jsx)("hr",{}),(0,C.jsx)(Yt,{error:S,provider:r,linkAccount:D})]}),(0,C.jsx)(er,{error:S,provider:r,linkAccount:D})]}):null!==(t=S.data)&&void 0!==t&&t.relink?(0,C.jsx)($t,{provider:r,linkAccount:D}):(0,C.jsx)(qt.Z,{error:S})})]}):(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{className:"small",children:Xt[r].sync_description(c)}),(0,C.jsxs)(It.Z,{bsStyle:"info",children:[(0,C.jsx)("p",{children:Xt[r].is_premium(c)}),(0,C.jsx)("p",{children:(0,C.jsx)(Ht.Z,{source:r,buttonProps:{bsStyle:"info"},handleClick:function(){return b(!0)}})})]})]})}Wt.propTypes={provider:u().string.isRequired,providerName:u().string.isRequired,supportsGroups:u().bool,supportsFormat:u().bool};var Jt={features:u().shape({references:u().bool,mendeley:u().bool,zotero:u().bool})},Xt={mendeley:{default:function(e){return e("mendeley_reference_loading_error")},expired:function(e){return e("mendeley_reference_loading_error_expired")},forbidden:function(e){return e("mendeley_reference_loading_error_forbidden")},"refresh-failed":function(e){return e("mendeley_reference_loading_error_expired")},sync_description:function(e){return e("mendeley_sync_description")},link_to:function(e){return e("link_to_mendeley")},is_premium:function(e){return e("mendeley_is_premium")},loading_groups:function(e){return e("mendeley_groups_loading_error")},relink:function(e){return e("mendeley_groups_relink")}},zotero:{default:function(e){return e("zotero_reference_loading_error")},expired:function(e){return e("zotero_reference_loading_error_expired")},forbidden:function(e){return e("zotero_reference_loading_error_forbidden")},"refresh-failed":function(e){return e("zotero_reference_loading_error_expired")},sync_description:function(e){return e("zotero_sync_description")},link_to:function(e){return e("link_to_zotero")},is_premium:function(e){return e("zotero_is_premium")},loading_groups:function(e){return e("zotero_groups_loading_error")},relink:function(e){return e("zotero_groups_relink")}}};function Yt(e){var t=e.provider,r=e.error,n=e.linkAccount,o=(0,h.$G)().t;return"relink"===r?(0,C.jsx)($t,{provider:t,linkAccount:n}):r in Xt[t]?(0,C.jsx)(Ut.Z,{children:Xt[t][r](o)}):(0,C.jsx)(qt.Z,{error:r})}function $t(e){var t=e.provider,r=e.linkAccount,n=(0,h.$G)().t;return(0,C.jsxs)(Ut.Z,{children:[(0,C.jsx)("div",{children:Xt[t].relink(n)}),(0,C.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:10},children:(0,C.jsx)(Ne.Z,{bsStyle:"danger",type:"button",onClick:r,children:n("relink_your_account")})})]})}function er(e){var t=e.error,r=e.provider,n=e.linkAccount,o=(0,h.$G)().t;switch(t){case"refresh-failed":return(0,C.jsxs)("div",{children:[(0,C.jsx)("p",{children:Xt[r].sync_description(o)}),(0,C.jsx)("p",{children:(0,C.jsx)(Ne.Z,{bsStyle:"info",type:"button",onClick:n,children:Xt[r].link_to(o)})})]});case"default":case"expired":case"forbidden":return(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{children:[o("reference_error_relink_hint"),"  "]}),(0,C.jsx)("div",{children:(0,C.jsx)("a",{href:"/user/settings",target:"_blank",rel:"noopener",style:{fontWeight:"bold"},children:o("account_settings")})})]})}}function tr(){var e=(0,h.$G)().t;return(0,C.jsx)(At,{mode:"mendeley",icon:"book",label:e("from_provider",{provider:"Mendeley"})})}function rr(){return"mendeley"!==(0,d.Z)().newFileCreateMode?null:(0,C.jsx)(Ot,{initialName:"references.bib",children:(0,C.jsx)(Wt,{provider:"mendeley",providerName:"Mendeley",supportsGroups:!0})})}function nr(){var e=(0,h.$G)().t;return(0,C.jsx)(At,{mode:"zotero",icon:"book",label:e("from_provider",{provider:"Zotero"})})}function or(){return"zotero"!==(0,d.Z)().newFileCreateMode?null:(0,C.jsx)(Ot,{initialName:"references.bib",children:(0,C.jsx)(Wt,{provider:"zotero",providerName:"Zotero",supportsGroups:!0,supportsFormat:!0})})}function ir(){var e=Ct(),t=e.name,r=e.validName,n=mt().setValid,o=(0,d.Z)(),a=o.error,u=o.finishCreatingDoc;(0,i.useEffect)((function(){n(r)}),[n,r]);var l=(0,i.useCallback)((function(e){e.preventDefault(),u({name:t}),Be.BZ("new-file-created",{method:"doc"})}),[u,t]);return(0,C.jsxs)("form",{noValidate:!0,id:"create-file",onSubmit:l,children:[(0,C.jsx)(Zt,{focusName:!0,error:a}),a&&(0,C.jsx)(qt.Z,{error:a})]})}Yt.propTypes={error:u().string.isRequired,provider:u().string.isRequired,linkAccount:u().func.isRequired},$t.propTypes={provider:u().string.isRequired,linkAccount:u().func.isRequired},er.propTypes={error:u().string.isRequired,provider:u().string.isRequired,linkAccount:u().func.isRequired};r(74069);function ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ur(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ur(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ur(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lr(){var e=(0,h.$G)().t,t=Ct(),r=t.name,n=t.setName,o=t.validName,a=mt().setValid,u=(0,d.Z)(),l=u.finishCreatingLinkedFile,c=u.error,s=ar((0,i.useState)(""),2),f=s[0],p=s[1],y=(0,i.useCallback)((function(e){p(e.target.value)}),[]);(0,i.useEffect)((function(){if(f){var e=f.match(/^\s*https?:\/\/.+\/([^/]+\.(\w+))\s*$/);n(e?e[1]:"")}}),[n,f]),(0,i.useEffect)((function(){a(o&&!!f)}),[a,o,f]);return(0,C.jsxs)("form",{className:"form-controls",id:"create-file",noValidate:!0,onSubmit:function(e){e.preventDefault(),Be.BZ("new-file-created",{method:"url"}),l({name:r,provider:"url",data:{url:f.trim()}})},children:[(0,C.jsxs)(Pt.Z,{controlId:"import-from-url",children:[(0,C.jsx)(kt.Z,{children:e("url_to_fetch_the_file_from")}),(0,C.jsx)(Rt.Z,{type:"url",placeholder:"https://example.com/my-file.png",required:!0,value:f,onChange:y})]}),(0,C.jsx)(Zt,{label:e("file_name_in_this_project"),placeholder:"my_file",error:c}),c&&(0,C.jsx)(qt.Z,{error:c})]})}r(49228);var cr=r(87983),sr=r(15270),fr=r(25137);function dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hr(){var e=(0,h.$G)().t,t=window.ExposedSettings,r=t.hasLinkedProjectFileFeature,n=t.hasLinkedProjectOutputFileFeature,o=r&&n,a=Ct(),u=a.name,l=a.setName,c=a.validName,s=mt().setValid,f=(0,d.Z)(),p=f.error,y=f.finishCreatingLinkedFile,m=dr((0,i.useState)(),2),v=m[0],A=m[1],g=dr((0,i.useState)(),2),b=g[0],w=g[1],j=dr((0,i.useState)(),2),S=j[0],x=j[1],E=dr((0,i.useState)(!r),2),O=E[0],I=E[1],P=(0,i.useCallback)((function(e){var t=e.split("/").pop();t&&l(t)}),[l]);(0,i.useEffect)((function(){S&&("output.pdf"===S.path&&v.name?l("".concat(v.name,".pdf")):P(S.path))}),[v,S,l,P]),(0,i.useEffect)((function(){b&&P(b.path)}),[b,P]),(0,i.useEffect)((function(){var e=Boolean(O?S:b);s(c&&e)}),[s,c,O,b,S]);return(0,C.jsxs)("form",{className:"form-controls",id:"create-file",onSubmit:function(e){e.preventDefault(),Be.BZ("new-file-created",{method:"project"}),y(O?{name:u,provider:"project_output_file",data:{source_project_id:v._id,source_output_file_path:S.path,build_id:S.build,clsiServerId:S.clsiServerId}}:{name:u,provider:"project_file",data:{source_project_id:v._id,source_entity_path:b.path}})},children:[(0,C.jsx)(yr,{selectedProject:v,setSelectedProject:A}),O?(0,C.jsx)(vr,{selectedProjectId:null==v?void 0:v._id,selectedProjectOutputFile:S,setSelectedProjectOutputFile:x}):(0,C.jsx)(Ar,{selectedProjectId:null==v?void 0:v._id,selectedProjectEntity:b,setSelectedProjectEntity:w}),o&&(0,C.jsxs)("div",{className:"toggle-file-type-button",children:["or ",(0,C.jsx)(Ne.Z,{bsStyle:"link",type:"button",onClick:function(){return I((function(e){return!e}))},children:(0,C.jsx)("span",{children:e(O?"select_from_source_files":"select_from_output_files")})})]}),(0,C.jsx)(Zt,{label:e("file_name_in_this_project"),classes:{formGroup:"form-controls row-spaced-small"},placeholder:"example.tex",error:p}),p&&(0,C.jsx)(qt.Z,{error:p})]})}function yr(e){var t=e.selectedProject,r=e.setSelectedProject,n=(0,h.$G)().t,o=(0,c.d2)(mr)._id,a=(0,cr.Z)(),u=a.data,l=a.error,s=a.loading,f=(0,i.useMemo)((function(){return u?u.filter((function(e){return e._id!==o})):null}),[u,o]);return l?(0,C.jsx)(qt.Z,{error:l}):(0,C.jsxs)(Pt.Z,{className:"form-controls",controlId:"project-select",children:[(0,C.jsx)(kt.Z,{children:n("select_a_project")}),s&&(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(ne.Z,{type:"spinner",spin:!0})]}),(0,C.jsxs)(Rt.Z,{componentClass:"select",disabled:!u,value:t?t._id:"",onChange:function(e){var t=e.target.value,n=u.find((function(e){return e._id===t}));r(n)},children:[(0,C.jsxs)("option",{disabled:!0,value:"",children:["- ",n("please_select_a_project")]}),f&&f.map((function(e){return(0,C.jsx)("option",{value:e._id,children:e.name},e._id)}))]}),f&&!f.length&&(0,C.jsx)("small",{children:n("no_other_projects_found")})]})}yr.propTypes={selectedProject:u().object,setSelectedProject:u().func.isRequired};var mr={_id:u().string.isRequired};function vr(e){var t=e.selectedProjectId,r=e.selectedProjectOutputFile,n=e.setSelectedProjectOutputFile,o=(0,h.$G)().t,i=(0,fr.h)(t),a=i.data,u=i.error,l=i.loading;return u?(0,C.jsx)(qt.Z,{error:u}):(0,C.jsxs)(Pt.Z,{className:"form-controls row-spaced-small",controlId:"project-output-file-select",children:[(0,C.jsx)(kt.Z,{children:o("select_an_output_file")}),l&&(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(ne.Z,{type:"spinner",spin:!0})]}),(0,C.jsxs)(Rt.Z,{componentClass:"select",disabled:!a,value:(null==r?void 0:r.path)||"",onChange:function(e){var t=e.target.value,r=a.find((function(e){return e.path===t}));n(r)},children:[(0,C.jsxs)("option",{disabled:!0,value:"",children:["- ",o("please_select_an_output_file")]}),a&&a.map((function(e){return(0,C.jsx)("option",{value:e.path,children:e.path},e.path)}))]})]})}function Ar(e){var t=e.selectedProjectId,r=e.selectedProjectEntity,n=e.setSelectedProjectEntity,o=(0,h.$G)().t,i=(0,sr.t)(t),a=i.data,u=i.error,l=i.loading;return u?(0,C.jsx)(qt.Z,{error:u}):(0,C.jsxs)(Pt.Z,{className:"form-controls row-spaced-small",controlId:"project-entity-select",children:[(0,C.jsx)(kt.Z,{children:o("select_a_file")}),l&&(0,C.jsxs)("span",{children:[" ",(0,C.jsx)(ne.Z,{type:"spinner",spin:!0})]}),(0,C.jsxs)(Rt.Z,{componentClass:"select",disabled:!a,value:(null==r?void 0:r.path)||"",onChange:function(e){var t=e.target.value,r=a.find((function(e){return e.path===t}));n(r)},children:[(0,C.jsxs)("option",{disabled:!0,value:"",children:["- ",o("please_select_a_file")]}),a&&a.map((function(e){return(0,C.jsx)("option",{value:e.path,children:e.path.slice(1)},e.path)}))]})]})}vr.propTypes={selectedProjectId:u().string,selectedProjectOutputFile:u().object,setSelectedProjectOutputFile:u().func.isRequired},Ar.propTypes={selectedProjectId:u().string,selectedProjectEntity:u().object,setSelectedProjectEntity:u().func.isRequired};var gr=r(28500),br=[{import:n,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-mendeley"},{import:o,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/create-file-mode-zotero"}],wr=(0,i.lazy)((function(){return Promise.all([r.e(4900),r.e(8931)]).then(r.bind(r,58931))}));function jr(){var e=(0,h.$G)().t,t=(0,d.Z)().newFileCreateMode,r=(0,s.O)().fileCount;return r&&"error"!==r.status?(0,C.jsx)("table",{children:(0,C.jsx)("tbody",{children:(0,C.jsxs)("tr",{children:[(0,C.jsx)("td",{className:"modal-new-file--list",children:(0,C.jsxs)("ul",{className:"list-unstyled",children:[(0,C.jsx)(At,{mode:"doc",icon:"file",label:e("new_file")}),(0,C.jsx)(At,{mode:"upload",icon:"upload",label:e("upload")}),(window.ExposedSettings.hasLinkedProjectFileFeature||window.ExposedSettings.hasLinkedProjectOutputFileFeature)&&(0,C.jsx)(At,{mode:"project",icon:"folder-open",label:e("from_another_project")}),window.ExposedSettings.hasLinkUrlFeature&&(0,C.jsx)(At,{mode:"url",icon:"globe",label:e("from_external_url")}),br.map((function(e){var t=e.import.CreateFileMode,r=e.path;return(0,C.jsx)(t,{},r)}))]})}),(0,C.jsxs)("td",{className:"modal-new-file--body modal-new-file--body-".concat(t),children:["doc"===t&&(0,C.jsx)(Ot,{initialName:"name.tex",children:(0,C.jsx)(ir,{})}),"url"===t&&(0,C.jsx)(Ot,{children:(0,C.jsx)(lr,{})}),"project"===t&&(0,C.jsx)(Ot,{children:(0,C.jsx)(hr,{})}),"upload"===t&&(0,C.jsx)(i.Suspense,{fallback:(0,C.jsx)(gr.w,{delay:500}),children:(0,C.jsx)(wr,{})}),br.map((function(e){var t=e.import.CreateFilePane,r=e.path;return(0,C.jsx)(t,{},r)}))]})]})})}):null}function Sr(){var e=mt().valid,t=(0,d.Z)(),r=t.newFileCreateMode,n=t.inFlight,o=t.cancel,i=(0,s.O)().fileCount;return(0,C.jsx)(xr,{valid:e,cancel:o,newFileCreateMode:r,inFlight:n,fileCount:i})}function xr(e){var t=e.valid,r=e.fileCount,n=e.inFlight,o=e.newFileCreateMode,i=e.cancel,a=(0,h.$G)().t;return(0,C.jsxs)(C.Fragment,{children:["warning"===r.status&&(0,C.jsxs)("div",{className:"modal-footer-left approaching-file-limit",children:[a("project_approaching_file_limit")," (",r.value,"/",r.limit,")"]}),"error"===r.status&&(0,C.jsx)(It.Z,{bsStyle:"warning",className:"at-file-limit",children:a("project_has_too_many_files")}),(0,C.jsx)(Ne.Z,{bsStyle:null,className:"btn-secondary",type:"button",disabled:n,onClick:i,children:a("cancel")}),"upload"!==o&&(0,C.jsx)(Ne.Z,{bsStyle:"primary",type:"submit",form:"create-file",disabled:n||!t,children:(0,C.jsx)("span",{children:n?"".concat(a("creating"),"…"):a("create")})})]})}function Er(){var e=(0,h.$G)().t,t=(0,d.Z)(),r=t.isCreatingFile,n=t.cancel;return r?(0,C.jsx)(vt,{children:(0,C.jsxs)(Ge.Z,{bsSize:"large",onHide:n,show:!0,children:[(0,C.jsx)(He.Z.Header,{closeButton:!0,children:(0,C.jsx)(He.Z.Title,{children:e("add_files")})}),(0,C.jsx)(He.Z.Body,{className:"modal-new-file",children:(0,C.jsx)(jr,{})}),(0,C.jsx)(He.Z.Footer,{children:(0,C.jsx)(Sr,{})})]})}):null}xr.propTypes={cancel:u().func.isRequired,fileCount:u().shape({limit:u().number.isRequired,status:u().string.isRequired,value:u().number.isRequired}).isRequired,inFlight:u().bool.isRequired,newFileCreateMode:u().string,valid:u().bool.isRequired};var Cr=function(e){var t=e.children,r=(0,p.nF)(),n=r.setIsRootFolderSelected,o=r.selectedEntityIds,a=r.select,u=(0,i.useCallback)((function(){n(!0),o.size>1&&a([])}),[a,o.size,n]);return(0,C.jsx)("div",{className:"file-tree-inner",onClick:u,"data-testid":"file-tree-inner",children:t})},Or=r(55758);function Ir(e){return Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ir(e)}function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Rr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Rr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==Ir(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==Ir(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Ir(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _r=i.memo((function(e){var t=e.refProviders,r=e.reindexReferences,n=e.setRefProviderEnabled,o=e.setStartedFreeTrial,a=e.onSelect,u=e.onInit,l=e.onDelete,f=e.isConnected,d=(0,c.d2)(Lr)._id,p=(0,s.O)().fileTreeData,h=Boolean(d&&p);return(0,i.useEffect)((function(){h&&u()}),[h,u]),h?(0,C.jsxs)(q,{refProviders:t,setRefProviderEnabled:n,setStartedFreeTrial:o,reindexReferences:r,onSelect:a,children:[f?null:(0,C.jsx)("div",{className:"disconnected-overlay"}),(0,C.jsx)(Ue,{}),(0,C.jsx)(at,{}),(0,C.jsx)(Cr,{children:(0,C.jsx)(Tr,{onDelete:l})}),(0,C.jsx)(Ve,{}),(0,C.jsx)(Er,{}),(0,C.jsx)(Ye,{}),(0,C.jsx)($e,{})]}):null}));function Tr(e){!function(e){var t=(0,ct.SE)({id:u().string.isRequired}),r=(0,s.O)(),n=r.dispatchRename,o=r.dispatchDelete,a=r.dispatchMove,l=r.dispatchCreateFolder,c=r.dispatchCreateDoc,f=r.dispatchCreateFile,d=r.fileTreeData,h=(0,p.nF)(),y=h.selectedEntityIds,m=h.selectedEntityParentIds,v=h.select,A=h.unselect,g=(0,st.I)().socket,b=(0,i.useCallback)((function(e,r,n){n&&(null==t?void 0:t.id)===n&&window.expectingLinkedFileRefreshedSocketFor===r&&(v(e),window.expectingLinkedFileRefreshedSocketFor=null)}),[t,v]);(0,i.useEffect)((function(){function e(e,t){n(e,t)}return g&&g.on("reciveEntityRename",e),function(){g&&g.removeListener("reciveEntityRename",e)}}),[g,n]),(0,i.useEffect)((function(){function t(t){var r=(0,x.Z7)(d,t);if(A(t),m.has(t)){var n,i=ft(y);try{for(i.s();!(n=i.n()).done;){var a=n.value;(0,x.we)(d,a).path.includes(t)&&A(a)}}catch(e){i.e(e)}finally{i.f()}}o(t),e&&e(r)}return g&&g.on("removeEntity",t),function(){g&&g.removeListener("removeEntity",t)}}),[g,A,o,d,y,m,e]),(0,i.useEffect)((function(){function e(e,t){a(e,t)}return g&&g.on("reciveEntityMove",e),function(){g&&g.removeListener("reciveEntityMove",e)}}),[g,a]),(0,i.useEffect)((function(){function e(e,t,r){l(e,t)}return g&&g.on("reciveNewFolder",e),function(){g&&g.removeListener("reciveNewFolder",e)}}),[g,l]),(0,i.useEffect)((function(){function e(e,t,r,n){c(e,t)}return g&&g.on("reciveNewDoc",e),function(){g&&g.removeListener("reciveNewDoc",e)}}),[g,c]),(0,i.useEffect)((function(){function e(e,t,r,n,o){f(e,t),n&&b(t._id,t.name,o)}return g&&g.on("reciveNewFile",e),function(){g&&g.removeListener("reciveNewFile",e)}}),[g,f,b])}(e.onDelete);var t=(0,s.O)().fileTreeData,r=Z(t._id),n=r.isOver,o=r.dropRef,a=(0,Or.f)((function(e){return{isDragging:e.isDragging(),item:e.getItem(),clientOffset:e.getClientOffset()}}));return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(z,kr({isOver:n},a)),(0,C.jsx)(De,{folders:t.folders,docs:t.docs,files:t.fileRefs,classes:{root:H()("file-tree-list",{"file-tree-dragging":a.isDragging})},dropRef:o,dataTestId:"file-tree-list-root"})]})}Tr.propTypes={onDelete:u().func},_r.propTypes={onSelect:u().func.isRequired,onInit:u().func.isRequired,onDelete:u().func,isConnected:u().bool.isRequired,setRefProviderEnabled:u().func.isRequired,setStartedFreeTrial:u().func.isRequired,reindexReferences:u().func.isRequired,refProviders:u().object.isRequired};var Lr={_id:u().string.isRequired},Fr=(0,l.Z)(_r,lt)},4134:function(e,t,r){"use strict";r.d(t,{P:function(){return U},Z:function(){return V}});r(71372),r(27233),r(28673),r(26936),r(43450),r(77950),r(21850),r(95342),r(58188),r(49228),r(1939),r(73439),r(18178),r(9575),r(96264),r(34115),r(634),r(71245),r(34769),r(68625),r(62775),r(20796),r(15735),r(6886),r(32501),r(88233),r(96882),r(38859),r(17525),r(18275),r(96928);var n=r(2784),o=r(13980),i=r.n(o);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(){u=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},l=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),u=new _(n||[]);return o(a,"_invoke",{value:I(e,r,u)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",m="executing",v="completed",A={};function g(){}function b(){}function w(){}var j={};f(j,l,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(T([])));x&&x!==r&&n.call(x,l)&&(j=x);var E=w.prototype=g.prototype=Object.create(j);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,u,l){var c=p(e[o],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=h;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=P(u,n);if(l){if(l===A)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?v:y,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),A;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,A;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,A):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,A)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(O.prototype),f(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(d(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),f(E,s,"Generator"),f(E,l,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),A}},t}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function f(e,t){return e.reduce(function(){var e=function(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){s(i,n,o,a,u,"next",e)}function u(e){s(i,n,o,a,u,"throw",e)}a(void 0)}))}}(u().mark((function e(r,n){var o,i;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return o=e.sent,e.next=5,t(n);case 5:return i=e.sent,e.abrupt("return",[].concat(l(o),[i]));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Promise.resolve([]))}var d=r(28684);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}var h=["endpoint"];function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function v(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function g(e,t,r,n){return(0,d.ty)("/project/".concat(e,"/").concat(b(t),"/").concat(r,"/move"),{body:{folder_id:n}})}function b(e){return"fileRef"===e?"file":e}var w=r(38113);function j(e,t,r){return e._id!==t&&(e=(0,w.Z7)(e,t).entity),!e.docs.some((function(e){return e.name===r}))&&(!e.fileRefs.some((function(e){return e.name===r}))&&!e.folders.some((function(e){return e.name===r})))}var S=r(61416),x=r(13364),E=r(22866),C=r(91354),O=r(38485),I=r(17776),P=r(52322);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function R(){R=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new _(n||[]);return o(a,"_invoke",{value:C(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",m={};function v(){}function A(){}function g(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(T([])));j&&j!==r&&n.call(j,a)&&(b=j);var S=g.prototype=v.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==k(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,r,n){var o=d;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=O(u,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(k(t)+" is not iterable")}return A.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:A,configurable:!0}),A.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),c(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function _(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=(0,n.createContext)(),M={START_RENAME:"START_RENAME",START_DELETE:"START_DELETE",DELETING:"DELETING",START_CREATE_FILE:"START_CREATE_FILE",START_CREATE_FOLDER:"START_CREATE_FOLDER",CREATING_FILE:"CREATING_FILE",CREATING_FOLDER:"CREATING_FOLDER",MOVING:"MOVING",CANCEL:"CANCEL",CLEAR:"CLEAR",ERROR:"ERROR"},Z={isDeleting:!1,isRenaming:!1,isCreatingFile:!1,isCreatingFolder:!1,isMoving:!1,inFlight:!1,actionedEntities:null,newFileCreateMode:null,error:null};function Q(e){return e}function q(e,t){switch(t.type){case M.START_RENAME:return D(D({},Z),{},{isRenaming:!0});case M.START_DELETE:return D(D({},Z),{},{isDeleting:!0,actionedEntities:t.actionedEntities});case M.START_CREATE_FILE:return D(D({},Z),{},{isCreatingFile:!0,newFileCreateMode:t.newFileCreateMode});case M.START_CREATE_FOLDER:return D(D({},Z),{},{isCreatingFolder:!0});case M.CREATING_FILE:return D(D({},Z),{},{isCreatingFile:!0,newFileCreateMode:e.newFileCreateMode,inFlight:!0});case M.CREATING_FOLDER:return D(D({},Z),{},{isCreatingFolder:!0,inFlight:!0});case M.DELETING:return D(D({},Z),{},{isDeleting:!0,inFlight:!0,actionedEntities:e.actionedEntities});case M.MOVING:return D(D({},Z),{},{isMoving:!0,inFlight:!0});case M.CLEAR:return D({},Z);case M.CANCEL:return e.inFlight?e:D({},Z);case M.ERROR:return D(D({},e),{},{inFlight:!1,error:t.error});default:throw new Error("Unknown user action type: ".concat(t.type))}}function U(e){var t=e.reindexReferences,r=e.children,o=(0,x.d2)(H)._id,i=(0,E._i)(G).permissionsLevel,a=T((0,n.useReducer)("readOnly"===i?Q:q,Z),2),u=a[0],l=a[1],c=(0,C.O)(),s=c.fileTreeData,p=c.dispatchRename,y=c.dispatchMove,v=(0,O.nF)(),k=v.selectedEntityIds,L=v.isRootFolderSelected,F=T((0,n.useState)(null),2),B=F[0],U=F[1],V=(0,n.useCallback)((function(){l({type:M.START_RENAME})}),[]),K=(0,n.useCallback)((function(e){var t=Array.from(k)[0],r=(0,w.we)(s,t),n=r.entity.name;if(e===n)return l({type:M.CLEAR});var i=function(e,t,r){if(!(0,S.AG)(r))return new I.I9;if(!j(e,t.parentFolderId,r))return new I.w4;var n=1===t.path.length,o="folder"===t.type;if(n&&!o&&(0,S.tQ)(r))return new I.Cr}(s,r,e);return i?l({type:M.ERROR,error:i}):(l({type:M.CLEAR}),p(t,e),function(e,t,r,n){return(0,d.ty)("/project/".concat(e,"/").concat(b(t),"/").concat(r,"/rename"),{body:{name:n}})}(o,r.type,r.entity._id,e).catch((function(e){p(t,n),l({type:M.ERROR,error:e})})))}),[p,s,o,k]),z=(0,n.useCallback)((function(e,t){return!j(s,e,t)}),[s]),W=(0,n.useCallback)((function(){var e=Array.from(k).map((function(e){return(0,w.we)(s,e).entity}));l({type:M.START_DELETE,actionedEntities:e})}),[s,k]),J=(0,n.useCallback)((function(){l({type:M.DELETING});var e=!1;return f(Array.from(k),(function(t){var r=(0,w.we)(s,t);return e=e||/\.bib$/.test(r.entity.name),function(e,t,r){return(0,d.K$)("/project/".concat(e,"/").concat(b(t),"/").concat(r))}(o,r.type,r.entity._id).catch((function(e){if(404!==e.info.statusCode)throw e}))})).then((function(){e&&t(),l({type:M.CLEAR})})).catch((function(e){l({type:M.ERROR,error:e})}))}),[s,o,k,t]),X=(0,n.useCallback)((function(e,t){l({type:M.MOVING});var r=Array.from(t).map((function(e){return(0,w.we)(s,e)})).filter((function(r){return r.parentFolderId!==e&&!t.has(r.parentFolderId)})),n=e===s._id,i=r.map((function(t){return function(e,t,r,n){if(!j(e,t,r.entity.name)){var o=new I.d9;return o.entityName=r.entity.name,o}var i="folder"===r.type;if(n&&!i&&(0,S.tQ)(r.entity.name))return new I.Cr}(s,e,t,n)})).find((function(e){return e}));if(i)return l({type:M.ERROR,error:i});var a={},u=!1;return r.forEach((function(t){a[t.entity._id]=t.parentFolderId,y(t.entity._id,e)})),f(r,function(){var t,r=(t=R().mark((function t(r){return R().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g(o,r.type,r.entity._id,e);case 3:t.next=10;break;case 5:t.prev=5,t.t0=t.catch(0),u=!0,y(r.entity._id,a[r.entity._id]),l({type:M.ERROR,error:t.t0});case 10:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){_(i,n,o,a,u,"next",e)}function u(e){_(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return r.apply(this,arguments)}}()).then((function(){u||l({type:M.CLEAR})}))}),[y,s,o]),Y=(0,n.useCallback)((function(){l({type:M.START_CREATE_FOLDER})}),[]),$=(0,n.useMemo)((function(){return function(e,t,r){if(r)return e._id;var n=Array.from(t)[0];if(!n)return e._id;var o=(0,w.Z7)(e,n);if(!o)return e._id;return"folder"===o.type?o.entity._id:o.parentFolderId}(s,k,L)}),[s,k,L]),ee=(0,n.useCallback)((function(e){var t=function(e,t,r){if(!(0,S.AG)(r.name))return new I.I9;if(!j(e,t,r.name))return new I.w4;var n=t===e._id,o="folder"===r.endpoint;if(n&&!o&&(0,S.tQ)(r.name))return new I.Cr}(s,$,e);return t?Promise.reject(t):function(e,t,r){var n=r.endpoint,o=A(r,h);return(0,d.ty)("/project/".concat(e,"/").concat(n),{body:m({parent_folder_id:t},o)})}(o,$,e)}),[s,$,o]),te=(0,n.useCallback)((function(e){return l({type:M.CREATING_FOLDER}),ee({endpoint:"folder",name:e}).then((function(){l({type:M.CLEAR})})).catch((function(e){l({type:M.ERROR,error:e})}))}),[ee]),re=(0,n.useCallback)((function(e){l({type:M.START_CREATE_FILE,newFileCreateMode:e})}),[]),ne=(0,n.useCallback)((function(){re("doc")}),[re]),oe=(0,n.useCallback)((function(){re("upload")}),[re]),ie=(0,n.useCallback)((function(e){return l({type:M.CREATING_FILE}),ee(e).then((function(){l({type:M.CLEAR})})).catch((function(e){l({type:M.ERROR,error:e})}))}),[ee]),ae=(0,n.useCallback)((function(e){return e.endpoint="doc",ie(e)}),[ie]),ue=(0,n.useCallback)((function(e){return e.endpoint="linked_file",ie(e)}),[ie]),le=(0,n.useCallback)((function(){l({type:M.CANCEL})}),[]);(0,n.useEffect)((function(){function e(e){l({type:M.START_CREATE_FILE,newFileCreateMode:e.detail.mode})}return window.addEventListener("file-tree.start-creating",e),function(){window.removeEventListener("file-tree.start-creating",e)}}),[]);var ce=(0,n.useMemo)((function(){if(1===k.size){var e=T(k,1)[0],t=(0,w.Z7)(s,e);if("fileRef"===(null==t?void 0:t.type))return"/project/".concat(o,"/file/").concat(e)}}),[s,o,k]),se=D(D({canDelete:k.size>0&&!L,canRename:1===k.size&&!L,canCreate:k.size<2},u),{},{parentFolderId:$,isDuplicate:z,startRenaming:V,finishRenaming:K,startDeleting:W,finishDeleting:J,finishMoving:X,startCreatingFile:re,startCreatingFolder:Y,finishCreatingFolder:te,startCreatingDocOrFile:ne,startUploadingDocOrFile:oe,finishCreatingDoc:ae,finishCreatingLinkedFile:ue,cancel:le,droppedFiles:B,setDroppedFiles:U,downloadPath:ce});return(0,P.jsx)(N.Provider,{value:se,children:r})}U.propTypes={reindexReferences:i().func.isRequired,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired};var H={_id:i().string.isRequired},G={permissionsLevel:i().oneOf(["readOnly","readAndWrite","owner"])};function V(){var e=(0,n.useContext)(N);if(!e)throw new Error("useFileTreeActionable is only available inside FileTreeActionableProvider");return e}},8668:function(e,t,r){"use strict";r.d(t,{Q:function(){return f},e:function(){return s}});r(71372),r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850);var n=r(2784),o=r(13980),i=r.n(o),a=r(52322);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=(0,n.createContext)();function s(){var e=(0,n.useContext)(c);if(!e)throw new Error("useFileTreeMainContext is only available inside FileTreeMainProvider");return e}var f=function(e){var t=e.refProviders,r=e.reindexReferences,o=e.setRefProviderEnabled,i=e.setStartedFreeTrial,l=e.children,s=u((0,n.useState)(),2),f=s[0],d=s[1];return(0,a.jsx)(c.Provider,{value:{refProviders:t,reindexReferences:r,setRefProviderEnabled:o,setStartedFreeTrial:i,contextMenuCoords:f,setContextMenuCoords:d},children:l})};f.propTypes={reindexReferences:i().func.isRequired,refProviders:i().object.isRequired,setRefProviderEnabled:i().func.isRequired,setStartedFreeTrial:i().func.isRequired,children:i().oneOfType([i().arrayOf(i().node),i().node]).isRequired}},38485:function(e,t,r){"use strict";r.d(t,{mI:function(){return R},nF:function(){return _},oJ:function(){return O}});r(34115),r(634),r(20796),r(32501),r(88233),r(26936),r(15735),r(58188),r(93244),r(28673),r(6886),r(71372),r(1939),r(95342),r(43450),r(27233),r(77950),r(21850);var n,o=r(2784),i=r(13980),a=r.n(i),u=r(72779),l=r.n(u),c=r(76635),s=r.n(c),f=r(38113),d=r(91354),p=r(13364),h=r(22866),y=r(39493),m=r(18977),v=r(44694),A=r(8668),g=r(52322);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=(0,o.createContext)(),x={SELECT:"SELECT",MULTI_SELECT:"MULTI_SELECT",UNSELECT:"UNSELECT"};function E(e,t){switch(t.type){case x.SELECT:return new Set(Array.isArray(t.id)?t.id:[t.id]);case x.MULTI_SELECT:var r=new Set(e);return r.has(t.id)?r.size>1&&r.delete(t.id):r.add(t.id),r;case x.UNSELECT:var n=new Set(e);return n.delete(t.id),n;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function C(e,t){switch(t.type){case x.SELECT:return new Set([t.id]);case x.MULTI_SELECT:case x.UNSELECT:return e;default:throw new Error("Unknown selectable action type: ".concat(t.type))}}function O(e){var t=e.onSelect,r=e.children,n=(0,p.d2)(I),i=n._id,a=n.rootDocId,u=(0,h._i)(P).permissionsLevel,l=b((0,m.Z)("doc.open_id.".concat(i),a),1)[0],c=(0,d.O)(),y=c.fileTreeData,A=c.setSelectedEntities,w=b((0,o.useState)(!1),2),j=w[0],O=w[1],k=b((0,o.useReducer)("readOnly"===u?C:E,null,(function(){return l&&(0,f.Z7)(y,l)?new Set([l]):new Set})),2),R=k[0],_=k[1],T=b((0,o.useState)(new Set),2),L=T[0],F=T[1];(0,o.useEffect)((function(){var e=new Set;R.forEach((function(t){var r=(0,f.Z7)(y,t);r&&r.path.forEach((function(t){return e.add(t)}))})),F(e)}),[y,R]);var D=(0,v.Z)(R);(0,o.useEffect)((function(){if(!s().isEqual(R,D)){var e=Array.from(R).map((function(e){return(0,f.Z7)(y,e)})).filter(Boolean);t(e),A(e)}}),[y,R,D,t,A]),(0,o.useEffect)((function(){function e(e){var t=(0,f.Z7)(y,e.detail);t&&_({type:x.SELECT,id:t.entity._id})}return window.addEventListener("editor.openDoc",e),function(){return window.removeEventListener("editor.openDoc",e)}}),[y]);var B=(0,o.useCallback)((function(e){_({type:x.SELECT,id:e})}),[]),N=(0,o.useCallback)((function(e){_({type:x.UNSELECT,id:e})}),[]),M=(0,o.useCallback)((function(e,t){var r=t?x.MULTI_SELECT:x.SELECT;_({type:r,id:e})}),[]),Z={selectedEntityIds:R,selectedEntityParentIds:L,select:B,unselect:N,selectOrMultiSelectEntity:M,isRootFolderSelected:j,setIsRootFolderSelected:O};return(0,g.jsx)(S.Provider,{value:Z,children:r})}O.propTypes={onSelect:a().func.isRequired,children:a().oneOfType([a().arrayOf(a().node),a().node]).isRequired};var I={_id:a().string.isRequired,rootDocId:a().string},P={permissionsLevel:a().oneOf(["readOnly","readAndWrite","owner"])},k=/Mac/.test(null===(n=window.navigator)||void 0===n?void 0:n.platform);function R(e,t){var r=(0,y.l5)(),n=r.view,i=r.setView,a=(0,A.e)().setContextMenuCoords,u=(0,d.O)().fileTreeData,c=(0,o.useContext)(S),s=c.selectedEntityIds,p=c.selectOrMultiSelectEntity,h=c.isRootFolderSelected,m=c.setIsRootFolderSelected,v=s.has(e),g=(0,o.useCallback)((function(){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=w(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(s);try{for(t.s();!(e=t.n()).done;){var r=e.value,o=(0,f.Z7)(u,r);if("doc"===o.type)return"editor";if("fileRef"===o.type)return"file";if("folder"===o.type)return n}}catch(e){t.e(e)}finally{t.f()}return null}),[u,s,n]),b=(0,o.useCallback)((function(r){r.stopPropagation();var n=!h&&(k?r.metaKey:r.ctrlKey);m(!1),p(e,n),"file"===t?i("file"):"doc"===t?i("editor"):"folder"===t&&i(g())}),[e,h,m,p,i,t,g]),j=(0,o.useCallback)((function(e){b(e),e.ctrlKey||e.metaKey||a(null)}),[b,a]),x=(0,o.useCallback)((function(e){"Enter"!==e.key&&" "!==e.key||b(e)}),[b]),E=(0,o.useCallback)((function(t){s.has(e)||b(t)}),[e,b,s]),C=!h&&v&&"pdf"!==n;return{isSelected:v,props:(0,o.useMemo)((function(){return{className:l()({selected:C}),"aria-selected":C,onClick:j,onContextMenu:E,onKeyPress:x}}),[j,E,x,C])}}function _(){var e=(0,o.useContext)(S);if(!e)throw new Error("useFileTreeSelectable is only available inside FileTreeSelectableProvider");return e}},17776:function(e,t,r){"use strict";r.d(t,{Cr:function(){return y},I9:function(){return h},d9:function(){return v},w4:function(){return m}});r(71372),r(96928),r(58188),r(88233),r(92215),r(61229),r(15735),r(79321),r(28673),r(6886),r(9575),r(96264),r(34115),r(634),r(71245),r(20796);function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(i=o.key,a=void 0,a=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}function l(e){var t=f();return function(){var r,o=p(e);if(t){var i=p(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function c(e){var t="function"==typeof Map?new Map:void 0;return c=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return s(e,arguments,p(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),d(r,e)},c(e)}function s(e,t,r){return s=f()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&d(o,r.prototype),o},s.apply(null,arguments)}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var h=function(e){u(InvalidFilenameError,e);var t=l(InvalidFilenameError);function InvalidFilenameError(){return a(this,InvalidFilenameError),t.call(this,"invalid filename")}return i(InvalidFilenameError)}(c(Error)),y=function(e){u(BlockedFilenameError,e);var t=l(BlockedFilenameError);function BlockedFilenameError(){return a(this,BlockedFilenameError),t.call(this,"blocked filename")}return i(BlockedFilenameError)}(c(Error)),m=function(e){u(DuplicateFilenameError,e);var t=l(DuplicateFilenameError);function DuplicateFilenameError(){return a(this,DuplicateFilenameError),t.call(this,"duplicate filename")}return i(DuplicateFilenameError)}(c(Error)),v=function(e){u(DuplicateFilenameMoveError,e);var t=l(DuplicateFilenameMoveError);function DuplicateFilenameMoveError(){return a(this,DuplicateFilenameMoveError),t.call(this,"duplicate filename on move")}return i(DuplicateFilenameMoveError)}(c(Error))},15270:function(e,t,r){"use strict";r.d(t,{t:function(){return s}});r(58188),r(73439),r(21515),r(43430),r(34115),r(634),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372);var n=r(2784),o=r(28684),i=r(50325),a=r(30286);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t){return i.W.compare(e.path,t.path)};function s(e){var t=u((0,n.useState)(!1),2),r=t[0],i=t[1],l=u((0,n.useState)(null),2),s=l[0],f=l[1],d=u((0,n.useState)(!1),2),p=d[0],h=d[1],y=(0,a.Z)().signal;return(0,n.useEffect)((function(){e&&(i(!0),h(!1),f(null),(0,o.xA)("/project/".concat(e,"/entities"),{signal:y}).then((function(e){f(e.entities.sort(c))})).catch((function(e){return h(e)})).finally((function(){return i(!1)})))}),[e,y]),{loading:r,data:s,error:p}}},25137:function(e,t,r){"use strict";r.d(t,{h:function(){return s}});r(58188),r(73439),r(21515),r(95342),r(77950),r(74069),r(1939),r(43430),r(34115),r(634),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(21850),r(71372);var n=r(2784),o=r(28684),i=r(50325),a=r(30286);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t){return i.W.compare(e.path,t.path)};function s(e){var t=u((0,n.useState)(!1),2),r=t[0],i=t[1],l=u((0,n.useState)(null),2),s=l[0],f=l[1],d=u((0,n.useState)(!1),2),p=d[0],h=d[1],y=(0,a.Z)().signal;return(0,n.useEffect)((function(){e&&(i(!0),h(!1),f(null),(0,o.ty)("/project/".concat(e,"/compile"),{body:{check:"silent",draft:!1,incrementalCompilesEnabled:!1},signal:y}).then((function(e){if("success"===e.status){var t=e.outputFiles.filter((function(e){return e.path.match(/.*\.(pdf|png|jpeg|jpg|gif)/)}));e.outputFiles.forEach((function(t){t.clsiServerId=e.clsiServerId,t.compileGroup=e.compileGroup})),f(t.sort(c))}else h("linked-project-compile-error")})).catch((function(e){return h(e)})).finally((function(){return i(!1)})))}),[e,y]),{loading:r,data:s,error:p}}},87983:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});r(26936),r(58188),r(73439),r(21515),r(43430),r(34115),r(634),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(27233),r(77950),r(21850),r(71372);var n=r(2784),o=r(28684),i=r(50325),a=r(30286);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e,t){return i.W.compare(e.name,t.name)};function s(){var e=u((0,n.useState)(!0),2),t=e[0],r=e[1],i=u((0,n.useState)(null),2),l=i[0],s=i[1],f=u((0,n.useState)(!1),2),d=f[0],p=f[1],h=(0,a.Z)().signal;return(0,n.useEffect)((function(){(0,o.xA)("/user/projects",{signal:h}).then((function(e){s(e.projects.sort(c))})).catch((function(e){return p(e)})).finally((function(){return r(!1)}))}),[h]),{loading:t,data:l,error:d}}},50325:function(e,t,r){"use strict";r.d(t,{W:function(){return n}});var n=new Intl.Collator("en",{numeric:!0,sensitivity:"variant",caseFirst:"upper"})},38113:function(e,t,r){"use strict";r.d(t,{Z7:function(){return c},gl:function(){return a},mz:function(){return l},we:function(){return i}});r(15735),r(58188),r(93244),r(28673),r(6886),r(1939),r(18178);var n=r(91601),o=r.n(n);function i(e,t){var r=c(e,t);if(r)return r;throw new(o())("Entity not found in tree",{entityId:t})}function a(e,t){var r=new Set;return t.forEach((function(t){r.add(i(e,t))})),r}function u(e){var t=new Set([e._id]);for(var r in e.folders){u(e.folders[r]).forEach((function(e){t.add(e)}))}return t}function l(e){var t=new Set;return e.forEach((function(e){u(e).forEach((function(e){t.add(e)}))})),t}function c(e,t,r){for(var n in r||(r=[e._id]),e.docs){var o=e.docs[n];if(o._id===t)return{entity:o,type:"doc",parent:e.docs,parentFolderId:e._id,path:r,index:n}}for(var i in e.fileRefs){var a=e.fileRefs[i];if(a._id===t)return{entity:a,type:"fileRef",parent:e.fileRefs,parentFolderId:e._id,path:r,index:i}}for(var u in e.folders){var l=e.folders[u];if(l._id===t)return{entity:l,type:"folder",parent:e.folders,parentFolderId:e._id,path:r,index:u};var s=c(l,t,r.concat(l._id));if(s)return s}return null}},65487:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});r(39529);function n(e){var t=e.split(".").pop();return t=t?t.toLowerCase():t,["png","pdf","jpg","jpeg","gif"].includes(t)?"image":["csv","xls","xlsx"].includes(t)?"table":["py","r"].includes(t)?"file-text":["bib"].includes(t)?"book":"file"}},61416:function(e,t,r){"use strict";r.d(t,{AG:function(){return u},tQ:function(){return l}});r(17368),r(24471),r(77950),r(51172),r(88233),r(85940),r(16781),r(74069),r(21850),r(27233),r(28673);var n=new RegExp("[\\/\\\\\\*\\u0000-\\u001F\\u007F\\u0080-\\u009F\\uD800-\\uDFFF]","g"),o=new RegExp("(^\\.$)|(^\\.\\.$)|(^\\s+)|(\\s+$)","g"),i=new RegExp("^(prototype|constructor|toString|toLocaleString|valueOf|hasOwnProperty|isPrototypeOf|propertyIsEnumerable|__defineGetter__|__lookupGetter__|__defineSetter__|__lookupSetter__|__proto__)$"),a=1024;function u(e){return(t=e).length>0&&t.length<=a&&!e.match(n)&&!e.match(o);var t}function l(e){return i.test(e)}},45686:function(e,t,r){"use strict";r.d(t,{Z:function(){return fe}});var n={};r.r(n),r.d(n,{TPRFileViewNotOriginalImporter:function(){return y}});var o={};r.r(o),r.d(o,{TPRFileViewInfo:function(){return j}});var i={};r.r(i),r.d(i,{TPRFileViewRefreshButton:function(){return I}});var a={};r.r(a),r.d(a,{TPRFileViewRefreshError:function(){return TPRFileViewRefreshError}});r(26936),r(39529),r(31235),r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(27233),r(77950),r(21850),r(71372);var u=r(2784),l=r(13980),c=r.n(l),s=r(75234),f=(r(43450),r(18178),r(76635)),d=r(80564),p=function(e,t){var r;return(null===(r=e.linkedFileData)||void 0===r?void 0:r.provider)===t},h=r(52322);function y(e){var t=e.file,r=(0,s.$G)().t,n=(0,d.SE)().id;return p(t,"mendeley")||p(t,"zotero")?t.linkedFileData.importer_id===n?null:(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"alert",children:r("only_importer_can_refresh",{provider:(0,f.capitalize)(t.linkedFileData.provider)})})}):null}var m=r(7585),v=(r(9575),r(96264),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775),r(10280));function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){return(0,h.jsx)(v.Z,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({type:"external-link-square",modifier:"rotate-180",className:"linked-file-icon"},e))};function j(e){var t=e.file,r=(0,s.$G)().t;return"mendeley"===t.linkedFileData.provider?(0,h.jsx)("div",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)(w,{fw:!0}),r("imported_from_mendeley_at_date",{formattedDate:(0,m.mr)(t.created),relativeDate:(0,m.K8)(t.created)})]})}):"zotero"===t.linkedFileData.provider?(0,h.jsx)("div",{children:(0,h.jsxs)("p",{children:[(0,h.jsx)(w,{fw:!0}),r("imported_from_zotero_at_date",{formattedDate:(0,m.mr)(t.created),relativeDate:(0,m.K8)(t.created)})]})}):null}j.propTypes={file:c().shape({created:c().string,linkedFileData:c().shape({provider:c().string})})};var S=r(22866),x=r(13364),E=function(e,t){var r;return(null===(r=e.linkedFileData)||void 0===r?void 0:r.provider)===t},C=r(72779),O=r.n(C);function I(e){var t,r=e.file,n=e.refreshing,o=e.refreshFile,i=(0,s.$G)().t,a=(0,d.SE)().id,u=p(r,"mendeley")||p(r,"zotero");u&&(t=r.linkedFileData.importer_id===a);var l=!u||t;return(0,h.jsxs)("button",{className:O()("btn",{"btn-primary":l,"btn-secondary":!l}),onClick:function(){return o(u)},disabled:n||!l,children:[(0,h.jsx)(v.Z,{type:"refresh",spin:n,fw:!0}),(0,h.jsx)("span",{children:n?"".concat(i("refreshing"),"…"):i("refresh")})]})}var P=r(28684),k=r(30286);function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=[{import:i,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-refresh-button"}];function L(e){var t=e.setRefreshError,r=e.file,n=(0,x.d2)()._id,o=(0,k.Z)().signal,i=R((0,u.useState)(!1),2),a=i[0],l=i[1],c=(0,u.useCallback)((function(e){l(!0),window.expectingLinkedFileRefreshedSocketFor=r.name;var i={shouldReindexReferences:e||/\.bib$/.test(r.name)};(0,P.ty)("/project/".concat(n,"/linked_file/").concat(r.id,"/refresh"),{signal:o,body:i}).then((function(){l(!1)})).catch((function(e){var r;l(!1),t((null===(r=e.data)||void 0===r?void 0:r.message)||e.message)}))}),[r,n,o,t]);return T.length>0?T.map((function(e){var t=e.import.TPRFileViewRefreshButton,n=e.path;return(0,h.jsx)(t,{file:r,refreshFile:c,refreshing:a},n)}))[0]:(0,h.jsx)(F,{refreshFile:c,refreshing:a})}function F(e){var t=e.refreshFile,r=e.refreshing,n=(0,s.$G)().t;return(0,h.jsxs)("button",{className:"btn btn-primary",onClick:function(){return t(null)},disabled:r,children:[(0,h.jsx)(v.Z,{type:"refresh",spin:r,fw:!0}),(0,h.jsx)("span",{children:r?"".concat(n("refreshing"),"…"):n("refresh")})]})}function TPRFileViewRefreshError(e){var t=e.file,r=e.refreshError,n=p(t,"mendeley")||p(t,"zotero");return(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("br",{}),n?(0,h.jsx)(FileViewMendeleyOrZoteroRefreshError,{file:t}):(0,h.jsx)(FileViewDefaultRefreshError,{refreshError:r})]})}function FileViewMendeleyOrZoteroRefreshError(e){var t=e.file,r=(0,s.$G)().t;return(0,h.jsxs)("div",{className:"alert alert-danger col-md-10 col-md-offset-1",style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,h.jsxs)("div",{children:[r("something_not_right"),"! ",(0,h.jsx)("span",{children:t.linkedFileData&&r("try_relinking_provider",{provider:(0,f.capitalize)(t.linkedFileData.provider)})})]}),(0,h.jsx)("div",{className:"text-center",children:(0,h.jsx)("button",{className:"btn btn-danger",children:(0,h.jsx)("a",{href:"/user/settings",target:"_blank",style:{fontWeight:"bold",textDecoration:"none"},children:r("go_to_settings")})})})]})}function FileViewDefaultRefreshError(e){var t=e.refreshError,r=(0,s.$G)().t;return(0,h.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[r("access_denied"),": ",t]})}var D=[{import:a,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-refresh-error"}];function FileViewRefreshError(e){var t=e.file,r=e.refreshError,n=(0,s.$G)().t;return D.length>0?D.map((function(e){var n=e.import.TPRFileViewRefreshError,o=e.path;return(0,h.jsx)(n,{file:t,refreshError:r},o)}))[0]:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"alert alert-danger col-md-6 col-md-offset-3",children:[n("access_denied"),": ",r]})]})}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=[{import:o,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-info"}],Z=[{import:n,path:"/overleaf/services/web/modules/tpr-webmodule/frontend/js/components/file-view/tpr-file-view-not-original-importer"}],Q=60,q=35,U="...",H=Q-q-U.length;function G(e){if(e){if(e.length>Q){var t=e.slice(0,q),r=e.slice(e.length-H);return t+U+r}return e}}function V(e){var t,r=e.file,n=(0,x.d2)({_id:c().string.isRequired})._id,o=(0,S._i)({permissionsLevel:c().string}).permissionsLevel,i=(0,s.$G)().t,a=B((0,u.useState)(null),2),l=a[0],f=a[1];return r.linkedFileData&&(E(r,"url")?t=(0,h.jsx)("div",{children:(0,h.jsx)(K,{file:r})}):E(r,"project_file")?t=(0,h.jsx)("div",{children:(0,h.jsx)(z,{file:r})}):E(r,"project_output_file")&&(t=(0,h.jsx)("div",{children:(0,h.jsx)(W,{file:r})}))),(0,h.jsxs)("div",{children:[r.linkedFileData&&t,r.linkedFileData&&M.map((function(e){var t=e.import.TPRFileViewInfo,n=e.path;return(0,h.jsx)(t,{file:r},n)})),r.linkedFileData&&"readOnly"!==o&&(0,h.jsx)(L,{file:r,setRefreshError:f})," ",(0,h.jsxs)("a",{download:!0,href:"/project/".concat(n,"/file/").concat(r.id),className:"btn btn-secondary-info btn-secondary",children:[(0,h.jsx)(v.Z,{type:"download",fw:!0})," ",(0,h.jsx)("span",{children:i("download")})]}),r.linkedFileData&&Z.map((function(e){var t=e.import.TPRFileViewNotOriginalImporter,n=e.path;return(0,h.jsx)(t,{file:r},n)}))[0],l&&(0,h.jsx)(FileViewRefreshError,{file:r,refreshError:l})]})}function K(e){var t=e.file;return(0,h.jsxs)("p",{children:[(0,h.jsx)(w,{})," ",(0,h.jsx)(s.cC,{i18nKey:"imported_from_external_provider_at_date",components:[(0,h.jsx)("a",{href:t.linkedFileData.url})],values:{shortenedUrl:G(t.linkedFileData.url),formattedDate:(0,m.mr)(t.created),relativeDate:(0,m.K8)(t.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function z(e){var t=e.file;return(0,h.jsxs)("p",{children:[(0,h.jsx)(w,{})," ",(0,h.jsx)(s.cC,{i18nKey:"imported_from_another_project_at_date",components:t.linkedFileData.v1_source_doc_id?[(0,h.jsx)("span",{})]:[(0,h.jsx)("a",{href:"/project/".concat(t.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceEntityPath:t.linkedFileData.source_entity_path.slice(1),formattedDate:(0,m.mr)(t.created),relativeDate:(0,m.K8)(t.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function W(e){var t=e.file;return(0,h.jsxs)("p",{children:[(0,h.jsx)(w,{})," ",(0,h.jsx)(s.cC,{i18nKey:"imported_from_the_output_of_another_project_at_date",components:t.linkedFileData.v1_source_doc_id?[(0,h.jsx)("span",{})]:[(0,h.jsx)("a",{href:"/project/".concat(t.linkedFileData.source_project_id),target:"_blank",rel:"noopener"})],values:{sourceOutputFilePath:t.linkedFileData.source_output_file_path,formattedDate:(0,m.mr)(t.created),relativeDate:(0,m.K8)(t.created)},shouldUnescape:!0,tOptions:{interpolation:{escapeValue:!0}}})]})}function J(e){var t=e.fileName,r=e.fileId,n=e.onLoad,o=e.onError,i=(0,x.d2)({_id:c().string.isRequired})._id;return(0,h.jsx)("img",{src:"/project/".concat(i,"/file/").concat(r),onLoad:n,onError:o,alt:t})}J.propTypes={fileName:c().string.isRequired,fileId:c().string.isRequired,onLoad:c().func.isRequired,onError:c().func.isRequired};r(73439),r(96882),r(38859),r(17525),r(18275),r(96928);var X=r(49169),Y=r(97502),$=r(45177);function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(){te=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new k(n||[]);return o(a,"_invoke",{value:C(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",m={};function v(){}function A(){}function g(){}var b={};c(b,a,(function(){return this}));var w=Object.getPrototypeOf,j=w&&w(w(R([])));j&&j!==r&&n.call(j,a)&&(b=j);var S=g.prototype=v.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==ee(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function C(t,r,n){var o=d;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=O(u,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function O(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,O(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function R(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(ee(t)+" is not iterable")}return A.prototype=g,o(S,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:A,configurable:!0}),A.displayName=c(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},x(E.prototype),c(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(S),c(S,l,"Generator"),c(S,a,(function(){return this})),c(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=R,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:R(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function re(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}var ne=function(e){var t=e.fileId,n=e.onLoad,o=e.onError,i=(0,X.Z)(),a=(0,Y.Yt)(),l=a.previewByPath,c=a.pathInFolder,s=(0,u.useCallback)(function(){var e,a=(e=te().mark((function e(a){var u,s,f,d,p,h,y,m,v,A;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=40;break}return e.next=3,r.e(7960).then(r.bind(r,17960)).then((function(e){return e.default}));case 3:if(u=e.sent,s=u.PDFJS,i.current){e.next=8;break}return o(),e.abrupt("return");case 8:if(f=c(t),d=f?l(f):null){e.next=13;break}return o(),e.abrupt("return");case 13:return e.next=15,s.getDocument(d.url).promise;case 15:if(p=e.sent,i.current){e.next=19;break}return o(),e.abrupt("return");case 19:a.textContent="",h=window.devicePixelRatio||1,y=1;case 22:if(!(y<=p.numPages)){e.next=38;break}return e.next=25,p.getPage(y);case 25:m=e.sent,v=m.getViewport({scale:h}),(A=document.createElement("canvas")).classList.add("pdf-page"),A.width=v.width,A.height=v.height,A.style.width="".concat(v.width/h,"px"),A.style.height="".concat(v.height/h,"px"),a.append(A),m.render({canvasContext:A.getContext("2d"),viewport:v});case 35:y++,e.next=22;break;case 38:return n(),e.abrupt("return",(function(){p.cleanup().catch($.c.error),p.destroy()}));case 40:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){re(i,n,o,a,u,"next",e)}function u(e){re(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return a.apply(this,arguments)}}(),[i,c,t,l,n,o]);return(0,h.jsx)("div",{className:"file-view-pdf",ref:s})};r(21515),r(85940);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ae=2097152;function ue(e){var t=e.file,r=e.onLoad,n=e.onError,o=(0,x.d2)({_id:c().string.isRequired})._id,i=oe((0,u.useState)(""),2),a=i[0],l=i[1],s=oe((0,u.useState)(!1),2),f=s[0],d=s[1],p=oe((0,u.useState)(!1),2),y=p[0],m=p[1],v=(0,k.Z)(),A=(0,k.Z)();return(0,u.useEffect)((function(){if(!y){var e,i="/project/".concat(o,"/file/").concat(t.id),a=setTimeout((function(){return v.abort()}),1e4);fetch(i,{method:"HEAD",signal:v.signal}).then((function(e){if(!e.ok)throw new Error("HTTP Error Code: "+e.status);return e.headers.get("Content-Length")})).then((function(t){var n=!1,o=null;return t>ae&&(n=!0,o=ae),null!=o&&(i+="?range=0-".concat(o)),e=setTimeout((function(){return A.abort()}),6e4),fetch(i,{signal:A.signal}).then((function(e){return e.text().then((function(e){n&&(e=e.replace(/\n.*$/,"")),l(e),r(),d(n)}))}))})).catch((function(e){$.c.error("Error fetching file contents",e),n()})).finally((function(){m(!1),clearTimeout(a),clearTimeout(e)}))}}),[o,t.id,n,r,y,v,A]),(0,h.jsx)("div",{children:a&&(0,h.jsx)("div",{className:"text-preview",children:(0,h.jsxs)("div",{className:"scroll-container",children:[(0,h.jsx)("p",{children:a}),f&&(0,h.jsx)("p",{children:"..."})]})})})}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}ue.propTypes={file:c().shape({id:c().string}).isRequired,onLoad:c().func.isRequired,onError:c().func.isRequired};var se=["png","jpg","jpeg","gif"];function fe(e){var t=e.file,r=le((0,u.useState)(!0),2),n=r[0],o=r[1],i=le((0,u.useState)(!1),2),a=i[0],l=i[1],c=(0,s.$G)().t,f=window.ExposedSettings,d=f.textExtensions,p=f.editableFilenames,y=t.name.split(".").pop().toLowerCase(),m=d.includes(y)||p.includes(t.name.toLowerCase()),v=se.includes(y),A="pdf"===y,g=!m&&!v&&!A,b=(0,u.useCallback)((function(){o(!1)}),[]),w=(0,u.useCallback)((function(){a||(o(!1),l(!0))}),[a]),j=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(V,{file:t}),v&&(0,h.jsx)(J,{fileName:t.name,fileId:t.id,onLoad:b,onError:w}),m&&(0,h.jsx)(ue,{file:t,onLoad:b,onError:w}),A&&(0,h.jsx)(ne,{fileId:t.id,onLoad:b,onError:w})]});return(0,h.jsxs)("div",{className:"file-view full-size",children:[!a&&j,!g&&n&&(0,h.jsx)(de,{}),(g||a)&&(0,h.jsx)("p",{className:"no-preview",children:c("no_preview_available")})]})}function de(){var e=(0,s.$G)().t;return(0,h.jsx)("div",{className:"loading-panel loading-panel-file-view",children:(0,h.jsxs)("span",{children:[(0,h.jsx)(v.Z,{type:"refresh",spin:!0}),"  ",e("loading"),"…"]})})}fe.propTypes={file:c().shape({id:c().string,name:c().string}).isRequired}},57597:function(e,t,r){"use strict";r.d(t,{f6:function(){return M},VF:function(){return Z}});r(15735),r(58188),r(28673),r(6886),r(60523),r(28399),r(77950),r(94908),r(32501),r(73439),r(18178),r(21515),r(43450),r(43105),r(71372),r(34115),r(634),r(20796),r(88233),r(26936),r(27233),r(21850),r(9575),r(96264),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775);var n=r(2784),o=r(39493),i=r(80564),a=r(13364),u=r(83903),l=r(6111),c=r(66462),s=r(99223);r(79321),r(49228);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=["edited","added","renamed","removed"];function A(e,t,r,n,o){var i=function(e,t,r,n){if(t&&!r){var o=[];if(n){var i,a=new Map,u=y(e);try{for(u.s();!(i=u.n()).done;){var l=i.value,s=(0,c.$z)(l);a.set(s,l)}}catch(e){u.e(e)}finally{u.f()}var f,d=function(e){var t=a.get(e);return!!t&&(0,c.jd)(t)},h=y(n.pathnames);try{for(h.s();!(f=h.n()).done;){var m=f.value;o.push({pathname:m,editable:d(m),operation:"edited"})}}catch(e){h.e(e)}finally{h.f()}var v,A=y(n.project_ops);try{for(A.s();!(v=A.n()).done;){var g=v.value,b=null;g.add?b={pathname:g.add.pathname,operation:"added"}:g.remove?b={pathname:g.remove.pathname,operation:"removed"}:g.rename&&(b={pathname:g.rename.newPathname,operation:"renamed"}),null!==b&&o.push(p({editable:d(b.pathname)},b))}}catch(e){A.e(e)}finally{A.f()}}return o}var w=e.reduce((function(e,t){return"operation"in t&&e.push({pathname:t.pathname,editable:(0,c.jd)(t),operation:t.operation}),e}),[]);return w}(e,t,r,n),a=e.find((function(e){return e.pathname===o})),u=i.some((function(e){return e.pathname===o}));if(a&&u)return a;var l,s=y(v);try{var f,d=function(){var t=l.value,r=i.find((function(e){return e.operation===t&&e.editable}));if(r){var n=e.find((function(e){return(0,c.$z)(e)===r.pathname}));if(n)return{v:n}}};for(s.s();!(l=s.n()).done;)if(f=d())return f.v}catch(e){s.e(e)}finally{s.f()}return a||e.find((function(e){return/main\.tex$/.test(e.pathname)}))||e.find((function(e){return/\.tex$/.test(e.pathname)}))||e[0]}var g=r(18977),b=r(14642),w=r(19034),j=r.n(w),S=r(76635),x=r(80589),E=r(9898),C=r(52322);function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==O(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===O(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=T(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F={updateRange:null,comparing:!1,files:[],previouslySelectedPathname:null},D={updates:[],visibleUpdateCount:null,atEnd:!1,freeHistoryLimitHit:!1,nextBeforeTimestamp:void 0,loadingState:"loadingInitial"};function B(){var e,t,r=(0,o.l5)().view,f=(0,i.SE)(),d=(0,a.d2)(),p=f.id,h=d._id,y=null===(e=d.owner)||void 0===e?void 0:e._id,m=Boolean((null===(t=d.features)||void 0===t?void 0:t.versioning)||f.isAdmin),v=y===p,w=_((0,n.useState)(F),2),C=w[0],O=w[1],I=_((0,n.useState)(D),2),k=I[0],T=I[1],L=_((0,n.useState)(null),2),B=L[0],N=L[1],M=_((0,g.Z)("history.userPrefs.showOnlyLabels.".concat(h),!1),2),Z=M[0],Q=M[1],q=(0,n.useRef)(null),U=(0,x.useErrorHandler)(),H=(0,n.useCallback)((function(){if(!q.current){var e=k.loadingState;if(!(k.atEnd||"loadingInitial"!==e&&"ready"!==e)){q.current=new AbortController;var t,r,n,o,i=q.current.signal,a=(t=(0,u.f9)(h,k.nextBeforeTimestamp,i),r=new URLSearchParams(window.location.search),n=r.get("history-max-updates"),null===(o=r.get("history-updates-delay"))&&null===n?t:t.then((function(e){var t=e.updates,r=e.nextBeforeTimestamp,i=n?parseInt(n,10):0,a=o?parseInt(o,10):0;i>0&&t.length>i&&(r=(t=t.slice(0,i))[t.length-1].fromV);var u={updates:t,nextBeforeTimestamp:r};return a>0?new Promise((function(e){window.setTimeout((function(){return e(u)}),a)})):u}))),l=null==B?(0,u.hu)(h,i):null;T(P(P({},k),{},{loadingState:"ready"===e?"loadingUpdates":"loadingInitial"})),Promise.all([a,l]).then((function(e){var t=_(e,2),r=t[0],n=r.updates,o=r.nextBeforeTimestamp,i=t[1];i&&N((0,s.Q3)(i,n));var a=function(e){var t,r=new Date,n=r.setDate(r.getDate()-1),o=k.updates,i=k.freeHistoryLimitHit,a=k.visibleUpdateCount,u=o[o.length-1],l=(0,S.cloneDeep)(e),c=R(l.entries());try{for(c.s();!(t=c.n()).done;){var s,f=_(t.value,2),d=f[0],p=f[1],h=R(p.meta.users);try{for(h.s();!(s=h.n()).done;){var y=s.value;y&&(y.hue=b.Z.getHueForUserId(y.id))}}catch(e){h.e(e)}finally{h.f()}u&&j()(u.meta.end_ts).isSame(p.meta.end_ts,"day")||(p.meta.first_in_day=!0),u=p,!m&&null===a&&p.meta.end_ts<n&&(a=d>0?d+1:2,i=!0)}}catch(e){c.e(e)}finally{c.f()}return{updates:o.concat(l),visibleUpdateCount:a,freeHistoryLimitHit:i}}(n),u=a.updates,l=a.visibleUpdateCount,c=a.freeHistoryLimitHit,f=null==o||c||!u.length;T({updates:u,visibleUpdateCount:l,freeHistoryLimitHit:c,atEnd:f,nextBeforeTimestamp:o,loadingState:"ready"})})).catch(U).finally((function(){q.current=null}))}}}),[k,h,B,U,m]);(0,n.useEffect)((function(){return function(){q.current&&q.current.abort()}}),[]);var G=(0,n.useRef)(!1);(0,n.useEffect)((function(){if("history"===r&&!G.current)return G.current=!0,H()}),[r,H]),(0,n.useEffect)((function(){"history"!==r&&(G.current=!1,O((function(e){return P(P({},F),{},{previouslySelectedPathname:e.previouslySelectedPathname})})),T(D),N(null))}),[r]);var V=(0,n.useCallback)((function(){O(F)}),[]),K=C.updateRange,z=K||{},W=z.fromV,J=z.toV,X=k.updates,Y=void 0===J?void 0:(0,E.Pe)(J,X),$=_((0,n.useState)(!1),2),ee=$[0],te=$[1];return(0,n.useEffect)((function(){if(void 0!==W&&void 0!==J){var e=new AbortController;return te(!0),(0,u.fy)(h,W,J,e.signal).then((function(e){var t=e.diff;O((function(e){var r=A(t,J,e.comparing,Y,e.previouslySelectedPathname),n=t.map((function(e){return(0,c.pA)(e)&&e.newPathname?(0,l.G7)(e):e}));return P(P({},e),{},{files:n,selectedFile:r,previouslySelectedPathname:r.pathname})}))})).catch(U).finally((function(){te(!1),e=null})),function(){e&&e.abort()}}}),[h,W,J,Y,U]),(0,n.useEffect)((function(){X.length&&!K&&O((function(e){return P(P({},e),{},{updateRange:{fromV:X[0].fromV,toV:X[0].toV,fromVTimestamp:X[0].meta.end_ts,toVTimestamp:X[0].meta.end_ts},comparing:!1,files:[]})}))}),[K,X]),{value:(0,n.useMemo)((function(){return{loadingFileDiffs:ee,updatesInfo:k,setUpdatesInfo:T,labels:B,setLabels:N,labelsOnly:Z,setLabelsOnly:Q,userHasFullFeature:m,currentUserIsOwner:v,projectId:h,selection:C,setSelection:O,fetchNextBatchOfUpdates:H,resetSelection:V}}),[ee,k,T,B,N,Z,Q,m,v,h,C,O,H,V])}}var N=(0,n.createContext)(void 0);function M(e){var t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e)),r=B().value;return(0,C.jsx)(N.Provider,P({value:r},t))}function Z(){var e=(0,n.useContext)(N);if(!e)throw new Error("HistoryContext is only available inside HistoryProvider");return e}},83903:function(e,t,r){"use strict";r.d(t,{AM:function(){return f},Hl:function(){return d},SP:function(){return l},Yi:function(){return c},f9:function(){return i},fy:function(){return s},hu:function(){return a},jc:function(){return u}});r(58188),r(88233),r(15735),r(28673),r(6886),r(60523),r(28399),r(18178);var n=r(28684),o=10;function i(e,t,r){var i={min_count:o.toString()};null!=t&&(i.before=t.toString());var a=new URLSearchParams(i).toString(),u="/project/".concat(e,"/updates?").concat(a);return(0,n.xA)(u,{signal:r})}function a(e,t){var r="/project/".concat(e,"/labels");return(0,n.xA)(r,{signal:t})}function u(e,t,r){return(0,n.ty)("/project/".concat(e,"/labels"),{body:t,signal:r})}function l(e,t,r){return(0,n.K$)("/project/".concat(e,"/labels/").concat(t),{signal:r})}function c(){return(0,n.ty)("/tutorial/react-history-buttons-tutorial/complete")}function s(e,t,r,o){var i={from:t.toString(),to:r.toString()},a=new URLSearchParams(i).toString(),u="/project/".concat(e,"/filetree/diff?").concat(a);return(0,n.xA)(u,{signal:o})}function f(e,t,r,o,i){var a={from:t.toString(),to:r.toString(),pathname:o},u=new URLSearchParams(a).toString(),l="/project/".concat(e,"/diff?").concat(u);return(0,n.xA)(l,{signal:i})}function d(e,t){return(0,n.ty)("/project/".concat(e,"/restore_file"),{body:{version:t.deletedAtV,pathname:t.pathname}})}},66462:function(e,t,r){"use strict";function n(e){return"renamed"===e.operation}function o(e){return"removed"===e.operation}function i(e){return function(e){return"editable"in e}(e)?e.editable:"edited"===e.operation}function a(e){return(n(e)?e.newPathname:null)||e.pathname}r.d(t,{$z:function(){return a},Ep:function(){return o},jd:function(){return i},pA:function(){return n}})},6111:function(e,t,r){"use strict";r.d(t,{AO:function(){return c},BA:function(){return l},G7:function(){return s}});r(26936),r(49228),r(58188),r(32501),r(88233),r(27233),r(28673),r(77950),r(21850),r(34115),r(634),r(20796),r(15735),r(6886),r(71372);var n=r(76635),o=r.n(n),i=r(66462);function a(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r,n,i=null!==(r=null==t||null===(n=t.pathname)||void 0===n?void 0:n.split("/"))&&void 0!==r?r:"",a=e,u=function(){var e=i[l];if(l===i.length-1){var r=o().clone(t);r.name=e,r.type="file",a.push(r)}else{var n,u=o().find(a,(function(t){return t.name===e}));void 0===u&&(u={name:e,type:"folder",children:[],pathname:e,editable:!1},a.push(u)),a=null!==(n=u.children)&&void 0!==n?n:[]}},l=0;l<i.length;l++)u();return e}function c(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rootFolder",n=[],o=[],u=a(e);try{for(u.s();!(t=u.n()).done;){var l=t.value;if("file"===l.type){var s,f,d=(0,i.Ep)(l)?l.deletedAtV:void 0,p={pathname:null!==(s=l.pathname)&&void 0!==s?s:"",name:null!==(f=l.name)&&void 0!==f?f:"",deletedAtV:d,editable:(0,i.jd)(l),operation:"operation"in l?l.operation:void 0};o.push(p)}else if("folder"===l.type&&l.children){var h=c(l.children,l.name);n.push(h)}}}catch(e){u.e(e)}finally{u.f()}return{docs:o,folders:n,name:r}}function s(e){return{oldPathname:e.pathname,pathname:e.newPathname,operation:e.operation,editable:e.editable}}},9898:function(e,t,r){"use strict";r.d(t,{BD:function(){return i},Bz:function(){return c},Pe:function(){return l},eC:function(){return u},eR:function(){return a},x6:function(){return o}});r(45794),r(16781),r(95342),r(58188),r(18178),r(49228);var n=r(14642),o=function(e){var t=n.Z.getHueForUserId(null==e?void 0:e.id)||100;return"hsl(".concat(t,", 70%, 50%)")},i=function(e){var t=[e.first_name,e.last_name].filter((function(e){return null!=e})).join(" ").trim();return""===t&&(t=e.email.split("@")[0]),null==t||""===t?"?":t},a=function(e){return e.rename?"".concat(e.rename.pathname," → ").concat(e.rename.newPathname):e.add?"".concat(e.add.pathname):e.remove?"".concat(e.remove.pathname):""};function u(e){if(e.updateRange){for(var t,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i=n[0],a=n[1];if(a=null!==(t=a)&&void 0!==t?t:i,e.comparing){if(i>e.updateRange.fromV&&a<e.updateRange.toV)return"withinSelected";if(i===a){if(i===e.updateRange.toV)return"upperSelected";if(a===e.updateRange.fromV)return"lowerSelected"}if(i>=e.updateRange.toV)return"aboveSelected";if(a<=e.updateRange.fromV)return"belowSelected";if(a===e.updateRange.toV)return"upperSelected";if(i===e.updateRange.fromV)return"lowerSelected"}else{if(a===e.updateRange.toV)return"selected";if(i>=e.updateRange.toV)return"aboveSelected";if(a<=e.updateRange.fromV)return"belowSelected"}}return null}var l=function(e,t){return t.find((function(t){return t.toV===e}))},c=function(e){var t=e.fromV,r=e.toV,n=e.meta.end_ts;return{fromV:t,toV:r,fromVTimestamp:n,toVTimestamp:n}}},99223:function(e,t,r){"use strict";r.d(t,{BB:function(){return p},Q3:function(){return y},j_:function(){return h},lG:function(){return m},oV:function(){return v}});r(32501),r(18178),r(43450),r(49228),r(58188),r(34769),r(39529),r(31235),r(34115),r(634),r(20796),r(15735),r(28673),r(6886),r(27233),r(88233),r(26936),r(77950),r(21850),r(71372),r(9575),r(96264),r(71245),r(95342),r(68625),r(1939),r(62775);var n=r(76635);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==o(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===o(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||d(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return e}(e)||d(e)||s(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var p=function(e){return!0===e.isPseudoCurrentStateLabel},h=function(e){return!p(e)},y=function(e,t){var r=t.length?t[0].toV:null,o=function(e){return(0,n.orderBy)(e,["isPseudoCurrentStateLabel","version","created_at"],["asc","desc","desc"])}(e),i=function(e){return e.length&&p(e[0])?c(e).slice(1):e}(o),u=function(e,t){return e.length&&e[0].version===t?e:[{id:"1",isPseudoCurrentStateLabel:!0,version:t,created_at:(new Date).toISOString(),lastUpdatedTimestamp:null}].concat(l(e))}(i,r),s=function(e,t){return e.map((function(e){var r,n=null===(r=t.find((function(t){return t.labels.find((function(t){return t.id===e.id}))})))||void 0===r?void 0:r.meta.end_ts;return a(a({},e),{},{lastUpdatedTimestamp:n||null})}))}(u,t);return s},m=function(e){var t=[];if(e){var r=(0,n.groupBy)(e,"version");t=Object.keys(r).map((function(e){return{version:parseInt(e,10),labels:r[e]}})),t=(0,n.orderBy)(t,["version"],["desc"])}return t},v=function(e,t){var r,n=m(e).map((function(e){return e.version})),o=null===(r=t.updateRange)||void 0===r?void 0:r.toV;return o&&!n.includes(o)}},19816:function(e,t,r){"use strict";r.d(t,{H:function(){return m},k:function(){return v}});r(71372),r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850);var n=r(2784),o=r(44466),i=r(32687),a=r(96227),u=r(37246),l=r(79477),c=r(76066),s=r(13364),f=r(52322);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=(0,n.createContext)(void 0),m=function(e){var t=e.children,r=d((0,n.useState)(void 0),2),p=r[0],h=r[1],m=d((0,n.useState)(-1),2),v=m[0],g=m[1],b=d((0,n.useState)(!1),2),w=b[0],j=b[1],S=d((0,n.useState)(!1),2),x=S[0],E=S[1],C=d((0,n.useState)(!1),2),O=C[0],I=C[1],P=(0,o.Z)("editor:gotoLine",!0);(0,i.Z)("file-view:file-opened",(0,n.useCallback)((function(e){j(!0)}),[])),(0,i.Z)("scroll:editor:update",(0,n.useCallback)((function(e){O?I(!1):g(e.detail+1)}),[O])),(0,i.Z)("cursor:editor:update",(0,n.useCallback)((function(e){x?E(!1):g(e.detail.row+1)}),[x])),(0,i.Z)("doc:after-opened",(0,n.useCallback)((function(e){e.detail&&E(!0),j(!1),I(!0)}),[]));var k=(0,n.useCallback)((function(e,t){I(!0),P(e,0,t),a.BZ("outline-jump-to-line")}),[P]),R=(0,n.useMemo)((function(){return A(null==p?void 0:p.items,v)}),[p,v]),_=d((0,u.Z)("editor.open_doc_name"),1)[0],T=(0,n.useMemo)((function(){return!!_&&(0,l.Z)(_)}),[_]),L=(0,s.d2)()._id,F="file_outline.expanded.".concat(L),D=d((0,n.useState)((function(){return!1!==c.Z.getItem(F)})),2),B=D[0],N=D[1],M=T&&!w,Z=(0,n.useCallback)((function(){M&&(c.Z.setItem(F,!B),a.BZ(B?"outline-collapse":"outline-expand"),N(!B))}),[M,B,F]),Q=(0,n.useMemo)((function(){return{flatOutline:p,setFlatOutline:h,highlightedLine:R,jumpToLine:k,canShowOutline:M,outlineExpanded:B,toggleOutlineExpanded:Z}}),[p,R,k,M,B,Z]);return(0,f.jsx)(y.Provider,{value:Q,children:t})},v=function(){var e=(0,n.useContext)(y);if(!e)throw new Error("useOutlineProvider is only available inside OutlineProvider");return e},A=function(e,t){if(!e)return-1;var r,n=-1,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.line>t)return n;n=i.line}}catch(e){o.e(e)}finally{o.f()}return n}},87443:function(e,t,r){"use strict";r.d(t,{c:function(){return R}});r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372);var n=r(2784),o=r(13980),i=r.n(o),a=r(72779),u=r.n(a),l=r(75234),c=(r(27072),r(67694),r(43450),r(18178),r(39529),r(31235),r(93057)),s=r(10280),f=r(52322);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,n.memo)((function(e){var t=e.outlineItem,r=e.jumpToLine,o=e.highlightedLine,i=e.matchesHighlightedLine,a=e.containsHighlightedLine,p=(0,l.$G)().t,h=d((0,n.useState)(!0),2),y=h[0],m=h[1],v=(0,n.useRef)(),g=(0,n.useRef)(!1),b=u()("outline-item",{"outline-item-no-children":!t.children}),w=i||!y&&a,j=u()("outline-item-link",{"outline-item-link-highlight":w});(0,n.useEffect)((function(){var e=g.current;g.current=w,!e&&w&&(0,c.Z)(v.current,{scrollMode:"if-needed",block:"center"})}),[w,v,g]);var S=t.children?y:void 0;return(0,f.jsxs)("li",{className:b,"aria-expanded":S,role:"treeitem","aria-current":w,"aria-label":t.title,children:[(0,f.jsxs)("div",{className:"outline-item-row",children:[t.children?(0,f.jsx)("button",{className:"outline-item-expand-collapse-btn",onClick:function(){m(!y)},"aria-label":p(y?"collapse":"expand"),children:(0,f.jsx)(s.Z,{type:y?"angle-down":"angle-right",className:"outline-caret-icon"})}):null,(0,f.jsx)("button",{className:j,onClick:function(e){var n=2===e.detail;r(t.line,n)},ref:v,children:t.title})]}),y&&t.children?(0,f.jsx)(A,{outline:t.children,jumpToLine:r,isRoot:!1,highlightedLine:a?o:null,containsHighlightedLine:a}):null]})}));h.propTypes={outlineItem:i().exact({line:i().number.isRequired,title:i().string.isRequired,level:i().number,children:i().array,from:i().number,to:i().number}).isRequired,jumpToLine:i().func.isRequired,highlightedLine:i().number,matchesHighlightedLine:i().bool,containsHighlightedLine:i().bool};var y=h;function m(e){return(e||[]).map((function(e){return m(e.children).concat(e.line)})).flat()}var v=(0,n.memo)((function(e){var t=e.outline,r=e.jumpToLine,n=e.isRoot,o=e.highlightedLine,i=e.containsHighlightedLine,a=u()("outline-item-list",{"outline-item-list-root":n});return(0,f.jsx)("ul",{className:a,role:n?"tree":"group",children:t.map((function(e,t){var n=i&&o===e.line,a=i&&m(e.children).includes(o);return(0,f.jsx)(y,{outlineItem:e,jumpToLine:r,highlightedLine:n||a?o:null,matchesHighlightedLine:n,containsHighlightedLine:a},"".concat(e.level,"-").concat(t))}))})}));v.propTypes={outline:i().array.isRequired,jumpToLine:i().func.isRequired,isRoot:i().bool,highlightedLine:i().number,containsHighlightedLine:i().bool};var A=v;function g(e){var t=e.outline,r=e.jumpToLine,n=e.highlightedLine,o=(0,l.$G)().t;return(0,f.jsx)("div",{children:t.length?(0,f.jsx)(A,{outline:t,jumpToLine:r,isRoot:!0,highlightedLine:n,containsHighlightedLine:!0}):(0,f.jsxs)("div",{className:"outline-body-no-elements",children:[o("we_cant_find_any_sections_or_subsections_in_this_file"),"."," ",(0,f.jsx)("a",{href:"/learn/how-to/Using_the_File_Outline_feature",className:"outline-body-link",target:"_blank",rel:"noopener noreferrer",children:o("find_out_more_about_the_file_outline")})]})})}g.propTypes={outline:i().array.isRequired,jumpToLine:i().func.isRequired,highlightedLine:i().number};var b=g,w=r(23357),j=r(24958),S=n.memo((function(e){var t=e.isTexFile,r=e.outline,o=e.jumpToLine,i=e.onToggle,a=e.highlightedLine,c=e.isPartial,d=void 0!==c&&c,p=e.expanded,h=e.toggleExpanded,y=(0,l.$G)().t,m=t&&p;(0,n.useEffect)((function(){i(m)}),[m,i]);var v=u()("outline-pane",{"outline-pane-disabled":!t});return(0,f.jsxs)("div",{className:v,children:[(0,f.jsx)("header",{className:"outline-header",children:(0,f.jsxs)("button",{className:"outline-header-expand-collapse-btn",disabled:!t,onClick:h,"aria-label":y(p?"hide_outline":"show_outline"),children:[(0,f.jsx)(s.Z,{type:m?"angle-down":"angle-right",className:"outline-caret-icon"}),(0,f.jsx)("h4",{className:"outline-header-name",children:y("file_outline")}),d&&(0,f.jsx)(j.Z,{id:"partial-outline",description:y("partial_outline_warning"),overlayProps:{placement:"top"},children:(0,f.jsx)("span",{role:"status",children:(0,f.jsx)(s.Z,{type:"exclamation-triangle","aria-label":y("partial_outline_warning")})})})]})}),m&&(0,f.jsx)("div",{className:"outline-body",children:(0,f.jsx)(b,{outline:r,jumpToLine:o,highlightedLine:a})})]})}));S.propTypes={isTexFile:i().bool.isRequired,outline:i().array.isRequired,jumpToLine:i().func.isRequired,onToggle:i().func.isRequired,highlightedLine:i().number,isPartial:i().bool,expanded:i().bool,toggleExpanded:i().func.isRequired};var x=(0,w.Z)(S),E=r(19816),C=r(85209),O=r(44466),I=r(45177);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var R=(0,n.memo)((function(){var e=(0,E.k)(),t=e.flatOutline,r=e.highlightedLine,o=e.canShowOutline,i=e.jumpToLine,a=e.outlineExpanded,u=e.toggleOutlineExpanded,l=(0,O.Z)("outline-toggled"),c=P((0,n.useState)((function(){return{items:[],partial:!1}})),2),s=c[0],d=c[1],p=(0,n.useRef)(void 0);return(0,n.useEffect)((function(){var e=p.current;p.current=t,t?_(null==e?void 0:e.items,t.items)&&(I.c.log("Rebuilding changed outline"),d({items:(0,C.zz)(t.items),partial:t.partial})):d({items:[],partial:!1})}),[t]),(0,f.jsx)("div",{className:"outline-container",children:(0,f.jsx)(x,{outline:s.items,onToggle:l,isTexFile:o,jumpToLine:i,highlightedLine:r,isPartial:s.partial,expanded:a,toggleExpanded:u})})}));R.displayName="OutlineContainer";var _=function(e,t){if(!e)return!0;if(e.length!==t.length)return!0;for(var r=0;r<e.length;r++){var n=e[r],o=t[r];if(n.level!==o.level||n.line!==o.line||n.title!==o.title)return!0}return!1}},97287:function(e,t,r){"use strict";r.d(t,{Z:function(){return b}});var n=r(2784),o=r(13980),i=r.n(o),a=r(39493),u=(r(77950),r(21850),r(75234)),l=r(63584),c=r(72779),s=r.n(c),f=r(10280),d=r(36915),p=r(24958),h=r(52322),y=/Mac/i.test(navigator.platform)?"Cmd":"Ctrl";function m(){var e=(0,u.$G)().t,t=(0,d.Im)(),r=t.compiling,n=t.startCompile,o=t.hasChanges,i=r?"".concat(e("compiling"),"…"):e("recompile"),a=(0,h.jsxs)(h.Fragment,{children:[e("recompile_pdf")," ",(0,h.jsxs)("span",{className:"keyboard-shortcut",children:["(",y," + Enter)"]})]});return(0,h.jsx)("div",{className:"detach-compile-button-container",children:(0,h.jsx)(p.Z,{id:"detach-compile",description:a,tooltipProps:{className:"keyboard-tooltip"},overlayProps:{delayShow:500},children:(0,h.jsxs)(l.Z,{bsStyle:"primary",onClick:function(){return n()},disabled:r,className:s()("detach-compile-button",{"btn-striped-animated":o,"detach-compile-button-disabled":r}),children:[(0,h.jsx)(f.Z,{type:"refresh",spin:r}),(0,h.jsx)("span",{className:"detach-compile-button-label",children:i})]})})})}var v=(0,n.memo)(m);function A(){var e=(0,a.l5)(g),t=e.detachRole,r=e.detachIsLinked;return"detacher"===t&&r?(0,h.jsx)(v,{}):null}var g={detachRole:i().string,detachIsLinked:i().bool},b=(0,n.memo)(A)},14185:function(e,t,r){"use strict";r.d(t,{XA:function(){return u},bx:function(){return a},yk:function(){return l}});var n=r(39493),o=r(79657),i=r(52322);function a(){return(0,n.l5)().detachRole?null:(0,i.jsx)(o.Z,{})}function u(){var e=(0,n.l5)(),t=e.detachRole,r=e.detachIsLinked;return"detacher"===t&&r?(0,i.jsx)(o.Z,{}):null}function l(){var e=(0,n.l5)(),t=e.detachRole,r=e.detachIsLinked;return"detached"===t&&r?(0,i.jsx)(o.Z,{}):null}},78237:function(e,t,r){"use strict";r.d(t,{Z:function(){return u},j:function(){return a}});var n=r(2784),o=r(32687),i=r(83976),a=function(e){if(e.shiftKey||e.altKey)return!1;if(e.ctrlKey){if("s"===e.key||"Enter"===e.key||"."===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}else if(e.metaKey){if("s"===e.key||"Enter"===e.key)return!0;if("S"===e.key&&!e.shiftKey)return!0}};function u(e,t,r){var u=(0,n.useCallback)((function(t){a(t)&&(t.preventDefault(),e())}),[e]),l=(0,n.useCallback)((function(){e()}),[e]);(0,o.Z)("pdf:recompile",l),(0,n.useEffect)((function(){return document.body.addEventListener("keydown",u),function(){document.body.removeEventListener("keydown",u)}}),[u]);var c=(0,i.Z)("set-changed-at",t,"detacher","detached"),s=(0,n.useCallback)((function(){c(Date.now())}),[c]);(0,o.Z)("doc:changed",s);var f=(0,i.Z)("set-saved-at",r,"detacher","detached"),d=(0,n.useCallback)((function(){f(Date.now())}),[f]);(0,o.Z)("doc:saved",d)}},72891:function(e,t,r){"use strict";r.d(t,{Z:function(){return C},s:function(){return E}});r(71372),r(58188),r(73439),r(21515),r(43105),r(34115),r(634),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850);var n=r(2784),o=r(13980),i=r.n(o),a=r(17631),u=r(2571),l=r(63584),c=r(75234),s=r(10280),f=r(11685),d=r(22866),p=r(28500),h=r(52322),y=(0,n.lazy)((function(){return r.e(6543).then(r.bind(r,56543)).then((function(e){return{default:e.ReadOnlyTokenLink}}))})),m=(0,n.lazy)((function(){return Promise.all([r.e(1623),r.e(880),r.e(5173)]).then(r.bind(r,65173))}));function v(e){var t=e.show,r=e.cancel,o=e.animation,i=e.inFlight,v=e.error,g=(0,c.$G)().t,b=(0,d._i)().isRestrictedTokenMember;return(0,h.jsxs)(f.Z,{show:t,onHide:r,animation:o,children:[(0,h.jsx)(a.Z.Header,{closeButton:!0,children:(0,h.jsx)(a.Z.Title,{children:g("share_project")})}),(0,h.jsx)(a.Z.Body,{className:"modal-body-share",children:(0,h.jsx)(u.Z,{fluid:!0,children:(0,h.jsx)(n.Suspense,{fallback:(0,h.jsx)(p.w,{minHeight:"15rem"}),children:b?(0,h.jsx)(y,{}):(0,h.jsx)(m,{})})})}),(0,h.jsxs)(a.Z.Footer,{className:"modal-footer-share",children:[(0,h.jsxs)("div",{className:"modal-footer-left",children:[i&&(0,h.jsx)(s.Z,{type:"refresh",spin:!0}),v&&(0,h.jsx)("span",{className:"text-danger error",children:(0,h.jsx)(A,{error:v})})]}),(0,h.jsx)("div",{className:"modal-footer-right",children:(0,h.jsx)(l.Z,{type:"button",onClick:r,bsStyle:null,className:"btn-secondary",disabled:i,children:g("close")})})]})]})}function A(e){var t=e.error,r=(0,c.$G)().t;switch(t){case"cannot_invite_non_user":return(0,h.jsx)(h.Fragment,{children:r("cannot_invite_non_user")});case"cannot_verify_user_not_robot":return(0,h.jsx)(h.Fragment,{children:r("cannot_verify_user_not_robot")});case"cannot_invite_self":return(0,h.jsx)(h.Fragment,{children:r("cannot_invite_self")});case"invalid_email":return(0,h.jsx)(h.Fragment,{children:r("invalid_email")});case"too_many_requests":return(0,h.jsx)(h.Fragment,{children:r("too_many_requests")});default:return(0,h.jsx)(h.Fragment,{children:r("generic_something_went_wrong")})}}var g=r(13364),b=r(89825),w=r(96227);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var x=(0,n.createContext)(void 0);function E(){var e=(0,n.useContext)(x);if(!e)throw new Error("useShareProjectContext is only available inside ShareProjectProvider");return e}var C=n.memo((function(e){var t=e.handleHide,r=e.show,o=e.animation,a=void 0===o||o,u=j((0,n.useState)(!1),2),l=u[0],c=u[1],s=j((0,n.useState)(),2),f=s[0],d=s[1],p=(0,g.d2)(g.E_),y=(0,b.yW)({splitTestVariants:i().object}).splitTestVariants;(0,n.useEffect)((function(){r&&(0,w.BZ)("share-modal-opened",{splitTestVariant:y["null-test-share-modal"],project_id:p._id})}),[y,p._id,r]),(0,n.useEffect)((function(){r&&d(void 0)}),[r]);var m=(0,n.useCallback)((function(){l||t()}),[t,l]),A=(0,n.useCallback)((function(e){d(void 0),c(!0);var t=e();return t.catch((function(e){var t,r;d((null===(t=e.data)||void 0===t?void 0:t.errorReason)||(null===(r=e.data)||void 0===r?void 0:r.error)||"generic_something_went_wrong")})),t.finally((function(){c(!1)})),t}),[]),S=(0,n.useCallback)((function(e){return Object.assign(p,e)}),[p]);return p?(0,h.jsx)(x.Provider,{value:{updateProject:S,monitorRequest:A,inFlight:l,setInFlight:c,error:f,setError:d},children:(0,h.jsx)(v,{animation:a,cancel:m,error:f,inFlight:l,show:r})}):null}))},66123:function(e,t,r){"use strict";r.d(t,{bh:function(){return h},eH:function(){return p},np:function(){return s},c_:function(){return u},GY:function(){return l},yV:function(){return a},xX:function(){return d},h1:function(){return f},hS:function(){return c}});r(18178);var n,o,i=r(28684);r(58188),r(73439);function a(e,t,r){var a;return function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new Promise((function(t,r){if(e||!window.grecaptcha)return t();try{n||(n=window.grecaptcha.render("recaptcha",{callback:function(e){o&&(o(e),o=void 0),window.grecaptcha.reset()}})),o=t}catch(e){r(e)}}))}(null===(a=window.ExposedSettings.recaptchaDisabled)||void 0===a?void 0:a.invite).then((function(n){return(0,i.ty)("/project/".concat(e,"/invite"),{body:{email:t,privileges:r,"g-recaptcha-response":n}})}))}function u(e,t){return(0,i.ty)("/project/".concat(e,"/invite/").concat(t._id,"/resend"))}function l(e,t){return(0,i.K$)("/project/".concat(e,"/invite/").concat(t._id))}function c(e,t,r){return(0,i.BS)("/project/".concat(e,"/users/").concat(t._id),{body:r})}function s(e,t){return(0,i.K$)("/project/".concat(e,"/users/").concat(t._id))}function f(e,t){return(0,i.ty)("/project/".concat(e,"/transfer-ownership"),{body:{user_id:t._id}})}function d(e,t){return(0,i.ty)("/project/".concat(e,"/settings/admin"),{body:{publicAccessLevel:t}})}function p(e){return(0,i.xA)("/project/".concat(e,"/members"))}function h(e){return(0,i.xA)("/project/".concat(e,"/invites"))}},64292:function(e,t,r){"use strict";r.d(t,{Z:function(){return B}});var n={};r.r(n),r.d(n,{WritefullPromotion:function(){return P},default:function(){return k}});r(15735),r(58188),r(73439),r(28673),r(6886),r(43450),r(39529),r(31235),r(18178),r(34115),r(634),r(20796),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372),r(96882),r(38859),r(17525),r(18275),r(96928),r(1939),r(9575),r(96264),r(71245),r(34769),r(95342),r(68625),r(62775);var o=r(2784),i=r(63584),a=r(75234),u=r(21629),l=r(96480),c=r(22866),s=r(96227),f=r(99618),d=r(51004),p=r(28684),h=r(45177),y=r(52322);var m=function(e){var t=e.width,r=void 0===t?"40":t,n=e.height,o=void 0===n?"40":n,i=e.background,a=void 0===i?"none":i;return(0,y.jsxs)("svg",{width:r,height:o,viewBox:"0 0 40 40",fill:a,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",style:{verticalAlign:"middle"},children:[(0,y.jsx)("rect",{x:"1.6665",y:"1.66666",width:"36.6667",height:"36.6667",fill:"url(#writefull-pattern)"}),(0,y.jsxs)("defs",{children:[(0,y.jsx)("pattern",{id:"writefull-pattern",patternContentUnits:"objectBoundingBox",width:"1",height:"1",children:(0,y.jsx)("use",{xlinkHref:"#writefull-image",transform:"scale(0.00195312)"})}),(0,y.jsx)("image",{id:"writefull-image",width:"512",height:"512",xlinkHref:"data:image/png;base64,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c+bq7ZQuAgAACIC6hwMH57Iyz6I4ZUE7ChcBAAAEQP0vEupfy8pEABAAAEAAEAAEgMJFAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgAACAACgAAQBAAAEAAEAAEgCAAAIAAIAAJAEAAABIAgAAgAQQAAEACCACAABAEAQAAIAoAAEAQAAAEgCAACgACwOgEQAIIAIAAIAAAgAAQBQAAQAABAAAgCgAAgAACAABAEAAFAAAAAASAIAAKAAAAAAoAAIAAIAAIAAAgAAoAAIAAIAAAgAAgAAkAQAABAABAABIAgAACAACAACABBAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgCAABAEAAEgCAAAAkAQAASAIAAACABBABAAggAAIAAEAUAAEAAEAAABIAgAAoAAAAACQBAABAABAAAEgCAACAACAAAIAEEAEAAEAAAQAIIAIAAIAAAgAAQBQAAQAABAABAAQAAQAABAABAABIAgAACAACAACABBAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgAACAACgAAQBAAAAaB0EQAEgCAAAAgAQQAQAIIAACAABAFAAAgCAIAAEAQAASAIAAACQBAABAABAAAEgCAACAACAAAIAEEAEAAEAAAQAIIAIAAIAAAgAAQBQAAQAABAAAgCgAAgAACAACAAgAAgAACAACAACABBAAAAAUAAEACCAAAAAoAAIAAEAQAABAABQAAIAgAACAACgAAQBAAAEAAEAAEgCAAAAoAAIAAIAEEAABAAggAgAAQBAEAACAKAABAEAAABIAgAAkAQAAAEgCAACAACAAAIAEEAEAAEAAAQAIIAIAAIAAAgAAQBQAAQAABAAAgCgAAgAACAABAEAAFAAAAAAUAAAAFAAAAAAUAAEABKFwEAAAQAAUAACAIAAAgAAoAAEAQAABAABAABIAgAACAACAACQBAAAEAAEAAEgCAAAIAAIAAIAEEAABAAggAgAAQBAEAACAKAABAEAAABIAgAAkAQAAAEgCAACAACAGp97nYsnGDLHFtzaNviuVwNBIAgAAgAQQA0QEnqnDWurEivK/MJqeF/v0tZ8BlXBQEgCAACQBAAlWIwhLUtS5te0Fj8ZyfrCW9JalShwWC4nKuEABAEAAFAABAAFbFv+5w77BnPun5U/melOmNcTc43b97J1UIA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"})]})]})},v=r(48171);function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(){j=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var i=t&&t.prototype instanceof v?t:v,a=Object.create(i.prototype),u=new _(n||[]);return o(a,"_invoke",{value:I(e,r,u)}),a}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",h="executing",y="completed",m={};function v(){}function g(){}function b(){}var w={};c(w,a,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(T([])));x&&x!==r&&n.call(x,a)&&(w=x);var E=b.prototype=v.prototype=Object.create(w);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,a,u){var l=f(e[o],e,i);if("throw"!==l.type){var c=l.arg,s=c.value;return s&&"object"==A(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,a,u)}),(function(e){r("throw",e,a,u)})):t.resolve(s).then((function(e){c.value=e,a(c)}),(function(e){return r("throw",e,a,u)}))}u(l.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=d;return function(i,a){if(o===h)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=P(u,n);if(l){if(l===m)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var c=f(t,r,n);if("normal"===c.type){if(o=n.done?y:p,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=y,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=f(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[a];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(A(t)+" is not iterable")}return g.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=c(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(O.prototype),c(O.prototype,u,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),c(E,l,"Generator"),c(E,a,(function(){return this})),c(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},t}function S(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function x(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){S(i,n,o,a,u,"next",e)}function u(e){S(i,n,o,a,u,"throw",e)}a(void 0)}))}}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O="writefull-integration",I={location:"notification",name:O};function P(){var e=(0,a.$G)().t,t=E((0,o.useState)(!1),2),r=t[0],n=t[1],A=(0,c._i)(),g=A.inactiveTutorials,w=A.deactivateTutorial,S=(0,v.Z)({initialState:!0});(0,o.useEffect)((function(){var e,t=(0,f.Z)("ol-user"),r=g.includes(O);(0,d.Z0)(O)&&!(null!==(e=t.writefull)&&void 0!==e&&e.enabled)&&!window.writefull&&!S&&!r?(s.BZ("promo-prompt",I),n(!0)):n(!1)}),[S,n,g]);var C=(0,o.useCallback)(function(){var e=x(j().mark((function e(t){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,p.ty)("/tutorial/".concat(O,"/").concat(t));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),h.c.error(e.t0);case 8:n(!1),w(O);case 10:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),[w,n]),P=(0,o.useCallback)(x(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.BZ("promo-click",b(b({},I),{},{button:"maybe-later"})),e.next=3,C("postpone");case 3:case"end":return e.stop()}}),e)}))),[C]),k=(0,o.useCallback)(x(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.BZ("promo-click",b(b({},I),{},{button:"try-it"})),e.prev=1,e.next=4,(0,p.BS)("/writefull/enabled",{body:{enabled:!0}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),h.c.error(e.t0);case 9:return e.next=11,C("complete");case 11:(0,u.m)();case 12:case"end":return e.stop()}}),e,null,[[1,6]])}))),[C]),R=(0,o.useCallback)(x(j().mark((function e(){return j().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.BZ("promo-dismiss",I),e.next=3,C("complete");case 3:case"end":return e.stop()}}),e)}))),[C]),_=(0,y.jsxs)("div",{children:[(0,y.jsx)(i.Z,{bsStyle:null,className:"btn-secondary",onClick:k,children:e("try_it_for_free")}),(0,y.jsx)(i.Z,{className:"btn-info-ghost",bsStyle:null,onClick:P,children:e("maybe_later")})]});return r?(0,y.jsx)(l.Z,{action:_,ariaLive:"polite",className:"writefull-notification ol-overlay",content:(0,y.jsx)("div",{children:(0,y.jsx)("p",{children:e("writefull_prompt_body")})}),customIcon:(0,y.jsx)("div",{className:"writefull-logo-bg",children:(0,y.jsx)(m,{width:"50",height:"50",background:"#fff"})}),isActionBelowContent:!0,isDismissible:!0,onDismiss:R,title:e("writefull_prompt_title"),type:"info"}):null}var k=P,R=r(28500),_=r(23357),T=r(48755),L=[{import:n,path:"/overleaf/services/web/modules/writefull/frontend/js/components/writefull-promotion"}],F=(0,o.lazy)((function(){return Promise.all([r.e(3539),r.e(1623),r.e(3546),r.e(7536),r.e(5085),r.e(7029),r.e(88),r.e(483),r.e(9516)]).then(r.bind(r,6667))}));function D(){return(0,y.jsxs)(o.Suspense,{fallback:(0,y.jsx)(R.w,{delay:500}),children:[L.map((function(e){var t=e.import.default,r=e.path;return(0,y.jsx)(t,{},r)})),(0,y.jsx)(F,{})]})}var B=(0,_.Z)((0,o.memo)(D),T.l)},21706:function(e,t,r){"use strict";var n=r(75234),o=r(63584),i=r(10280),a=r(39493),u=r(52322);t.Z=function(){var e=(0,a.l5)(),t=e.pdfLayout,r=e.setView,l=e.detachRole,c=(0,n.$G)().t;return l||"sideBySide"===t?null:(0,u.jsxs)(o.Z,{bsStyle:null,bsSize:"xs",onClick:function(){r("pdf")},className:"switch-to-pdf-btn toolbar-btn-secondary btn-secondary",children:[(0,u.jsx)(i.Z,{type:"file-pdf-o",className:"toolbar-btn-secondary-icon"}),(0,u.jsx)("span",{className:"toolbar-btn-secondary-text",children:c("switch_to_pdf")})]})}},17317:function(e,t,r){"use strict";r.d(t,{LK:function(){return l},UD:function(){return s},mB:function(){return f}});r(95342),r(58188),r(99805),r(32501),r(88233),r(26936),r(27233),r(28673),r(77950),r(21850),r(34115),r(634),r(20796),r(15735),r(6886),r(71372);var n=r(1727);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=n.Py.define(),u=n.Py.define(),l=function(){return[c]},c=n.QQ.define({create:function(){return[]},update:function(e,t){var r,n=o(t.effects);try{var i=function(){var t=r.value;t.is(a)&&e.push(t.value),t.is(u)&&(e=e.filter((function(e){return!(e.effect===t.value.effect&&e.callback===t.value.callback)})));for(var n=function(r){var n,i=e[r];t.is(i.effect)&&(setTimeout((function(){return i.callback(t.value)})),null!==(n=i.options)&&void 0!==n&&n.once&&(e.splice(r,1),--r));o=r},o=0;o<e.length;++o)n(o)};for(n.s();!(r=n.n()).done;)i()}catch(e){n.e(e)}finally{n.f()}return e}}),s=function(e,t,r,n){e.dispatch({effects:a.of({effect:t,callback:r,options:n})})},f=function(e,t,r){e.dispatch({effects:u.of({effect:t,callback:r})})}},78014:function(e,t,r){"use strict";r.d(t,{HY:function(){return w},Hs:function(){return v},J$:function(){return A},Z0:function(){return g},jv:function(){return b},op:function(){return S}});r(43450),r(58188),r(73439),r(15735),r(93244),r(28673),r(6886),r(26936),r(39529),r(31235),r(9575),r(96264),r(34115),r(634),r(71372),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775),r(32501),r(88233),r(27233),r(77950),r(21850),r(20796);var n=r(1727),o=r(65329),i=r(17317),a=r(6956),u=r(45177);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===l(t)?t:String(t)}function m(e,t){return e?p(p({},e),{},{from:t.mapPos(e.from),to:t.mapPos(e.to)}):e}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.props=t}var t,r,n;return t=e,(r=[{key:"from",get:function(){return this.props.from}},{key:"to",get:function(){return this.props.to}},{key:"caption",get:function(){return this.props.caption}},{key:"label",get:function(){return this.props.label}},{key:"width",get:function(){return this.props.width}},{key:"unknownGraphicsArguments",get:function(){return this.props.unknownGraphicsArguments}},{key:"graphicsCommandArguments",get:function(){return this.props.graphicsCommandArguments}},{key:"graphicsCommand",get:function(){return this.props.graphicsCommand}},{key:"file",get:function(){return this.props.file}},{key:"map",value:function(t){return new e({from:t.mapPos(this.from),to:t.mapPos(this.to),caption:m(this.caption,t),label:m(this.label,t),graphicsCommand:m(this.graphicsCommand,t),width:this.width,file:m(this.file,t),graphicsCommandArguments:m(this.graphicsCommandArguments,t),unknownGraphicsArguments:this.unknownGraphicsArguments})}}])&&f(t.prototype,r),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),A=n.Py.define(),g=n.QQ.define({create:function(){return null},update:function(e,t){var r,n,o=c(t.effects);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.is(A)&&(r=i.value)}}catch(e){o.e(e)}finally{o.f()}return void 0!==r?r:e?e.map(t.changes):e}}),b=function(){return[g]};function w(e){var t=new AbortController,r=new Promise((function(r){var n=function(){u.c.warn("Aborting wait for file tree update"),(0,i.mB)(e,a.tw,o),r()};function o(){t.signal.aborted||(t.signal.removeEventListener("abort",n),r())}t.signal.addEventListener("abort",n,{once:!0}),(0,i.UD)(e,a.tw,o,{once:!0})}));return{withTimeout:function(){return setTimeout((function(){return t.abort()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:500),r},promise:r}}var j=new Set(["image/jpeg","image/png","application/pdf"]),S=function(){return o.tk.domEventHandlers({drop:function(e){if(e.dataTransfer&&0!==e.dataTransfer.files.length){var t=e.dataTransfer.files[0];j.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}},paste:function(e){if(e.clipboardData&&0!==e.clipboardData.files.length&&!e.clipboardData.types.includes("text/plain")){var t=e.clipboardData.files[0];j.has(t.type)&&window.dispatchEvent(new CustomEvent("figure-modal:paste-image",{detail:{name:t.name,type:t.type,data:t}}))}}})}},6956:function(e,t,r){"use strict";r.d(t,{DN:function(){return v},L3:function(){return p},S3:function(){return A},dK:function(){return h},tw:function(){return y},uk:function(){return f},yC:function(){return m}});r(32501),r(58188),r(88233),r(26936),r(27233),r(28673),r(77950),r(21850),r(34115),r(634),r(20796),r(15735),r(6886),r(71372);var n=r(1727),o=r(9685),i=r(65329),a=r(77120),u=r(31931);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=n.Py.define(),f=(0,u.V9)(s),d=new n.F6,p=n.QQ.define({create:function(){},update:function(e,t){var r,n=l(t.effects);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.is(y))return o.value}}catch(e){n.e(e)}finally{n.f()}return e}}),h=function(e,t,r){var n=r.syntaxValidation,u=a.c6.matchFilename(o.M,e.docName);return u?[d.of(a.c.of("    ")),p,i.lg.define((function(e){return u.load().then((function(r){e.dispatch({effects:[d.reconfigure(r),s.of(null)]}),e.dispatch({effects:[y.of(t),v.of(n)]})})),{}})),p]:[]},y=n.Py.define(),m=function(e){return{effects:y.of(e)}},v=n.Py.define(),A=function(e){return{effects:v.of(e)}}},9685:function(e,t,r){"use strict";r.d(t,{M:function(){return o}});r(15735),r(58188),r(73439),r(28673),r(6886);var n=r(77120),o=[n.c6.of({name:"latex",extensions:["tex","sty","cls","clo","bst","bbl","pdf_tex","pdf_t","map","fd","enc","def","mf","pgf","tikz","bbx","cbx","dbx","lbx","lco","ldf","xmpdata","Rnw","lyx","inc","dtx","hak","eps_tex","brf","ins","hva","Rtex","rtex","pstex","pstex_t","gin","fontspec","pygstyle","pygtex","ps_tex"],load:function(){return Promise.all([r.e(3539),r.e(7536),r.e(7029),r.e(88),r.e(375)]).then(r.bind(r,10375)).then((function(e){return e.latex()}))}}),n.c6.of({name:"bibtex",extensions:["bib"],load:function(){return Promise.all([r.e(3539),r.e(5303)]).then(r.bind(r,5303)).then((function(e){return e.bibtex()}))}}),n.c6.of({name:"markdown",extensions:["md","markdown"],load:function(){return Promise.all([r.e(3539),r.e(915),r.e(7029),r.e(7544)]).then(r.bind(r,7544)).then((function(e){return e.markdown()}))}})]},49272:function(e,t,r){"use strict";r.r(t),r.d(t,{AffilCtrlSeq:function(){return ee},AffiliationCtrlSeq:function(){return te},Ampersand:function(){return ut},AuthorCtrlSeq:function(){return $},BareFilePathArgument:function(){return st},Begin:function(){return d},BibKeyArgument:function(){return Je},BibliographyCtrlSeq:function(){return X},BibliographyStyleCtrlSeq:function(){return Y},BlankLine:function(){return Oe},Book:function(){return Ut},BookCtrlSeq:function(){return B},BottomRuleCtrlSeq:function(){return le},BracketMath:function(){return It},CaptionCtrlSeq:function(){return P},CenteringCtrlSeq:function(){return J},Chapter:function(){return Gt},ChapterCtrlSeq:function(){return M},CiteCtrlSeq:function(){return m},CiteStarrableCtrlSeq:function(){return v},CloseBrace:function(){return Re},CloseBracket:function(){return Ze},CloseBracketCtrlSym:function(){return je},CloseBracketMath:function(){return kt},CloseParenCtrlSym:function(){return be},CloseParenMath:function(){return Tt},ColorBoxCtrlSeq:function(){return oe},Command:function(){return Fe},Comment:function(){return xe},Csname:function(){return c},CtrlSeq:function(){return nt},CtrlSym:function(){return Xe},DefCtrlSeq:function(){return k},DefinitionArgument:function(){return et},DefinitionFragment:function(){return rt},DisplayMath:function(){return Ot},DocumentClassCtrlSeq:function(){return j},DocumentEnvName:function(){return se},DocumentEnvironment:function(){return Pe},Dollar:function(){return ot},DollarMath:function(){return ht},End:function(){return p},EnvName:function(){return qe},Environment:function(){return Qe},EquationArrayEnvName:function(){return pe},EquationArrayEnvironment:function(){return Dt},EquationEnvName:function(){return de},EquationEnvironment:function(){return Ft},FigureEnvName:function(){return me},FigureEnvironment:function(){return Zt},FilePathArgument:function(){return Ke},HLineCtrlSeq:function(){return ie},HboxCtrlSeq:function(){return b},HrefCtrlSeq:function(){return x},IncludeCtrlSeq:function(){return V},IncludeGraphicsCtrlSeq:function(){return I},InlineMath:function(){return yt},InputCtrlSeq:function(){return G},ItemCtrlSeq:function(){return K},KnownCommand:function(){return De},KnownCtrlSym:function(){return it},KnownEnvironment:function(){return Ie},LaTeX:function(){return Ee},LabelArgument:function(){return ze},LabelCtrlSeq:function(){return A},LeftCtrlSeq:function(){return R},LineBreakCtrlSym:function(){return Se},ListEnvName:function(){return ve},ListEnvironment:function(){return Qt},LiteralArgContent:function(){return i},LongArg:function(){return Me},LstInlineContent:function(){return o},LstInlineCtrlSeq:function(){return O},MacroParameter:function(){return Ye},MaketitleCtrlSeq:function(){return re},Math:function(){return mt},MathChar:function(){return Ct},MathClosing:function(){return St},MathCommand:function(){return At},MathCtrlSym:function(){return gt},MathDelimitedGroup:function(){return wt},MathDelimiter:function(){return l},MathGroup:function(){return bt},MathOpening:function(){return jt},MathSpecialChar:function(){return xt},MathTextCommand:function(){return vt},MathTextCtrlSeq:function(){return g},MidRuleCtrlSeq:function(){return ue},MultiColumnCtrlSeq:function(){return ce},NewCommandCtrlSeq:function(){return T},NewEnvironmentCtrlSeq:function(){return F},NewLine:function(){return tt},NewTheoremCtrlSeq:function(){return z},Normal:function(){return at},Number:function(){return Et},OpenBrace:function(){return ke},OpenBracket:function(){return Te},OpenBracketCtrlSym:function(){return we},OpenBracketMath:function(){return Pt},OpenParenCtrlSym:function(){return ge},OpenParenMath:function(){return _t},OptionalArgument:function(){return _e},OptionalMacroParameter:function(){return $e},PackageArgument:function(){return Ge},Paragraph:function(){return Wt},ParagraphCtrlSeq:function(){return U},ParenMath:function(){return Rt},Part:function(){return Ht},PartCtrlSeq:function(){return N},RefArgument:function(){return We},RefCtrlSeq:function(){return h},RefStarrableCtrlSeq:function(){return y},RenewCommandCtrlSeq:function(){return L},RenewEnvironmentCtrlSeq:function(){return D},RightCtrlSeq:function(){return _},Section:function(){return Vt},SectionCtrlSeq:function(){return Z},SectioningArgument:function(){return ct},ShortArg:function(){return He},ShortOptionalArg:function(){return Le},ShortTextArgument:function(){return Ue},SpaceDelimitedLiteralArgContent:function(){return a},SubParagraph:function(){return Jt},SubParagraphCtrlSeq:function(){return H},SubSection:function(){return Kt},SubSectionCtrlSeq:function(){return Q},SubSubSection:function(){return zt},SubSubSectionCtrlSeq:function(){return q},TableEnvName:function(){return Ae},TableEnvironment:function(){return qt},TabularArgument:function(){return ft},TabularContent:function(){return dt},TabularEnvName:function(){return fe},TabularEnvironment:function(){return Lt},Text:function(){return Ce},TextArgument:function(){return Ne},TextColorCtrlSeq:function(){return ne},TheoremStyleCtrlSeq:function(){return W},TikzPictureContent:function(){return Mt},TikzPictureEnvName:function(){return ye},TikzPictureEnvironment:function(){return Nt},Tilde:function(){return lt},TitleCtrlSeq:function(){return w},TopRuleCtrlSeq:function(){return ae},TrailingContent:function(){return f},TrailingWhitespaceOnly:function(){return s},UnknownCommand:function(){return pt},UrlArgument:function(){return Ve},UrlCtrlSeq:function(){return E},UsePackageCtrlSeq:function(){return S},VerbContent:function(){return n},VerbCtrlSeq:function(){return C},VerbatimContent:function(){return u},VerbatimEnvName:function(){return he},VerbatimEnvironment:function(){return Bt},Whitespace:function(){return Be}});var n=1,o=2,i=3,a=4,u=5,l=6,c=7,s=8,f=9,d=10,p=11,h=12,y=13,m=14,v=15,A=16,g=17,b=18,w=19,j=20,S=21,x=22,E=23,C=24,O=25,I=26,P=27,k=28,R=29,_=30,T=31,L=32,F=33,D=34,B=35,N=36,M=37,Z=38,Q=39,q=40,U=41,H=42,G=43,V=44,K=45,z=46,W=47,J=48,X=49,Y=50,$=51,ee=52,te=53,re=54,ne=55,oe=56,ie=57,ae=58,ue=59,le=60,ce=61,se=62,fe=63,de=64,pe=65,he=66,ye=67,me=68,ve=69,Ae=70,ge=71,be=72,we=73,je=74,Se=75,xe=76,Ee=77,Ce=78,Oe=79,Ie=80,Pe=81,ke=84,Re=85,_e=86,Te=87,Le=88,Fe=89,De=90,Be=92,Ne=93,Me=94,Ze=95,Qe=97,qe=100,Ue=108,He=109,Ge=116,Ve=120,Ke=128,ze=131,We=133,Je=135,Xe=137,Ye=138,$e=139,et=140,tt=141,rt=142,nt=143,ot=145,it=146,at=148,ut=149,lt=150,ct=152,st=162,ft=172,dt=173,pt=174,ht=175,yt=176,mt=177,vt=178,At=179,gt=180,bt=181,wt=182,jt=183,St=184,xt=185,Et=186,Ct=187,Ot=190,It=191,Pt=192,kt=193,Rt=194,_t=195,Tt=196,Lt=199,Ft=204,Dt=209,Bt=213,Nt=218,Mt=222,Zt=225,Qt=229,qt=233,Ut=238,Ht=241,Gt=244,Vt=247,Kt=250,zt=253,Wt=256,Jt=259},31931:function(e,t,r){"use strict";r.d(t,{B:function(){return n},Bn:function(){return i},V9:function(){return o}});r(58188),r(49228);var n=function(e){return function(t){return t.effects.some((function(t){return t.is(e)}))}},o=function(e){return function(t){return t.transactions.some((function(t){return t.effects.some((function(t){return t.is(e)}))}))}},i=function(e){return function(t){return t.effects.find((function(t){return t.is(e)}))}}},30864:function(e,t,r){"use strict";r.d(t,{DC:function(){return a},Mt:function(){return i},rG:function(){return o}});r(58188),r(26936),r(9575),r(96264),r(34115),r(634),r(71372),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775),r(20796),r(15735),r(28673),r(6886);var n=r(77120);var o=function(e,t,r){var o=(0,n.l)(e,t,100);if(!o)return null;var i=o.resolve(t),a=null==i?void 0:i.prevSibling;return(null==a?void 0:a.type.name)===r},i=function(e,t){var r=t.getChild("ShortOptionalArg");if(r)return e.doc.sliceString(r.from,r.to)},a=function(e,t,r){if(!e.type.is("UnknownCommand"))return!1;var n=e.getChild("CtrlSeq");return!!n&&r.doc.sliceString(n.from,n.to)===t}},77904:function(e,t,r){"use strict";r.d(t,{M2:function(){return f},Oh:function(){return d},RV:function(){return s},XP:function(){return a},a5:function(){return l},dr:function(){return c},y4:function(){return u}});r(18178),r(77950),r(85940),r(74069),r(9575),r(96264),r(34115),r(634),r(58188),r(71372),r(71245),r(96928),r(92215),r(61229),r(20796),r(15735),r(28673),r(6886);var n=r(77120),o=r(30864),i=(r(759),r(78014));var a=function(e,t,r,n){if(t.type.is("EnvNameGroup")){var o;if(!n(t.node))return!1;if(null===(o=t.node.prevSibling)||void 0===o||!o.type.is("Begin"))return!1;var i=t.node.getChild("OpenBrace");if(!i)return!1;var a=i.node.nextSibling;if(!a)return!1;var u=e.doc.sliceString(a.from,a.to);if(u.length<1)return!1;var l={title:u,from:a.from,to:a.to,line:e.doc.lineAt(a.from).number};r.push(l)}else if(t.type.is("NewEnvironment")||t.type.is("RenewEnvironment")){if(!n(t.node))return!1;var c=t.node.getChild("LiteralArgContent");if(!c)return;var s=e.doc.sliceString(c.from,c.to);if(!s)return;var f={title:s,from:c.from,to:c.to,line:e.doc.lineAt(c.from).number};r.push(f)}},u=function(e,t){var r=(0,n.l)(e,t,100);if(r){var i=r.resolve(t);if(i){if(i.type.is("EnvNameGroup")&&(0,o.rG)(e,t,"Begin"))return!0;if(i.type.is("$Environment")||i.type.is("LaTeX")&&t===e.doc.length){if(!(i=r.resolve(t,-1)))return;if(i.type.is("OpenBrace")||i.type.is("$EnvName"))return!0}}}},l=function(e,t){var r=(0,n.l)(e,t,100);if(r){var i=r.resolve(t);if(i){if(i.type.is("EnvNameGroup")&&(0,o.rG)(e,t,"End"))return!0;if(i.type.is("$Environment")||i.type.is("Content")){if(!(i=r.resolve(t,-1)))return;if(i.type.is("OpenBrace")||i.type.is("EnvName"))return!0}}}};function c(e,t){var r,n,o,i;if(null!==(r=e)&&void 0!==r&&r.type.is("$Environment")&&(e=e.getChild("BeginEnv")),!(null!==(n=e)&&void 0!==n&&n.type.is("BeginEnv")||null!==(o=e)&&void 0!==o&&o.type.is("EndEnv")))return null;var a=null===(i=e)||void 0===i||null===(i=i.getChild("EnvNameGroup"))||void 0===i||null===(i=i.getChild("OpenBrace"))||void 0===i?void 0:i.nextSibling;return a?a.type.is("CloseBrace")?null:t.sliceDoc(a.from,a.to):null}var s=function(e,t){var r;return null===(r=c(e,t))||void 0===r?void 0:r.replace(/\*$/,"")};function f(e){var t;return null===(t=e.getChild("BeginEnv"))||void 0===t?void 0:t.getChildren("TextArgument")}function d(e,t){var r,n,o,a,u=null,l=null,c=null,s=e.from,f=e.to,d=!1;return e.cursor().iterate((function(e){if(d)return!1;if(e.type.is("Caption")){if(u)return d=!0,!1;u={from:e.from,to:e.to}}if(e.type.is("Label")){if(l)return d=!0,!1;l={from:e.from,to:e.to}}if(e.type.is("IncludeGraphics")){var i,s;if(r)return d=!0,!1;a={from:e.from,to:e.to};var f=null===(i=e.node.getChild("IncludeGraphicsArgument"))||void 0===i||null===(i=i.getChild("FilePathArgument"))||void 0===i?void 0:i.getChild("LiteralArgContent");if(!f)return d=!0,!1;r={from:f.from,to:f.to,path:t.sliceDoc(f.from,f.to)};var p=null===(s=e.node.getChild("OptionalArgument"))||void 0===s?void 0:s.getChild("ShortOptionalArg");if(!p)return n=void 0,!1;c={from:p.from,to:p.to};var h=t.sliceDoc(p.from,p.to),y=h.match(/^width=([0-9]|(?:[0-9]*\.[0-9]+)|(?:[0-9]+\.))\\(linewidth|pagewidth|textwidth|hsize|columnwidth)$/);y?(n=parseFloat(y[1]),"linewidth"!==y[2]&&(o=h)):o=h}})),d||void 0===a||void 0===r?null:new i.Hs({caption:u,label:l,file:r,from:s,to:f,width:n,unknownGraphicsArguments:o,graphicsCommand:a,graphicsCommandArguments:c})}},85209:function(e,t,r){"use strict";r.d(t,{XP:function(){return f},zz:function(){return p}});r(18178),r(16781),r(43450),r(9575),r(96264),r(34115),r(634),r(58188),r(71372),r(71245),r(96928),r(92215),r(61229),r(32501),r(88233),r(26936),r(27233),r(28673),r(77950),r(21850),r(20796),r(15735),r(6886),r(759);var n=r(49272),o=r(77904);function i(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){l=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(l)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u=function(e){return e[e.Book=1]="Book",e[e.Part=2]="Part",e[e.Chapter=3]="Chapter",e[e.Section=4]="Section",e[e.SubSection=5]="SubSection",e[e.SubSubSection=6]="SubSubSection",e[e.Paragraph=7]="Paragraph",e[e.SubParagraph=8]="SubParagraph",e[e.Frame=9]="Frame",e[e.Invalid=-1]="Invalid",e}(u||{}),l={book:u.Book,part:u.Part,chapter:u.Part,section:u.Section,subsection:u.SubSection,subsubsection:u.SubSubSection,paragraph:u.Paragraph,subparagraph:u.SubParagraph,frame:u.Frame},c=function(e){var t;if("string"==typeof e)return null!==(t=l[e])&&void 0!==t?t:u.Invalid;switch(e){case n.Book:return u.Book;case n.Part:return u.Part;case n.Chapter:return u.Chapter;case n.Section:return u.Section;case n.SubSection:return u.SubSection;case n.SubSubSection:return u.SubSubSection;case n.Paragraph:return u.Paragraph;case n.SubParagraph:return u.SubParagraph;default:return u.Invalid}},s=function(e,t){var r=[];return t.node.cursor().iterate((function(n){return!(n.from>=t.to)&&(!n.type.is("Label")&&(!!n.node.firstChild||void r.push(e.doc.sliceString(n.from,n.to))))})),r.join("")},f=function(e,t,r,n){if(t.type.is("SectioningCommand")){var i,a=t.node,l=a.parent;if(!n(a))return;var f=null===(i=a.getChild("SectioningArgument"))||void 0===i?void 0:i.getChild("LongArg");if(!f)return;for(var d=l;d;d=d.parent)if(d.type.is("NewCommand")||d.type.is("RenewCommand"))return!1;var p=null!=l&&l.type.is("$SectioningCommand")?c(l.type.id):c((y=a.firstChild)?e.doc.sliceString(y.from+1,y.to):""),h={line:e.doc.lineAt(a.from).number,title:s(e,f),from:a.from,to:a.to,level:p};r.push(h)}var y;if(t.type.is("$Environment")){var m=t.node;if("frame"===(0,o.dr)(m,e)){var v,A=m.getChild("BeginEnv");if(!n(A))return;var g=null===(v=(0,o.M2)(m))||void 0===v?void 0:v.map((function(e){return e.getChild("LongArg")}));if(null!=g&&g.length){var b=g[0],w=b?e.sliceDoc(b.from,b.to):"",j={line:e.doc.lineAt(A.from).number,title:w,from:A.from,to:A.to,level:u.Frame};r.push(j)}}}},d=function(e){return{title:e.title,line:e.line,level:e.level}},p=function(e){var t,r=[],n=[],o=i(e);try{for(o.s();!(t=o.n()).done;){for(var a=t.value,u=d(a);r.length&&r[r.length-1].level>=u.level;)r.pop();if(r.length){var l=r[r.length-1];l.children?l.children.push(u):l.children=[u],r.push(u)}else r.push(u),n.push(u)}}catch(e){o.e(e)}finally{o.f()}return n}},759:function(e,t,r){"use strict";r.d(t,{vt:function(){return d},y0:function(){return h}});r(43450),r(95342),r(58188),r(43430),r(9575),r(96264),r(34115),r(634),r(71372),r(71245),r(34769),r(68625),r(1939),r(62775),r(20796),r(15735),r(28673),r(6886);var n=r(77120),o=r(21649);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return(t=c(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}var s=20,f=500,d=function(e){return e[e.Pending=0]="Pending",e[e.Partial=1]="Partial",e[e.Complete=2]="Complete",e}({}),p=function(e,t,r,n){return!(t<r||e>n)};function h(e,t,r,i,a){var l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6?arguments[6]:void 0,h=arguments.length>7?arguments[7]:void 0,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:{items:[],status:d.Pending},m=y.status===d.Complete?y.items.filter((function(e){return!p(e.from,e.to,t,r)})).map((function(e){return function(e,t){if(!t)return e;var r=e.from,n=e.to,o=t.changes.mapPos(r),i=t.changes.mapPos(n),a=t.state.doc.lineAt(o).number;return o===r&&i===n&&a===e.line?e:u(u({},e),{},{from:o,to:i,line:a})}(e,h)})):[];y.status!==d.Complete&&(a=e.doc.length,i=0);var v=(0,n.l)(e,a,l?f:s);return v?(v.iterate({from:i,to:a,enter:function(t){return c(e,t,m,(function(e){return p(e.from,e.to,i,a)}))},mode:o.vj.IgnoreMounts|o.vj.IgnoreOverlays}),{status:d.Complete,items:m.sort((function(e,t){return e.from-t.from}))}):y.status!==d.Pending?{status:d.Partial,items:y.items}:{items:[],status:d.Pending}}},7585:function(e,t,r){"use strict";r.d(t,{K8:function(){return a},WP:function(){return u},mr:function(){return i},oT:function(){return l}});var n=r(19034),o=r.n(n);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm a";return o()(e).format(t)}function a(e){return o()(e).calendar()}function u(e){return o()().diff(e,"years")>0?i(e,"D MMMM YYYY, h:mm a"):i(e,"D MMMM, h:mm a")}function l(e){return Date.parse(e)/1e3}o().updateLocale("en",{calendar:{lastDay:"[Yesterday]",sameDay:"[Today]",nextDay:"[Tomorrow]",lastWeek:"ddd, Do MMM YY",nextWeek:"ddd, Do MMM YY",sameElse:"ddd, Do MMM YY"}})},73545:function(e,t,r){"use strict";r(15735),r(58188),r(73439),r(28673),r(6886);var n=r(24991),o=r(75234),i=window.i18n.currentLangCode;n.ZP.use(o.Db).init({lng:i,compatibilityJSON:"v3",react:{useSuspense:!1,bindI18nStore:"added",transSupportBasicHtmlNodes:!1},interpolation:{prefix:"__",suffix:"__",unescapeSuffix:"HTML",skipOnVariables:!0,escapeValue:!1,defaultVariables:{appName:window.ExposedSettings.appName}}});var a=r(88135)("./".concat(i,".json")).then((function(e){n.ZP.addResourceBundle(i,"translation",e)}));t.Z=a},14642:function(e,t,r){"use strict";r(49228),r(58188),r(27233),r(28673),r(77950),r(74069),r(32501),r(88233),r(34115),r(634),r(20796),r(15735),r(6886),r(26936),r(21850),r(71372);var n=r(79174),o=r.n(n);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.Z={getColorScheme:function(e,t){return this.isDarkTheme(t)?{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 100%, 28%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 100%, 20%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 100%, 60%);")}:{cursor:"hsl(".concat(e,", 70%, 50%)"),labelBackgroundColor:"hsl(".concat(e,", 70%, 50%)"),highlightBackgroundColor:"hsl(".concat(e,", 70%, 85%);"),strikeThroughBackgroundColor:"hsl(".concat(e,", 70%, 95%);"),strikeThroughForegroundColor:"hsl(".concat(e,", 70%, 40%);")}},isDarkTheme:function(e){var t=e.find(".ace_editor").css("background-color"),r=i(Array.from(t.match(/rgb\(([0-9]+), ([0-9]+), ([0-9]+)\)/)),4),n=(r[0],r[1]),o=r[2],a=r[3];return(n=parseInt(n,10))+(o=parseInt(o,10))+(a=parseInt(a,10))<384},ANONYMOUS_HUE:100,OWN_HUE:200,OWN_HUE_BLOCKED_SIZE:20,TOTAL_HUES:360,getHueForUserId:function(e){if(null==e||"anonymous-user"===e)return this.ANONYMOUS_HUE;if(window.user.id===e)return this.OWN_HUE;var t=this.getHueForId(e);return t>this.OWN_HUE-this.OWN_HUE_BLOCKED_SIZE&&t<this.OWN_HUE+this.OWN_HUE_BLOCKED_SIZE&&(t=(t-=this.OWN_HUE)+this.TOTAL_HUES-this.OWN_HUE_BLOCKED_SIZE),t},getHueForTagId:function(e){return this.getHueForId(e)},getHueForId:function(e){var t=o()(e);return parseInt(t.toString().slice(0,8),16)%(this.TOTAL_HUES-2*this.OWN_HUE_BLOCKED_SIZE)}}},43363:function(e,t,r){"use strict";r.d(t,{A:function(){return C},N:function(){return k}});r(39529),r(31235),r(58188),r(1939),r(95342),r(43430),r(43450),r(32501),r(88233),r(26936),r(27233),r(28673),r(77950),r(21850),r(34115),r(634),r(20796),r(15735),r(6886),r(71372);var n=r(1727),o=r(76635),i=r(34097),a=r(99618),u=r(45177);function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s="CM6-BeforeUpdate",f="CM6-AfterUpdate",d="CM6-DomUpdate",p="CM6-Update",h="CM6-Keypress-Measure",y=0,m=Date.now(),v=!1;try{var A="featureTestMark";performance.mark(A,{startTime:performance.now(),detail:{test:1}}),performance.clearMarks(A);var g="featureTestMeasure";performance.measure(g,{start:performance.now(),detail:{test:1}}),performance.clearMeasures(g),v=!0}catch(e){}var b=!1;function w(){return performance.memory.usedJSHeapSize}try{"memory"in window.performance&&(w(),b=!0)}catch(e){}var j=!1,S=0;try{if(PerformanceObserver.supportedEntryTypes.includes("longtask"))j=!0,new PerformanceObserver((function(e){S+=e.getEntries().length})).observe({entryTypes:["longtask"]})}catch(e){}function x(e){return!!e&&["input","delete"].includes(e.split(".")[0])}function E(e){return!!e&&["input.type","delete.forward","delete.backward"].includes(e)}function C(){if(!v)return{start:function(){},end:function(){}};var e=0,t=0,r=[];return{start:function(e){var t=performance.now();e.forEach((function(e){E(e.annotation(n.YW.userEvent))&&r.push(t)})),performance.mark(s)},end:function(o,i){performance.mark(f);var a=!1;o.forEach((function(r){var o=r.annotation(n.YW.userEvent);x(o)&&(a=!0,++e,E(o)&&++t,performance.measure(p,{start:s,end:f,detail:{userEventType:o,userEventsSinceDomUpdateCount:e}}))})),a&&i.requestMeasure({key:"inputEventCounter",read:function(){performance.mark(d,{detail:{keypressesSinceDomUpdateCount:t}}),e=0,t=0;for(var n=performance.now(),o=0,i=r;o<i.length;o++){var a=i[o];performance.measure(h,{start:a,end:n})}r.length=0}}),y=o[o.length-1].state.doc.length}}}function O(e){return 0===e.length?0:e.reduce((function(e,t){return e+t}),0)/e.length}function I(e){return e.reduce((function(e,t){return Math.max(e,t)}),0)}function P(e){switch(e){case"measure":performance.clearMeasures(p),performance.clearMarks(s),performance.clearMarks(f);break;case"dom":performance.clearMarks(d);break;case"keypress":performance.clearMeasures(h)}}function k(){var e,t=performance.getEntriesByName(p,"measure");P("measure");var r,n=t.filter((function(e){return x(e.detail.userEventType)})),u=n.map((function(e){return e.duration})).sort((function(e,t){return e-t})),c=(0,o.round)(I(u),2),s=(0,o.round)(O(u),2),f=(0,o.round)(function(e){if(0===e.length)return 0;var t=Math.floor(e.length/2);return e.length%2==0?(e[t-1]+e[t])/2:e[t]}(u),2),v=(0,o.round)(0===(r=u).length?0:r[Math.round(.95*(r.length-1))],2),A=I(n.map((function(e){return e.detail.userEventsSinceDomUpdateCount}))),g=(0,i.Z)(),E=Math.floor((Date.now()-m)/1e3),C=b?w():null,k=performance.getEntriesByName(d,"mark");P("dom");var R,_=0,T=0,L=0,F=0,D=l(k);try{for(D.s();!(R=D.n()).done;){var B=R.value.detail.keypressesSinceDomUpdateCount;1===B?++T:B>1&&++_,B>L&&(L=B),F+=B}}catch(e){D.e(e)}finally{D.f()}var N=(0,o.round)(_/(_+T),4),M=(0,o.round)(F/(_+T),4),Z=performance.getEntriesByName(h,"measure").map((function(e){return e.duration})),Q=(0,o.round)(O(Z),2);P("keypress");var q=null;j&&(q=S,S=0);var U=(null===(e=(0,a.Z)("ol-ExposedSettings"))||void 0===e?void 0:e.sentryRelease)||null;return{max:c,mean:s,median:f,ninetyFifthPercentile:v,maxUserEventsBetweenDomUpdates:A,docLength:y,numberOfEntries:u.length,grammarly:g,sessionLength:E,memory:C,lags:_,nonLags:T,longestLag:L,meanLagsPerMeasure:N,meanKeypressesPerMeasure:M,meanKeypressPaint:Q,longTasks:q,release:U}}window.addEventListener("editor:visual-switch",(function(){P("measure"),P("dom"),P("keypress")})),window._reportCM6Perf=function(){u.c.warn(k())}},28684:function(e,t,r){"use strict";r.d(t,{BS:function(){return g},K$:function(){return b},kp:function(){return j},ty:function(){return A},xA:function(){return v}});r(34769),r(95342),r(68625),r(1939),r(62775),r(96928),r(92215),r(61229),r(20796),r(15735),r(28673),r(6886),r(96882),r(38859),r(17525),r(18275),r(32501),r(6710),r(58188),r(73439),r(26936),r(9575),r(96264),r(34115),r(634),r(71372),r(71245),r(77950),r(21850);var n=r(91601),o=["body","headers","method","credentials","swallowAbortError"];function i(){i=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},u="function"==typeof Symbol?Symbol:{},l=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",s=u.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var i=t&&t.prototype instanceof g?t:g,a=Object.create(i.prototype),u=new _(n||[]);return o(a,"_invoke",{value:I(e,r,u)}),a}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var h="suspendedStart",y="suspendedYield",m="executing",v="completed",A={};function g(){}function b(){}function w(){}var j={};f(j,l,(function(){return this}));var S=Object.getPrototypeOf,x=S&&S(S(T([])));x&&x!==r&&n.call(x,l)&&(j=x);var E=w.prototype=g.prototype=Object.create(j);function C(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,i,u,l){var c=p(e[o],e,i);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,l)}),(function(e){r("throw",e,u,l)})):t.resolve(f).then((function(e){s.value=e,u(s)}),(function(e){return r("throw",e,u,l)}))}l(c.arg)}var i;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}})}function I(t,r,n){var o=h;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var u=n.delegate;if(u){var l=P(u,n);if(l){if(l===A)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var c=p(t,r,n);if("normal"===c.type){if(o=n.done?v:y,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=v,n.method="throw",n.arg=c.arg)}}}function P(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,P(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),A;var i=p(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,A;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,A):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,A)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[l];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(a(t)+" is not iterable")}return b.prototype=w,o(E,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,f(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},C(O.prototype),f(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new O(d(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(E),f(E,s,"Generator"),f(E,l,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var r=this;function o(n,o){return u.type="throw",u.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],u=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var l=n.call(a,"catchLoc"),c=n.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:T(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),A}},t}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(e){return void r(e)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,m(n.key),n)}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=d(e);if(t){var o=d(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return(t=m(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function v(e,t){return S(e,h(h({},t),{},{method:"GET"}))}function A(e,t){return S(e,h(h({},t),{},{method:"POST"}))}function g(e,t){return S(e,h(h({},t),{},{method:"PUT"}))}function b(e,t){return S(e,h(h({},t),{},{method:"DELETE"}))}function w(e){var t;if(!e)return"Unknown Error";return null!==(t={400:"Bad Request",401:"Unauthorized",403:"Forbidden",404:"Not Found",429:"Too Many Requests",500:"Internal Server Error",502:"Bad Gateway",503:"Service Unavailable"}[e])&&void 0!==t?t:"Unexpected Error: ".concat(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(FetchError,e);var t,r,n,o=f(FetchError);function FetchError(e,t,r,n,i){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FetchError),e||(e=w(null==n?void 0:n.status)),(a=o.call(this,e,{statusCode:n?n.status:void 0})).url=t,a.options=r,a.response=n,a.data=i,a}return t=FetchError,(r=[{key:"getErrorMessageKey",value:function(){var e;return null===(e=this.data)||void 0===e||null===(e=e.message)||void 0===e?void 0:e.key}},{key:"getUserFacingMessage",value:function(){var e,t,r,n=null===(e=this.response)||void 0===e?void 0:e.status,o=w(n),i=(null===(t=this.data)||void 0===t||null===(t=t.message)||void 0===t?void 0:t.text)||(null===(r=this.data)||void 0===r?void 0:r.message);if(i&&i!==o)return i;var a={400:"Invalid Request. Please correct the data and try again.",403:"Session error. Please check you have cookies enabled. If the problem persists, try clearing your cache and cookies.",429:"Too many attempts. Please wait for a while and try again."};return n&&a[n]?a[n]:"Something went wrong. Please try again."}}])&&c(t.prototype,r),n&&c(t,n),Object.defineProperty(t,"prototype",{writable:!1}),FetchError}(r.n(n)());function S(e,t){var r=t.body,n=t.headers,i=void 0===n?{}:n,a=t.method,u=void 0===a?"GET":a,c=t.credentials,s=void 0===c?"same-origin":c,f=t.swallowAbortError,d=void 0===f||f,p=h(h({},l(t,o)),{},{headers:h(h({},i),{},{"Content-Type":"application/json","X-Csrf-Token":window.csrfToken,Accept:"application/json"}),credentials:s,method:u});return void 0!==r&&(p.body=JSON.stringify(r)),new Promise((function(t,r){fetch(e,p).then((function(n){return function(e){return x.apply(this,arguments)}(n).then((function(o){n.ok?t(o):r(new j(n.statusText,e,p,n,o))}),(function(t){d&&"AbortError"===t.name||r(new j("There was an error parsing the response body",e,p,n).withCause(t))}))}),(function(t){d&&"AbortError"===t.name||r(new j("There was an error fetching the JSON",e,p).withCause(t))}))}))}function x(){var e;return e=i().mark((function e(t){var r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.headers.get("Content-Type")){e.next=3;break}return e.abrupt("return",{});case 3:if(!/application\/json/.test(r)){e.next=5;break}return e.abrupt("return",t.json());case 5:if(!/text\/plain/.test(r)){e.next=10;break}return e.next=8,t.text();case 8:return n=e.sent,e.abrupt("return",{message:n});case 10:if(!/text\/html/.test(r)){e.next=16;break}return e.next=13,t.text();case 13:if(o=e.sent,/^\s*</.test(o)){e.next=16;break}return e.abrupt("return",{message:o});case 16:return e.abrupt("return",{});case 17:case"end":return e.stop()}}),e)})),x=function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))},x.apply(this,arguments)}},45643:function(e,t,r){"use strict";r.d(t,{Vs:function(){return o},eR:function(){return i},xG:function(){return a}});r(15735),r(58188),r(28673),r(6886),r(60523),r(28399),r(88233);var n=r(96227);function o(e,t,r,o){var i={"paywall-type":e};o&&(i.variant=o),n.lW("subscription-funnel","upgraded-free-trial",e),n.BZ("paywall-click",i);var a=new URLSearchParams({itm_campaign:e});t&&a.set("itm_content",t),r&&(r.startedFreeTrial=!0),window.open("/user/subscription/choose-your-plan?".concat(a.toString()))}function i(e,t){var r=window.open();!function(){"function"==typeof ga&&ga("send","event","subscription-funnel","upgraded-plan",e);t&&(t.startedFreeTrial=!0),r.location="/user/subscription"}()}function a(e){n.BZ("paywall-prompt",{"paywall-type":e})}},79477:function(e,t,r){"use strict";r(17368),r(24471),r(77950),r(51172),r(88233),r(16781),r(21850);t.Z=function(e){return new RegExp("\\.(".concat(window.ExposedSettings.validRootDocExtensions.join("|"),")$"),"i").test(e)}},28500:function(e,t,r){"use strict";r.d(t,{w:function(){return s}});r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372);var n=r(75234),o=r(10280),i=r(2784),a=r(52322);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e){var t=e.delay,r=void 0===t?0:t,l=(0,n.$G)().t,c=u((0,i.useState)(!1),2),s=c[0],f=c[1];return(0,i.useEffect)((function(){var e=window.setTimeout((function(){f(!0)}),r);return function(){window.clearTimeout(e)}}),[r]),s?(0,a.jsxs)("div",{className:"loading",children:[(0,a.jsx)(o.Z,{type:"refresh",fw:!0,spin:!0})," ",l("loading"),"…"]}):null}function s(e){var t=e.delay,r=void 0===t?0:t,n=e.minHeight;return(0,a.jsx)("div",{className:"full-size-loading-spinner-container",style:{minHeight:n},children:(0,a.jsx)(c,{delay:r})})}t.Z=c},22866:function(e,t,r){"use strict";r.d(t,{KU:function(){return b},_i:function(){return w}});r(26936),r(18178),r(16781),r(71372),r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(27233),r(77950),r(21850);var n=r(2784),o=r(13980),i=r.n(o),a=r(37246),u=r(73091),l=r(96931),c=r(13364),s=r(2976),f=r(99618),d=r(80564),p=r(2982),h=r(52322);function y(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=(0,n.createContext)();function b(e){var t=e.children,r=(0,l.I)(),o=(0,d.SE)().id,v=(0,s.JY)().role,A=(0,c.d2)({owner:i().shape({_id:i().string.isRequired}),features:i().shape({compileGroup:i().string}),_id:i().string.isRequired}),b=A.owner,w=A.features,j=A._id,S=(0,n.useMemo)((function(){return window.brandVariation?{logoImgUrl:window.brandVariation.logo_url,brandVariationName:window.brandVariation.name,brandVariationId:window.brandVariation.id,brandId:window.brandVariation.brand_id,brandVariationHomeUrl:window.brandVariation.home_url,publishGuideHtml:window.brandVariation.publish_guide_html,partner:window.brandVariation.partner,brandedMenu:window.brandVariation.branded_menu,submitBtnHtml:window.brandVariation.submit_button_html}:void 0}),[]),x=m((0,a.Z)("state.loading"),1)[0],E=m((0,a.Z)("project.name"),2),C=E[0],O=E[1],I=m((0,a.Z)("permissionsLevel"),2),P=I[0],k=I[1],R=m((0,a.Z)("editor.showSymbolPalette"),1)[0],_=m((0,a.Z)("editor.toggleSymbolPalette"),1)[0],T=m((0,n.useState)((function(){return(0,f.Z)("ol-inactiveTutorials",[])})),2),L=T[0],F=T[1],D=(0,n.useCallback)((function(e){F([].concat(y(L),[e]))}),[L]);(0,n.useEffect)((function(){if(null!=r&&r.socket)return r.socket.on("projectNameUpdated",O),function(){return r.socket.removeListener("projectNameUpdated",O)}}),[null==r?void 0:r.socket,O]);var B=(0,n.useCallback)((function(e){O((function(t){return t!==e&&(0,p.W)(j,{name:e}).catch((function(e){O(t);var n=e.data;return 400===e.status?r.showGenericMessageModal("Error renaming project",n):r.showGenericMessageModal("Error renaming project","Please try again in a moment")})),e}))}),[r,O,j]),N=(0,u.Z)().setTitle;(0,n.useEffect)((function(){var e=[];"detached"===v&&e.push("[PDF]"),C&&(e.push(C),e.push("-")),e.push("Online LaTeX Editor"),e.push(window.ExposedSettings.appName);var t=e.join(" ");N(t)}),[C,N,v]);var M=(0,n.useCallback)((function(e){window.dispatchEvent(new CustomEvent("editor:insert-symbol",{detail:e}))}),[]),Z=(0,n.useMemo)((function(){return{cobranding:S,hasPremiumCompile:"priority"===(null==w?void 0:w.compileGroup),loading:x,renameProject:B,permissionsLevel:P,setPermissionsLevel:k,isProjectOwner:(null==b?void 0:b._id)===o,isRestrictedTokenMember:(0,f.Z)("ol-isRestrictedTokenMember"),showSymbolPalette:R,toggleSymbolPalette:_,insertSymbol:M,inactiveTutorials:L,deactivateTutorial:D}}),[S,null==w?void 0:w.compileGroup,b,o,x,B,P,k,R,_,M,L,D]);return(0,h.jsx)(g.Provider,{value:Z,children:t})}function w(e){var t=(0,n.useContext)(g);if(!t)throw new Error("useEditorContext is only available inside EditorProvider");return i().checkPropTypes(e,t,"data","EditorContext.Provider"),t}g.Provider.propTypes={value:i().shape({cobranding:i().shape({logoImgUrl:i().string.isRequired,brandVariationName:i().string.isRequired,brandVariationId:i().number.isRequired,brandId:i().number.isRequired,brandVariationHomeUrl:i().string.isRequired,publishGuideHtml:i().string,partner:i().string,brandedMenu:i().bool,submitBtnHtml:i().string}),hasPremiumCompile:i().bool,loading:i().bool,renameProject:i().func.isRequired,showSymbolPalette:i().bool,toggleSymbolPalette:i().func,insertSymbol:i().func,isProjectOwner:i().bool,isRestrictedTokenMember:i().bool,permissionsLevel:i().oneOf(["readOnly","readAndWrite","owner"])})},b.propTypes={children:i().any}},91354:function(e,t,r){"use strict";r.d(t,{O:function(){return g},T:function(){return b}});r(71372),r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850);var n=r(2784),o=r(13980),i=r.n(o),a=r(37246),u=r(20681),l=r(53687),c=r(92242),s=r(55108),f=r(52322);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,n.createContext)(),y=i().shape({_id:i().string.isRequired,name:i().string.isRequired,docs:i().array.isRequired,fileRefs:i().array.isRequired,folders:i().array.isRequired});h.Provider.propTypes={value:i().shape({fileTreeData:y,hasFolders:i().bool})};var m={RENAME:"RENAME",RESET:"RESET",DELETE:"DELETE",MOVE:"MOVE",CREATE:"CREATE"};function v(e,t){var r=e.fileTreeData;switch(t.type){case m.RESET:var n=t.fileTreeData;return{fileTreeData:n,fileCount:(0,l.y)(n)};case m.RENAME:var o=(0,u.Gd)(r,t.id,{newName:t.newName});return{fileTreeData:o,fileCount:(0,l.y)(o)};case m.DELETE:var i=(0,u.xv)(r,t.id);return{fileTreeData:i,fileCount:(0,l.y)(i)};case m.MOVE:var a=(0,u.RB)(r,t.entityId,t.toFolderId);return{fileTreeData:a,fileCount:(0,l.y)(a)};case m.CREATE:var c=(0,u.$O)(r,t.parentFolderId,t.entity);return{fileTreeData:c,fileCount:(0,l.y)(c)};default:throw new Error("Unknown mutable file tree action type: ".concat(t.type))}}var A=function(e){var t=null==e?void 0:e[0];return{fileTreeData:t,fileCount:(0,l.y)(t)}};function g(e){var t=(0,n.useContext)(h);if(!t)throw new Error("useFileTreeData is only available inside FileTreeDataProvider");return i().checkPropTypes(e,t,"data","FileTreeDataContext.Provider"),t}function b(e){var t=e.children,r=(d((0,a.Z)("project"),1)[0]||{}).rootFolder,o=d((0,n.useReducer)(v,r,A),2),i=o[0],u=i.fileTreeData,l=i.fileCount,p=o[1],y=d((0,n.useState)([]),2),g=y[0],b=y[1],w=(0,n.useMemo)((function(){return u?(0,s.m)(u):void 0}),[u]);(0,c.Z)((function(){p({type:m.RESET,fileTreeData:null==r?void 0:r[0]})}),[r]);var j=(0,n.useCallback)((function(e,t){t.type="folder",p({type:m.CREATE,parentFolderId:e,entity:t})}),[]),S=(0,n.useCallback)((function(e,t){t.type="doc",p({type:m.CREATE,parentFolderId:e,entity:t})}),[]),x=(0,n.useCallback)((function(e,t){t.type="fileRef",p({type:m.CREATE,parentFolderId:e,entity:t})}),[]),E=(0,n.useCallback)((function(e,t){p({type:m.RENAME,newName:t,id:e})}),[]),C=(0,n.useCallback)((function(e){p({type:m.DELETE,id:e})}),[]),O=(0,n.useCallback)((function(e,t){p({type:m.MOVE,entityId:e,toFolderId:t})}),[]),I=(0,n.useMemo)((function(){return{dispatchCreateDoc:S,dispatchCreateFile:x,dispatchCreateFolder:j,dispatchDelete:C,dispatchMove:O,dispatchRename:E,fileCount:l,fileTreeData:u,hasFolders:(null==u?void 0:u.folders.length)>0,selectedEntities:g,setSelectedEntities:b,docs:w}}),[S,x,j,C,O,E,l,u,g,b,w]);return(0,f.jsx)(h.Provider,{value:I,children:t})}b.propTypes={children:i().any}},39493:function(e,t,r){"use strict";r.d(t,{aM:function(){return y},l5:function(){return m}});r(71372),r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850);var n=r(2784),o=r(37246),i=r(41740),a=r(76066),u=r(99618),l=r(45177),c=r(44466),s=r(52322);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=(0,u.Z)("ol-debugPdfDetach"),h=(0,n.createContext)(void 0);var y=function(e){var t=e.children,r=f((0,o.Z)("ui.view"),2),u=r[0],d=r[1],y=f((0,o.Z)("openFile"),1)[0],m=(0,c.Z)("history:toggle",!0),v=(0,n.useCallback)((function(e){d((function(t){return"history"!==e&&"history"!==t||m(),"editor"===e&&y?"file":e}))}),[d,y,m]),A=f((0,o.Z)("ui.chatOpen"),2),g=A[0],b=A[1],w=f((0,o.Z)("ui.reviewPanelOpen"),2),j=w[0],S=w[1],x=f((0,o.Z)("ui.miniReviewPanelVisible"),2),E=x[0],C=x[1],O=f((0,o.Z)("ui.leftMenuShown"),2),I=O[0],P=O[1],k=f((0,o.Z)("ui.pdfLayout"),2),R=k[0],_=k[1],T=f((0,o.Z)("ui.loadingStyleSheet"),2),L=T[0],F=T[1],D=(0,n.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"editor";_(e),v("sideBySide"===e?"editor":t),function(e){a.Z.setItem("pdf.layout","sideBySide"===e?"split":"flat")}(e)}),[_,v]),B=(0,i.Z)(),N=B.reattach,M=B.detach,Z=B.isLinking,Q=B.isLinked,q=B.role,U=B.isRedundant,H="sideBySide"===R||"pdf"===u||"detacher"===q;(0,n.useEffect)((function(){p&&l.c.warn("Layout Effect",{detachIsRedundant:U,detachRole:q,detachIsLinking:Z,detachIsLinked:Q}),"detacher"===q&&(U?D("sideBySide"):(Z||Q)&&D("flat","editor"))}),[U,q,Z,Q,D]);var G=(0,n.useMemo)((function(){return{reattach:N,detach:M,detachIsLinked:Q,detachRole:q,changeLayout:D,chatIsOpen:g,leftMenuShown:I,pdfLayout:R,pdfPreviewOpen:H,reviewPanelOpen:j,miniReviewPanelVisible:E,loadingStyleSheet:L,setChatIsOpen:b,setLeftMenuShown:P,setPdfLayout:_,setReviewPanelOpen:S,setMiniReviewPanelVisible:C,setLoadingStyleSheet:F,setView:v,view:u}}),[N,M,Q,q,D,g,I,R,H,j,E,L,b,P,_,S,C,F,v,u]);return(0,s.jsx)(h.Provider,{value:G,children:t})};function m(){var e=(0,n.useContext)(h);if(!e)throw new Error("useLayoutContext is only available inside LayoutProvider");return e}},13364:function(e,t,r){"use strict";r.d(t,{E_:function(){return m},d2:function(){return v},jI:function(){return g}});r(71372),r(26936),r(43450),r(15735),r(58188),r(28673),r(6886),r(60523),r(28399),r(77950),r(94908),r(34115),r(634),r(20796),r(32501),r(88233),r(27233),r(21850),r(9575),r(96264),r(71245),r(34769),r(95342),r(68625),r(1939),r(62775);var n=r(2784),o=r(13980),i=r.n(o),a=r(37246),u=r(99618),l=r(52322);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=(0,n.createContext)(),m={_id:i().string.isRequired,name:i().string.isRequired,rootDocId:i().string,members:i().arrayOf(i().shape({_id:i().string.isRequired})),invites:i().arrayOf(i().shape({_id:i().string.isRequired})),features:i().shape({collaborators:i().number,compileGroup:i().oneOf(["alpha","standard","priority"]),trackChangesVisible:i().bool,references:i().bool,mendeley:i().bool,zotero:i().bool,versioning:i().bool,gitBridge:i().bool}),publicAccessLevel:i().string,owner:i().shape({_id:i().string.isRequired,email:i().string.isRequired}),useNewCompileTimeoutUI:i().string,tags:i().arrayOf(i().shape({_id:i().string.isRequired,name:i().string.isRequired,color:i().string})).isRequired};function v(e){var t=(0,n.useContext)(y);if(!t)throw new Error("useProjectContext is only available inside ProjectProvider");return i().checkPropTypes(e,t,"data","ProjectContext.Provider"),t}y.Provider.propTypes={value:i().shape(m)};var A={_id:window.project_id,name:"",features:{}};function g(e){var t=e.children,r=p((0,a.Z)("project",!0),1)[0]||A,o=r._id,i=r.name,c=r.rootDoc_id,s=r.members,d=r.invites,h=r.features,m=r.publicAccesLevel,v=r.owner,g=r.showNewCompileTimeoutUI,b=r.trackChangesState,w=(0,n.useMemo)((function(){return(0,u.Z)("ol-projectTags",[]).map((function(e){var t;return f(f({},e),{},{name:null!==(t=e.name)&&void 0!==t?t:""})}))}),[]),j=new URLSearchParams(window.location.search).get("force_new_compile_timeout"),S="active"===j?"active":"changing"===j?"changing":void 0,x=(0,n.useMemo)((function(){return{_id:o,name:i,rootDocId:c,members:s,invites:d,features:h,publicAccessLevel:m,owner:v,showNewCompileTimeoutUI:S||g,tags:w,trackChangesState:b}}),[o,i,c,s,d,h,m,v,g,S,w,b]);return(0,l.jsx)(y.Provider,{value:x,children:t})}g.propTypes={children:i().any}},89825:function(e,t,r){"use strict";r.d(t,{_8:function(){return c},yW:function(){return s}});var n=r(2784),o=r(13980),i=r.n(o),a=r(99618),u=r(52322),l=(0,n.createContext)();function c(e){var t=e.children,r=(0,n.useMemo)((function(){return{splitTestVariants:(0,a.Z)("ol-splitTestVariants")||{},splitTestInfo:(0,a.Z)("ol-splitTestInfo")||{}}}),[]);return(0,u.jsx)(l.Provider,{value:r,children:t})}function s(e){var t=(0,n.useContext)(l);return i().checkPropTypes(e,t,"data","SplitTestContext.Provider"),t}l.Provider.propTypes={value:i().shape({splitTestVariants:i().object.isRequired,splitTestInfo:i().object.isRequired})},c.propTypes={children:i().any}},41061:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372);var n=r(2784);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(){var e=(0,n.useRef)(null),t=o((0,n.useState)(!1),2),r=t[0],i=t[1],a=(0,n.useCallback)((function(){return i(!1)}),[]);return(0,n.useEffect)((function(){if(!r){var t=null;return e.current&&(t=window.requestAnimationFrame((function(){e.current&&(e.current.focus(),i(!0),t=null)}))),function(){null!==t&&window.cancelAnimationFrame(t)}}})),{autoFocusedRef:e,resetAutoFocus:a}}},48171:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});r(34115),r(634),r(58188),r(20796),r(15735),r(28673),r(6886),r(32501),r(88233),r(26936),r(27233),r(77950),r(21850),r(71372);var n=r(2784);function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function a(e){var t=e.delay,r=void 0===t?3e3:t,i=e.initialState,a=void 0!==i&&i,u=o((0,n.useState)((function(){return a})),2),l=u[0],c=u[1];return(0,n.useEffect)((function(){var e=setTimeout((function(){return c(!!document.querySelector("grammarly-desktop-integration"))}),r);return function(){return clearTimeout(e)}}),[r]),l}},70887:function(e,t,r){"use strict";r.d(t,{K:function(){return o}});var n=r(2784),o=function(e){var t,r=(null===(t=(0,n.useRef)(null)).current&&"BroadcastChannel"in window&&(t.current=new BroadcastChannel("user")),(0,n.useEffect)((function(){return function(){var e;return null===(e=t.current)||void 0===e?void 0:e.close()}}),[]),t.current);(0,n.useEffect)((function(){var t=new AbortController;return null==r||r.addEventListener("message",(function(t){var r=t.data;return e(r)}),{signal:t.signal}),function(){return t.abort()}}),[r,e])}},56556:function(e,t,r){"use strict";r.d(t,{V:function(){return c}});r(32501),r(58188),r(88233);var n=r(79174),o=r.n(n),i=100,a=200,u=20,l=360;function c(e,t){if(null==e||"anonymous-user"===e)return i;if(t===e)return a;var r=function(e){var t=o()(e),r=parseInt(t.toString().slice(0,8),16)%(l-2*u);return r}(e);return r>a-u&&r<a+u&&(r=(r-=a)+l-u),r}},34097:function(e,t,r){"use strict";function n(){return!!document.querySelector("grammarly-desktop-integration")}r.d(t,{Z:function(){return n}})},45177:function(e,t,r){"use strict";r.d(t,{c:function(){return o},j:function(){return n}});r(15735),r(58188),r(28673),r(6886),r(60523),r(28399),r(77950),r(94908);var n="true"===new URLSearchParams(window.location.search).get("debug"),o=n?console:{debug:function(){},log:function(){},warn:console.warn,error:console.error}},51004:function(e,t,r){"use strict";r.d(t,{Z0:function(){return o}});r(14586),r(71245);var n=r(99618);function o(e){var t;return"enabled"===(null===(t=(0,n.Z)("ol-splitTestVariants"))||void 0===t?void 0:t[e])}},21629:function(e,t,r){"use strict";r.d(t,{m:function(){return c}});r(15735),r(58188),r(73439),r(28673),r(6886);var n=r(99618),o=r(45177),i=(0,n.Z)("ol-writefullJsUrl"),a=(0,n.Z)("ol-writefullCssUrl"),u=!1,l=null;function c(){var e,t,r;i?a?(o.c.log("[Writefull] Loading script and styles"),e=a,t=s,(r=document.createElement("link")).rel="stylesheet",r.href=e,r.id="writefull-stylesheet",r.addEventListener("load",(function(){u=!0,t()})),document.head.appendChild(r),function(e,t){import(e).then((function(e){l=e.default,t()}))}(i,s)):o.c.error("[Writefull] Styles URL is not configured"):o.c.error("[Writefull] Script URL is not configured")}function s(){u&&null!=l&&(o.c.log("[Writefull] Initializing"),l.init())}},50633:function(){}}]);